/*! For license information please see extension.js.LICENSE.txt */
(()=>{var e={51:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(129))&&r.__esModule?r:{default:r};t.default=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},87:(e,t,n)=>{"use strict";n.d(t,{Dt:()=>s,Y8:()=>c,bb:()=>a,vv:()=>u});var r=n(269),i=n(5130),o="";function s(e,t){return void 0===t&&(t=!1),null==e?t:"true"===e.toString()[i.OL]()}function a(e){(isNaN(e)||e<0)&&(e=0),e=Math.round(e);var t=o+e%1e3,n=o+Math.floor(e/1e3)%60,r=o+Math.floor(e/6e4)%60,s=o+Math.floor(e/36e5)%24,a=Math.floor(e/864e5);return t=1===t[i.oI]?"00"+t:2===t[i.oI]?"0"+t:t,n=n[i.oI]<2?"0"+n:n,r=r[i.oI]<2?"0"+r:r,s=s[i.oI]<2?"0"+s:s,(a>0?a+".":o)+s+":"+r+":"+n+"."+t}function c(e,t){var n=null;return(0,r.Iuo)(e,function(e){if(e.identifier===t)return n=e,-1}),n}function u(e,t,n,i,o){return!o&&(0,r.KgX)(e)&&("Script error."===e||"Script error"===e)}},129:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(996))&&r.__esModule?r:{default:r};t.default=function(e){return"string"==typeof e&&i.default.test(e)}},144:(e,t,n)=>{const r=n(3908);e.exports=(e,t,n=!1)=>{if(e instanceof r)return e;try{return new r(e,t)}catch(e){if(!n)return null;throw e}}},181:e=>{"use strict";e.exports=require("buffer")},215:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loopbackTemplate=void 0,t.loopbackTemplate='\n<!DOCTYPE html>\n<html lang="en">\n\n<head>\n\t<meta charset="utf-8" />\n\t<title>Microsoft Account - Sign In</title>\n\t<meta name="viewport" content="width=device-width, initial-scale=1">\n\t<style>\n\t\thtml {\n\t\t\theight: 100%;\n\t\t}\n\n\t\tbody {\n\t\t\tbox-sizing: border-box;\n\t\t\tmin-height: 100%;\n\t\t\tmargin: 0;\n\t\t\tpadding: 15px 30px;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tcolor: white;\n\t\t\tfont-family: "Segoe UI","Helvetica Neue","Helvetica",Arial,sans-serif;\n\t\t\tbackground-color: #2C2C32;\n\t\t}\n\n\t\t.branding {\n\t\t\tbackground-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAAA8AXHiAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAhGVYSWZNTQAqAAAACAAFARIAAwAAAAEAAQAAARoABQAAAAEAAABKARsABQAAAAEAAABSASgAAwAAAAEAAgAAh2kABAAAAAEAAABaAAAAAAAAAEgAAAABAAAASAAAAAEAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAlqADAAQAAAABAAAAlgAAAADkcSUjAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAAxaElEQVR4Ae19CbgdRbXu6j2cecoECTIkICCGzAg+7qeQ9544QFQgiXpVEJTEe59ALsbMwE5AMZCQELgKeSoqDlyiQogCSUAC6FNCQhIwQMALCbNMGc68p37/v7prnz47++yzzzl76OCu851d3dXV1VXVf69atWqtVZaUg397IPJwSCKT46zgx16wh+19XSYnO6PjE7H4MDuZ7BSxXhQJ/On5KTWbTSMm3bYlvHXmJNxj2SatFLFVioeWn5lDDwAgMvOU2NG/3DMo2h691rLtr4bqBtVX1NVJRUOVBIIiyYSI3RkXO9q5NZmU5S98tu7XpmQF2AwAzCoNwMrAMm/CT3HkrgqJTI/KwodOD4ZDa5MVdUPtfe+KxONKiSob6+SIE46XqsYGK5FIBoLVtQEJiSRaWp+xktaNuzpqfirTLcBOZNJtdnjrDCk6wMrA8hOgWJcZoFSrT4nJogfPESu4Dv8AVLTTEqsC9MkSDHB2NIYfkZGnjJOqpiZQrkTCAmWyKqtDgXBAEs0tLyZtWRl7953/u/uiUR0sVgH2xuKERCJJnhc6lIFV6B7OuXyAJrIpqDzVlQ99TUKVt0scAEomQaXskBAONlEFrgpvLdkZk6r6Wjn6IxMx2qVeY0IsSVrhqnCgMiiJA62v4a5Vkmz/4a7PDWtmVXSIfGMSAGYVFGCpGvGh5VCiHohEAiJXi77sKx+eLZU1N0hHCyuTAJCCDqCAKIUCYxv4AcY6YnL0qeOkZuhQSeoo6b5OG+AC4ZJQRThQFQbAWt7Bvf8ZSNg3P3deA8ZUF2AzADCrMAArA4u9XMoQsQMp6nHlH5dKdcMcad+fJGVCCKRAxfMU1XKB1dYpI8acKI0jj5FkDNSti3LpzSgjCQQmrFA4HKiuIMAO2EnrtkBb+8pdXxr2OjOd+bAd2vQ2cro8mXPjwH/LwBp4H/a/hLvuCsr06cpky6KHfiK1jRdJ235M80ClABMtmMMfKJQDNB4j1VCstg4ZcTKANWpkZmCxAJZiABYIhgO1VRwi21HGj63OxI27pje9xGz5BlgZWOzVUgSPjEqufOheqWmcIq37YwBCWKsDDGlQULnAUh6L4CLFAh/fCmCNOSE7sNxi3IilxiUQCAdrayR+oCWBcn4q0eSy56c2PMc80+6yg2t4MEAKVgYWO7HYwcz8Ig9XSTz5kNQ0nC7tB6KoBmZ+bnAZdaVUhIMHVDxWQtQCYI3thWKZ8rrHLICiCwCslmIKFGn/GoPm9S+cW7ddswJgZw4Ta9NkC/n6HsrA6nufDewOV/Ap8x8cggHvMUztTpLO5igkCV2g4hMIJI3dY56mqBdwgXOlWP0DlhbNkhVgtoQDELza7Z1iJ2J3J2P2DX8/r+Evmsm2A2dukkBfAYbZSDkUrQco+IQ0XeY9eKwEraekovYkzP4OBhUrlGLEXYB1q6QnzXPYLUtuJ5SLcei1k62tMYDKDtTWnRusrf5/J9zbcv9xa5snc9aooLJti3xYbsVy1lEOxekBI01f8NBECVnbJVx1hHS2YSrnGf4y1SQTwAyYTJzpvr6lAWA2AWYlW1vidrQjGait/VS4pvaPx9/bvOn43+4/GwCzDcAoC0P+rKNd1ot9q1s5d489YIa/BQ9+Ap/yAxKsgJSJ8gGXUc94I1BD4Og/j91zDodYGFTmvf88VsYnpiWSt7ICNXWcoQoo2uNJ217298/X/8bky7ZcVKZYppcKE0OaDg0FDn9XPfwFCYc3YEYGUEUpTQeFUNTgyZniDBUyfJdecu9hVJjAYS+YbGuJ8z9QXXNaqL5uzQlrm3d88O79X+Ujt860MIu17ExDZJliFealkMJYMn1NQNZATnXlQ9+ScPXNEm3H02zKrZQK9PpoxQ5+PBJ3pVwqbkBJpFhjPiSNx47sWY7V60Nyy4BaQDQhdqCyJgRWX5LNLbuA8xUfaKz7sTtEkkhhMuBoU5QpVm792rdclKbzkyWoFj64WCrrAKo2SNMxhukSjb4CvoZe/pGBebyfP88ZTNx14KQX6BdV4McQSna2JZItLXGrsurEUEPdra8daPnv43934CIy+Qoqth2hDKx8v4hpkKbrAi++3AUbf4AlmqukvTmuiytgWfr3OBdg/bs533cpwMDgJ6BFEQtUVB4dGlz/kxPuab5TH8S2A1z9bGi+6/o+KY/8FKkUw6KH/ktqm/4Ngk8y6UHltvVCH39IrQx1SsXmoI9l5Tc72xS2Y50AWGtnaEjdF46/p3mtPuJqqmOUQ356YMZtYai8xITrfzsGb4Dg8392W6IZ8FOygImXslwe8KOzF0Dti2D8vZbO0KC6z37wdwfm/d2yvu8dvbPfXr7acw8YcULkrw0Sa34EoBovHZCmq3Jez7dlvwKkGMCoqIHn+E8tQtse5n1UwZn37HXVq0nOeO14sj0Ws44tD4U59FjWLEaaPue+IyXWskMqa11QUfCZQgaK6OtxhqeaIkpInjLUyiRBjJKMhRrrqkOh5IXlodB0S3/ilDR9/cngyx+RcOVg6WjtXZqe67OUUqVnJroQsgu+nTzF/oXUlsIUTIk/WaZY/e18A6r5D34MXbkV0vTBEoVKZ1Zpen8flv2+FCHLnq0YV4N2Zwcwb48pU6z+dDfVXiKnRKGh8HksJt+tIp44penZlmj68yBzD6DjRQ8pmQbwWR4u2aSau0oQg2JRT9EaUqZYfep9vEaKFGhFs2DDN6Si8m594Yk4RQyF+0gVMRlgwyTzb9qRIZu51C02+Uzc7WLaSS55eIvJh1WHwnVGWt0O+VM1eFgMg4dIXBY8OF+qar8HlRd0JciHRRutEoXUy/Q836R5kjIemnwmzpjJTcwlD7O6+crAytaZ5ppK013B5/wNy6W6/goIPkmlMBD1V5puCu8h5gs66GV6E7zHPZRRsmSrgOS7ZI3K84O9Bg/zN/wcuulfVYMHZ+3Mw+Hk+bmmuHT8pPgrZki/aG4qfVymWNneAfmp6Y5TDpm34T6s+306v9L0bA/ntSzAMZdK45qht4qXKVaPPeTM/GISWVcjnZV/xPB3mho8WL1ofPZY4AAuGHmWAZMpKv3cpPsgLlOsTC/BLNHMXn+YRAOPglE/ERoK3a1oMt1XrDQdDsne4YEEl/kv1vOzPcetUxlY6Z3kLNFEZdGG42Gk/hh00w9Xg4fedNPTy8n7OdBjgKRl+5RcudUqy7G8ADDS9DkPnApQbYNjjsOlsz1/SzTeZ/V2bKiQiZk/HUvp572VWcTrfaNYVLddvTUkgyYl5Rk2c1NARtRbUkIHX3nrKyNNn/fgp6BCcL8E0DUxuHShNL3ULzBFqVCR1KwwlZi3LshnQbkDizMkS61i2dkmqDa2zMQpr7tuDc3FQyOmNH0TtD4hTZ97/1ckFLxDEniBCbpvUZMofzQjHdzp5/6oZaoWuQHLMLOrXmgQO34hvugzUMJgfMnvIH5I9rXfgRfTJpqv9P4vU63r7cAYPESmx2X+A7NgQLoCtn68q7BLNL3VK3U9DT1pp6lsPjzoBVj8mqFWSzOfW549B7ZwP4W67RB1fgm7ACh24T84DZTsKlm2/WKZOX499Z1l512OdYoPG5yqkho8qBAoIXMf+K5UNiyAch4axbdXwiWaVAU9BwZQqdHPJCAPD82/55aSHbp17BlY/JrXQLVmOoa/VTtnSqjqVuFI2LI3itkJmX6nCLrICVceIRVVD8iNTy2RK6yrtVGGypWshVke7Bg8kCqJzF2/Gk45LoGMynEf5HGPl6WEIl/yAIlPTjstcmWyP86tW+ZZoWvCo65sbvrblVLVcCuGCFtiUb6MCjQshH/oOquAtQJMbgKzp6TUD7lKVjy9Ua57bJAaaUZ2dnd0kb1KxblKXtAYPMxd/zss0VwibTB4sEGlaF7sl8AXZP61TjhxX1qqirYO2alTPx0c3JHetbGbdq6SmqZLpXUfAEUnAo7NWA8NYLNjkFBXQJj4NpxkTpMrJj6ixgXPTLNTXut6uLkoyTR4WD0zpg5kB7+3EbrpZ6g0veQyqh5abyTuRBSP1dsM8iYwnMBTn91ph4afdKw0jDrWtqForq+oh6KKmWyDoegOLO/MbuXOO6V20BekdS9ngRwyu+ftsaZ2DPIfmI8je7Rtvlwx9vuatdRDo/FJNe/3gzDZg8FD3RjH4KE/SzTsinTy0WOH9OFCWrl8hD4GPwZYSSj/wmzBqm2y7Ff23H7cZ856Lzxk6LfjLc30nFw69R1PKwmsrqGQL57iAg6DK3c+CCadoOIyhnoh8dzXy6EVhvvohMQ7bQyN18mNf1sHUURdSYdGCj6pnDd349H4RmDwUD0AULH5hQBVT+WaZwF0YEYkGA5KKGRZrfsWyS++fHGgtvofYEpArArjpLaXl93jZYd5N9SE4oTkM5vAd0yQln1k0vvLI/HLsZXa1TbCX7n1nNyw43z5zujHBZ7iVLhaYHfQqRYbafrcB8ZhDHkEk5BG6YD7oP63LVV04Q8AKhIxGuZjsAOVBZtx4C1JJKYmb/78Y/r8aKLKrsYR1A0NBAtfryxPcIkuPPbajjeUVTuOhBcUfM11E6Aa4iy4sqb9/4fPJVCvNrhADFd+QCqr/irLd8zSCYFjht3zjDRLvft0SakwdniYd/+ZuG+LhMKNKk03fj77VFiJMiuDjnGwuoG860a4ED1RAKojbttSwxrB7zYGHuc1MS55AF4IGUjLIUO46RksuNp/lYpqmC/Bw1x+mVln1mhB07Ju6AoMjf8iL738FTy3UzhrjIzm8/IfyKjTfdCc+6bC1eYa/Z7jMcfggS33BsPamDjTtfQ0c55eFtO95XiPzT0m5jUGU0Z6XhvyQ3g6ViXVtr2LZeWUiOZH2044YVL0dT3x5w8oFhys2rIeqiEwX2rPN6hMqx0n+G37YuDdpsqoY56V67eNV1DphCHSxeuZO/obU/7GMjn7m/PANyFNX6MC3XiCzvgpJjk4mDQTe3P0lMb0TNd4rzfde+wt1+TzXk8d66gWxUYC8P4f2yvtLWfJjQAV9e7JA7NtPg8haTzsPzD7GyUt72GbMqksYH35PWJoxDBbUTUK85ptsvypb8q3x96mz/TOSPtbCTV4wGvlJGTu+kWwSr7GFwYPfWoP51RoA4e+1n2PSqdMlZs/97aKSCKngOJGUvDrXiyTDQnsfqX4Z7bOCqc6DsHwNRcnYGjsgJQbHVE3+FZZ/vQdcC7u7CGDnar6XQUtI+L4aJpz/01gdK8BTwL5Gx9Egwd2vJ//teUY+kIBsCRBgGqpLPvMGXLzZxxQcVbrNCCti5wFBCfRL+2juMGW0QoseAzRd8D30O2fzUlP6+nc5DWxN583jUMSCm2Dw/y6QV+R007aKUu3nqRrkpxMcDjrS6BQ10jT59z/K6luvAyg4syPQ6wLqr4UWIq8Nih5NYe+Vuk48FmAap72Az8YB1Q9VwrdfNA3w9wm3RybOD2d5yakX2N6+nWTZtLNPeYc17lXC10yp93NcxM8uU1Sj7HJa2JvRm+aHjueelsh1qiqOREzx7/Jsh0X6mSC7gY5NOYSyKRz2xC24zv3rccQ8iXsRYOv2/ECnEsRpc2jQ19ch77Ols0ST5woy6as06GPn5f5YLJV0tu1Jp83zRybuKc83uvm2Bt7jzOVwTTmwT9dGu6ERS+TvDSV58UKFViH5EaNAfB6PwXftVofTD6J4oJsQaXpYGRnr6+V79y/GUs0ZykPR9/lbgN9G7NdNjeoDGLoqw2h3jfJDWefJiumvJbaszBX0VTf6Hu2Hs3bNQwT1m+kgiIRiB1KFSxYZFNLghoGdYMvkRuf3iHXbzlOxQUEV6ahcZorTZ/1wAjoiO3AyzkFwx+c8XORHKjiv5+DLRz6sA8h9nZuOzBdbvjMLK1uLkOfn9vl1g3A2r8CM8I9mEFV4qU4MiXvOzHH3th7zIK85+nH5rynfCYdW2ugnJBK/Ctrx0qw6hm5fvsXFFwcGimxN4HS9DUQfH573YfwPTwFg4fjpJM7PKjmhcnlV3Bx1ucOfe07xI6dJDees0Y4pNPFRy5DX1cLfXsUkCtOxxZjyU/Br9M+fEFUiekClwFFeszmpKeZc+8102xeM9dNbPJ5z538FbrkEghWQOZ1pyx7apUmczcqUi/VTQeoZq37H3g9T8J90FDpgMGDoVR8kLdMf1EuZ8ivqgthdWO1LPv0eFn22ZecoY+yKX+syjivYWC/kLxjFjYba3k37RwHbYQ/gU85qgDS977WMgyhZhL1SGJovFSWPf1ReIs7T2aOe1ULunTt2Vgp+L0EQcSiEF1YWDqiSoluDwKGg++HE0vDexhwmfO+1iYv+S0ubVHUksTQ9zVZfvYdWqzK71SU0L+nOFIv517vB9W/0gZ+l9vHkOSCtyIluHz0yxK1x0GV5GmdoeCVDfwpAyqBogJ82Zg1Vtd/RIKBF8B7nSUX/OJf4drz90qVYjHOBimecKgUY90ShOfuMaJU8B6nEgt+gFePpZlqLCBH25/DBzNaQUVAkXfMhwEK21Wath3ceW5d+PIkxSTPH7tXmk+eiOn6I1Dwo2ZDqcHF2nHxNY79jaskWLleRh33S2irQqVQfVIFHSDh3XHWrpQJLdPGeWMee/9ZbFECJkSY7VbVYcWh+eey7AmAaspz+iETUO4uDgOuSUkpcebad8mKuGCrZFlnh2fKsr/9FtP/86TNVfSDWkbmIoqQylljPEaib0lTExaGwra8/lpQosB9GE1QIOEqPxPW0tSUMa9pwEnqnIkmk3s5/1EUCo8V0E0TiBJmyvJzVusj2Mfs6/d5cCiWaSS/IkqxGWaffD70qWBoMIgyIcq4Uq9Irxfzx3myA5t43JKamoCMHClSXw+aSlkoMpihzwyFhKFJ1/vdPE5ZXdfy3Q5oTqFI6E5BRTvW8SK2lx+voNKPNgLWA338TxC6A4sNphRbjSkw/s8+eaa07fsurFhI2dhhfF2lDWTQoaggQVTpA0eJHHY4XiPOwetrDVNgwrnqiBtApRDl5DOtYP78BQ5vAlCFsSxzl7zcClHClB2iyoYAVARrmf8koWso9DZYFfHwdX0Y9oHTRy/CrOxt8AkrIZJALjpcpm51Xl+I9+m9H3MU05UQxEOHiVRXibwO7SRSrwoOjahbgJkQWE0e8oVztmji9Fkj0wcWMPRVVKiKTtuBy+XGsx0xiVKqyYXlVdlG/vshuN2YGVisoH5dnLWoOOImyJPeAc/wC3QcGGa4xnUMLErfFFaltk5k5CiRN94QaW4GuCBrVPGDCyRvLfkC2Hj+6zEO9Nh9MzzOOWhm3hhXteGOlldBTc/HssxmxzrpGbsYQ182omua21OT3FZrFzBPT+e85u0ak8+km3OVxOGkZ2DxDn7iEXQaxREzx/4SDD1M6m3sEAqO2ewQakrU/O6Pvije7p5785hrvGSu89jk8V7PlMdcN/eS0pih8UgMje++LfI2qoklOLXUZkt1wOcDkFfv1x8cI874Vkw+VgCB2RlMHXmsRejegwGIZ8JYjlon1rtfkhUXtOrQNx1C3CIFVstbtfTHZrtm8qbnST9nvkxp6enMw/+DeSzmTA86Y4Qa8eyT16NHT8UMrRVGCWTqM89uTA3MU7zlmWtMM9fT09Lzm3zmHhOn0vGWafJPkAw9TOQoAIygUb8eyJxi6HE9xXchnflT/ywUQctkunPaleY552HStZgJhi3M+uZBNgVVF4CKSzOR4oGKVTG457FfQm7AYm2pm04d9dknPwFqMB4znjexvkjtg6J9mVk7jUBiIPWqw2zxmFGC2SNqh+oRPBnB5QJIQcRjPXDKMYBzzry/zARVH7Q9EXsL1uEfx1rfUkdZ8dBQG/Y2plDHuQOLNTDgumL03/Gmxkln6y61fPYLuFhHMzSGgfkjj3aYezL1pGgMBjA8V+rlUjoDKr3uZE3l7zoFakHLqDbc0bIRVk0nyopzHtO1Pi4eF8ukras+vj3qG7DYDIKLPNd3xr0lweYJ4C0ehx2iX6T0TkcTXAZIFEccBYBxFqgyL2QheMyQmKJkSNc0FpGJenHoCwWx3hfAWl8EVOosWXnuPh36etPwZJH/ZKEX5r2H3lCeC7PFKyzunv1Ruf6pP0BK/xnIvEAaqFvFt1jqgCpw0OLQWN8gMhLKjG+8JtIK/1ecNbKGJGLpNeU9BCbTnWOagsZgMQOFRGiAWPHpECVsVIuZnR+Gh8PpmflM3F6UwDawnvz3S0Bd+k6xTOW5eG10pOaMPRuLxXCuTyl90hkuTL6Sx0AIlxXDIKpHjRQZMsShXPTa56VcqSHQTdcXBbJnQ2BWSWPR1kelDUPfcoBKVXci9vtFd6oQr6j/wGJtqCNFjUeGOWMuxBLQcixekwriO/KRLwHv0Hj4CPBeRzqgov0qAaT8Fqps+C4m2kkYY0BmEa4KghIvlZXnnCG3nveWZ+hT6LHp5XBwD/RvKPSWo0wrZkMMc6zZGBbfgT+t66DRyY6nkagDPM1Qwh+Ci4FDYwMWsisprcfQ2IGhkYw+KRazONloLIq1vvZWiFa+BJP2dchgybQ1MBYt8dCnjfD/z8AolmkfZ0NXA0JcvpgDt0Wdzd/Al45XFODSD4dG/wQCjOCiAcnRI0WaBrtMPb8D12KmAgvIHa2bpS3+IQUVhz6G94nasLalwD8Dp1imgo5ukSulH/NjuQGUywrdA78JQch7yGLmB8TmeQONCS6CbPgRWDSGu5Z/vAF+CkNfTS1mfXtXya1TL9dHqCXQIaLmwm/DBFJe7znT09PMuYl7upfXGdLLc1K7/7p58/+yOWNUccTYtVhS+QgsaPaBcPE5BJd/gndoHDTYlpHHBeB36oC89drZCirObA8VixkltmldmwkE6Wnm3MSmiEzn6Wkmb3rMfPjPP7D4oK3u0/78Z5FX9jhMsVq551o79/5iRDo0gomvAs818liR8ad1PXVa12H5qA89AKqVf2BxrYwCw5lrPieHD31C2jub5OUXk2CCAw7L5UNwcUxMQKHLCjTAKvsPct2Om5Bkq24aqW859LkH8ggsDB1k3uli59/v/jqMYO9Rvj2AmWFHR0BefglMMhza0LKGMzD/hQDUgRyj2fpBl8l12zdL5K9HpuwBVHTvv0r7tUb5AZb6bVoMYEFL8lv3zINu0o/AsBM9CTCMWAbBHCEOATXB1Y7pvU4WcZk5/PXfZTRLy6Cq6ufke09+VsHFehq1bb++TR/Va+CzQjK4EXe/5MvWLoerSeyXDPdBAVCwpOvFlxQqRHBhJrZnt7M4TOU8MzPzUYe4VaG4gS6FatGetfK97ddjaJyLa47RrB+NIQh8PwTOClGXgVEsgsrIdi5f+zOs+l8Bwahj7UuzJz5E//mDgDVcPX9lt8iB/Y7euj+HRdbWMZqNtiakfvAc8F2PSmTHYV1Do7aE+UobONf2C6jYE6gL33b/gUV+KgWqdX+AT6oLoOnARWhnhwcDKM669JhPRSCPxf/XXhHZS01PHPuqZ7SW5of9E3CNZj8mVbJLrtl+loIr4oojTM4Sxn7CFbuB9enfUKhakpNj8h93VUuyGvsl130UVilw323R94MTCCg9YYygp7hI1RQaOpB6vQEDCA6H1PrkOp03v97kgx/HnpL6V1CbqWgCv7hevrttsSy0Ilq7EgtQ2Wump33QW6kq9B1YpiMvvW8YhJ+PqdO0Ds9+yYoj/Ojam56kHqYHmgRwMaZFzVtvOuAaNtzBlR/B5bSAGqPYGAFbi9QPuVq+t+NfJJqcJpEJ+4QuLrlDWjmkeqBvQ6HZ4eGydcdLAO6DKqpPhI4SVZOp6OeARYHhAsekKZjwo8OiJ+Z16kbRAOLNV3nm5NElO5RhyvJLTHea3MiJ/iRq6v+3VFjPy7VPflxBxRmj2mNqK/7pf3IHltnh4fJ7P4IZ3zZoUg6Hdxp+pQ6oTFfqEOieKKBwzDh17AKLwyH/mR/meLJ/L7QN9jhDIvdB9CtTr0qMNneIiKEPhmH7lEfku9vnOoa+WIw3C9amP4oR+/AbzA1Y7Cxanlz++08CCI9DRbcWPgnIqGeWSnvBpR0L8JiYh/qPH+bTf6RREa8FNoFcAqKtoJ/B5bQFewZhO7141IaD3u9DJLFOZu+o1VUHP26np3Uu3k8vwDLSdCzRzFr7ZciiHgAQsPwBuyobfEW2LyVFokxjCCIee8BkQMV02v8RXNSPenk3zOYxwhpBKm/LFkw9TB6eDySY+03MsjIeu3I6qmTXYM+gwfYuWbLlNLULoHZtUYdGVtD8pzc+vfLefOnXvPem5zN5M6V3v9YzsChNp2Ibpemz7p0l4dpfqOeUJFSPnQ0wvTXo4ViR5FxLgYqnBlxpMTuGSnc02SK4OqBST3AZIwfTnvTYeUL3fk3P05dzlsf8DOa+no45a6QzXe4ZFKr6APjOv8o12y4v6p5BWlHvj6m0idMrb/Jma6S5Zu5Nvyc9vft5ZmDpEk3E0em+7N5rIX1eIdFWzGyVq6bgKfdAqmSCF1wpapUJXHgEh8NXXoILoBa/C1JN6+CyqBOUPI7t9AatxKzxLrn0vkp1bPdPODQeDCxdook4QqVZa2/D7GchZDjcL5mwQH7zFfQh5p0KKjc2YPOCy0vF+Koo5+KzXtkNfwz7HHBpAp/r2wALJdSNGyPUNE6DEuGzsuTJcY49JgTKzpYsvq18PivWHVjdpOlrfwvd9RmuM/787Jes4HIB6QUaW6Tgw4+Czb1IqTyZ+NdeFtn3btKR0pMZ85GhxsFvg5V39wyqHgWB6na5ZutMZSnoaIV9XKrQn2+yP/egfV2NNNJ0xjXDN0ql2S8Z0vR8BgLHK0pgxV0cOY/xnDAflU8tGIu+9aYzWRgCt0UJOF9znMH1bVjOZzt6L8vZM4h9zD2Drt3+LxIf97WUz9d8LWSbBYtcAZBrPm/7+noP8jsUS5XzoEc16+4mqR6+RSrqzkjtl8xCc/lnRUw+7zHTTEgde8Bz0LCIzLys/5oPFjPwkxCQDnn+2bPgYO1fwSTjOrh6G4Ya5pn+jDE0grpS5lXb9FUJP7VTIls+5Kw1gnL5wrDXvJz8xpj1oYFUzrt83dGSCMAZf81Y8FQHO+Pv7bkp0CCj95j3mZdujhl7yZSCCyDSYZCXcBzACwnAKLYGxqLxts2QPxwvd39zo8w/+ddQGDxHqR73Rwa3rMX59kc3RjBD44cw690JvusCHRqppVrKobGAfeaIEy5feyImfNg2pOooSNO7lmgK+GAt2lArnihxYkyAYeijAUYl9pjpaF4lt00/TX70lVfVWJSqwgvH/AE5T8eQ2AEzMw7n7jpdOqJxJWPIlC/XtPQCM92XMQ/ccbt7BtU1/QwiidWai+Kc96H6c0C+xh1W7fWQvzTBNVHxQGX6vhu4lGphjxnsLCrJKDZvmp4yw1KLGVBW9RsBd0oLxv4FIJyAOr+NZRXkx7ZsGviie/tnxvQ8uablcl9PecBv2VDj0D2DBl0i127bLpEnjtU26VIQBNLvkxCQ+v1XQJfqGHxNUEjHGthBHZ7eSQU4d7qTbChcLtLbMPaYSdgnyQ/Py7zHjHGntGDscxhaMHS3/re6asy0XYvBi/eFsQnpwdsscy0930DymHsdvha7fWEhu7J2HDZAfxYAm+bsSYih0fjDMHXoT2yeZervPc+WxmeZ6+bYe6+pS7Y0Nw+1PKfiq+dp1wzRFFC8OA5+Co72MfS1H1gtt5w7Xn54/otZ95gx7pTmjH5T4vvGw2nHFvVbZcDFupsO8B6bjjPXTOxtqzfNHDP2BpPONHOcLY+5tysvvdeg3dgzqKr+Llmy/SbNYvYMMvlzibvK7A4M3ptep2xpJq8pL/3ZmdLT09xzzgpH61INfSyYTMWMsYCDWV4Iin5JqDVfAFDN1PbopAJrlNmCDos2BI+TW2Th2FMByg3ujhrZ78tWZlGvweWTs2cQttNrugx81+MQS3xAh0blu3IbGv04ftIqJTOqC93BxtF+pTrafw6mYqNl1bl36CyJ03AytbkE406JM6xF4z8Jge6vAK6wTgDcvWNzKaaEefhxO0NjVd2pON4li7dOUXDx3ZC37CUwmwnmdZrYpDP2ppljE5t86efp96XnY34TzDFjSh//Bv/kvAYd4aIFGFzgj3vMdGCPmSHbR8stU59z/E4BUI4fiNwr43WntHDcl8G/rJJqgIu+rfwtpfe2EbNG1zKouv5eiWxbqv1Au4JeZo0GDObFegvNdC1bPnNvT/eZdJOPsTfNlM09oddgys7ruVEI5hxIsDj0VYKfAwFvb54Jby4XYg3NWeoYiMtFvgCqqZDaLRp/OcB1JZakKOci3YLDD1Ta7/9JWgbBRq6TlkGD5sjiJx+V2X/2n2VQDu8/IC17V2L42A1xA/z64KUXKujQR5eL2F4tFn0RBHI8+KnVOvSpNkWOQ1+2+tGdEgP5s0Xjr8WOW/8GgS9oozqOKCZFzlbL7NccXjfoWAY1fEzqq3fJVds+4YhZImARXF9k3lL89MGwXqhPQH56UQcsts6CuOE93ahR5UF5rimXXshhco+Z9pY1MrTzJLn5vB3gHypSi7PejhrIsUqzAVLKha4afytEF1NVpyug6hLFocoDqT/vdWR7mDU2O5ZBVdUb5KqtEYey4+Pxqj87n9JAn5i/+wkdBGdJZ9WUFyCQxA6rHS/hCyfDxSWd/AwdOuurgHYEFNw7sMfMLZ+frmrOpCrc17lQgcMqeZNF434LmdhkDDHc8zAEgB8iM0b2P3eOhWVQtD0J58FXy5VPbpBZ25oo83r++TfyqxyQ5/fgLOlwEfrm818Vq3U8KNc2LEI74BrYwwBNDH0sK9b5GmZ9p4FKrdJZTr6Gvt7qZ6T0V47ZBHP5SRCr7JMwpfQ+B5f71euXzaGRE522/di0oP4TUpvcJXM3f/z1mUdAhxvB5jDvv+BUiovQpCA3f+WADN1xCuRJD6oEnIx2/4KjdVCFPWY6WtZJdcuJcvO5m3XoUyZbFQn7V3Jf7zJS+oVjnsIEcTx2Z31FKqAtQUGqUmXi32f/rJjWCY1lHeFgCb/caTYGqnsY+OFHAnO3LGJXBMIWWBkeaU498MOPUyVTE4LLyI++dc+vAa4vYvji0EGpfPe85p70mGAM0CoCIR6dJ/953lI99patCUX+4bBICjbvsUFwB/kIpPRj8KL44fhzSCGgGBh3Axn41aQdsGqHWPZbr99+zLgT3gsNGvrtROuBBF5QrzIvLbPQP6jzwWDxOvr41t2rAK5LIWvijIp5s5FdKi9j6KvlUsVbYECnQpTwmA59o6fZUHArPZtJptfwXv8IboT68Bk6xPgRXClg4cALLvZiEjIVKDraiXBo2PB6qR9xmG1z59kMr7PQGMpYPup7MFCcocqRB91y7mUA1VVYLOVyDypuPCBrS1EmYwam47OiFL2zZSPoG4Y+BVWFOg7xA6hYTYKKlJOU66oJZ0rr/rtTS0CHgpReuxs/jmVQCPywI0JxztlC34SDKZapGgWN02H+RaB963ffxHreDzGzwteC3bNtBSTvZZOgkIehjzxkLBqRH5y7WIswWqmmPD/FNIfnFsUMS7bDYKRxBgSqFEVwKOm5T5i/WKELROxl/W7R06RW+g+KJXZnTIYdNVzqh9ONBprjVUEqVj0zPQd1660TIZB7GIaXkAv9+2+mADy3Y2gcgoVTp6E0dCCgOg5g1pe8WH4wbQNkLQHhHjMEpJ8DBY0RvjK8osg27HvduACCYjNcH0zJi90W1Ayd7DyVkbGtzAiswwAsfBeHELCchhnqM+OuRqkIXoD2noEL8LxvvY3GPCTh2B2yYnq7sx3ITH75bo84t/v210uVl2ybBf5wBfhDNAvrpqXeUUN70O1Gwt0w8OnAOhIUa8ShCiwio7dZXW/X/YsuUOVNDlVevA1uBCp+4Qz5HPd1NlyamucCrA53KDykgcXu5Rc+c3VI9g5KymhspE3m//UR2FptBumw+3mV5j0M+KlGHBHZ+ikM7/dj32sMP7EYKBcFqsUP2YCFncu681igWLQcTx8KWUZPzE62awNtLcru6bEDLfrQvJ+m8CpQ3X4q3tzD0PqogXYt5XjFB1cmYPXIvPtvKCw9k+onCBopfWT8ZkjksLzV+aYadqSk9KgsX3gx/k2/pD/LpPs8LgMr/QUZXfprJ2Bh3sK+123P6/JWIVWK0utgzg2ozPkhNL6UgWVemjemAJU8VwT7XjcMHQ8h8eNqqFEIlaKeyB9ngb0FD/ByyN1baXm9fgh9A3ltd26FRWysnVqcHWJW/OR9kNJ/GoLU4vBcBilGzGBil8/iAhkFpEMpIPXhrLBMsbJBzBhqKLAmcjN17HsNXXpHjdu8+mwl9P9apk9eKRR+0p9szvU6HlnK2G1xGVi9vXqvoUZk4oUA140w8KW2B2hGARfWDThYP++x1tckmNjNo9dK/ONWKdN3UeKa+fTxRtecC+pXbZkPcH0PqsPU5GdX5v8DZakMZgg0cZrkXYfC4Yf7bkkn/x3idMf775eAigBEXGFYcgo3U79EQtXQ7cSCKXX6CxIMunoo3KUOPVwtaXIZWH3qfi5Yu4YakQk/go3A51XafUi4U+pTQweWGSpIZWD1pwtVrwtS+iUT1ko8/nFVJaKtZKENNQyFMnF/6l7Ye2wrCIc62GukDKz+drSR0l8z6TG4s5yIPXbew9BIXXqKI7oYbgOCvsbeepl7vWneY/JfDMqH4bhEMRj2hAXjZxCsp8vAcl5J/34NuK4av1OsTpjPte+GQa5jqNG/ErvuUjDhVbmY6bqQ6cgFU6ZLRUyzEdRnbFIeKANroB1vloAiH31VAlEsAbVsd6T0/bZw8tQoJ1Qhvy8m99ysPZxs2d8mVujnZWB5XmO/D7kEREONyEcPyMkTTsEuFX+ERir2boRdZSGDUrVCPqAPZYMFCNbX84Yluy+qe7MMrD70XdasxlCDAtVrJv4vWP+sgadkDIsElzI9uN0gIdfYPNGlXOnFmMsljdFeLNAHmxorE/v33bv7oqalaK4/rWhL2k8DeThFEcaf1ZKJ0+HY4wegXOS5YAuI31zx5OJI8cib9L5UImpojgdS2QHfS0DFrFA4GKxrrEjs3/9fuy8e9DktdbFaQgz4AeUCvD2g5nOuO6VrJv0fDItL4E4JogjVsOUScm7BYMfEB93FC+b/oIuFTEiAcMYx+wsGahvDyVjnq4nmfReDUn1RH6pGKlayPBQW4hUYO0qamV0z8WpYMV0KhUH0tY4Q+ZfSG/AZnBUmTuDTiFsVNcFgbWPIjna8YLfun1H38uvHgVLdnvJN5rbdF9OJQrxbn5RJf1Yw1IDqzZVPfhEbiP5aN1BLUkG9F0MNBQt+UiBxj71rhdCaHno07QoLt1YIgGA7M9BbGC1zM5Bk+4GnwUIt3XNxw69cKixnPmyHNk121Yvcji9TrMIiEEtA6HAqDV4z8U5I6T+hzmyD3GW9Hx5vCDIGAzZzrIn5/eFwhxITVlVdKFBVF7Q7W59IdLSev/viprF7vt74S4JqEtsFlKWDijUpU6z8vo+eS0sZamyBlN7aBEONejXUsGCoYQDjvVvT8GNAZGaEXoqVUvTLH8VS/snCnmvVDQFa/tjR1sdsO3AdwHS/Wz0LgAptnTmJZkGZaq7ZysDyvsxCHxtwLdoxCiPMn2AgewQc2mb2eJMJWAQV0xHzlXZpkA4YWCiNQ5kdCtQ0WuCf4NmscwOmsd/f8/VBD2u3gDKduUmCmahTpm4rAytTrxQyLWW/uGUoKNejMNQ4CTr13cFF8GggenDgpVY89wLr6BHgsQ7DOjidTff5dbI0DnlhAEqSHdjNNh5fiw3Llu75+pC/IB0q2aqoAHcE3XkovZblp881yVJW+VKuPWDcKV36QqU0qJT+dPiN6AIXX7cGHPA4G7COGiF1AFaffDfQsw55KMsCoBok2bqfT7sTz7l+zzcGbdNHc+uVZzZh8jGZwOtzKAOrz12Wpxu8LgkWbr0XUvopEKimGWp4gEUJmAGZl2L1DVgsAYAKhAO19ZJs3o9j+Zkkg8v3XFL/rLaM9frwmbZulj6AppaBNYDOG/CtpApcAmJYuPUnMNS4SNr2gmO2HP/0TDdgMjEBRmDxkjLvOVEs3pWA92hQqDpJtuxrR7k/hl/AFS9f3PQirolAZCBvI9XURxP7/1MGVv/7Lj93upJqLWzh1qWQ0s/pcqdECT6umKGQxwAV05R5j9L8C8A6vMehUAFlBcNhq7oGgNp/wLKTt8bDVatevbDmNT6TIoOtg15MpvyFMTEPoQysPHTigIugTzG5Gowy9OoXPPEdMPTXwykwAUVqxi2KFUwKMgUWKRYYpWhchn/wGGCxAU5BkLWLeQegrATW8cJWVTUB9Q6YqlsqrI4f/P3iEW+zvpNus8Nb3wAVM6sEA25E9wLKwOreHyU8gycf405pwdavwZ3S7ZIAP5+EOyUbUvoUuFxQxeLY76FSjjj+WC+giK6kFa4IWxVVYMr3vQ5ErgzG965+ceZxyqErhXpjUsEAZTqwDCzTE36JzYxx/tZzYFS2DkpzdMHZiRcF7866L5DjFhJE7IhRx8CNfi135COg7EBFdQig4izvJSwdLU80t/7k1SuOamfTCk2h0ruvDKz0HvHDuRGkLtx2OpistXZlw1C7+T2w3xBWwV9yuKpKhh0xApuIYJ+gZDJgVdUGaMQAQD0HfN2w59Wmnxu5kwOoxaBQEfJbRQtlYBWtq/v4IJdyjbx9b1Pzu3uvxXB4QbCmqT4MnqmiBgYL4Mq4aZ7diQleLPokhKM37P5G453mKTrkzcCyi6OuY5KLFpeBVbSu7seDPLKuCffZw5rfjU6OJ2LjIQyFm2S7E2B7MRBI/OmlbwzdbEpXQPWyjmfyFjL+/4JPu45FLkyEAAAAAElFTkSuQmCC\');\n\t\t\tbackground-size: 24px;\n\t\t\tbackground-repeat: no-repeat;\n\t\t\tbackground-position: left center;\n\t\t\tpadding-left: 36px;\n\t\t\tfont-size: 20px;\n\t\t\tletter-spacing: -0.04rem;\n\t\t\tfont-weight: 400;\n\t\t\tcolor: white;\n\t\t\ttext-decoration: none;\n\t\t}\n\n\t\t.message-container {\n\t\t\tflex-grow: 1;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tmargin: 0 30px;\n\t\t}\n\n\t\t.message {\n\t\t\tfont-weight: 300;\n\t\t\tfont-size: 1.4rem;\n\t\t}\n\n\t\tbody.error .message {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\tbody.error .error-message {\n\t\t\tdisplay: block;\n\t\t}\n\n\t\t.error-message {\n\t\t\tdisplay: none;\n\t\t\tmax-width: 800px;\n\t\t\tfont-weight: 300;\n\t\t\tfont-size: 1.3rem;\n\t\t}\n\n\t\t.error-text {\n\t\t\tcolor: salmon;\n\t\t\tfont-size: 1rem;\n\t\t}\n\n\t\t@font-face {\n\t\t\tfont-family: \'Segoe UI\';\n\t\t\tsrc: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.eot?#iefix") format("embedded-opentype");\n\t\t\tsrc: local("Segoe UI Light"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.woff2") format("woff2"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.svg#web") format("svg");\n\t\t\tfont-weight: 200\n\t\t}\n\n\t\t@font-face {\n\t\t\tfont-family: \'Segoe UI\';\n\t\t\tsrc: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.eot?#iefix") format("embedded-opentype");\n\t\t\tsrc: local("Segoe UI Semilight"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.woff2") format("woff2"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.svg#web") format("svg");\n\t\t\tfont-weight: 300\n\t\t}\n\n\t\t@font-face {\n\t\t\tfont-family: \'Segoe UI\';\n\t\t\tsrc: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.eot?#iefix") format("embedded-opentype");\n\t\t\tsrc: local("Segoe UI"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.woff2") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.svg#web") format("svg");\n\t\t\tfont-weight: 400\n\t\t}\n\n\t\t@font-face {\n\t\t\tfont-family: \'Segoe UI\';\n\t\t\tsrc: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.eot?#iefix") format("embedded-opentype");\n\t\t\tsrc: local("Segoe UI Semibold"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.woff2") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.svg#web") format("svg");\n\t\t\tfont-weight: 600\n\t\t}\n\n\t\t@font-face {\n\t\t\tfont-family: \'Segoe UI\';\n\t\t\tsrc: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.eot?#iefix") format("embedded-opentype");\n\t\t\tsrc: local("Segoe UI Bold"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.woff2") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.svg#web") format("svg");\n\t\t\tfont-weight: 700\n\t\t}\n\t</style>\n</head>\n\n<body>\n\t<a class="branding" href="https://code.visualstudio.com/">\n\t\tVisual Studio Code\n\t</a>\n\t<div class="message-container">\n\t\t<div class="message">\n\t\t\tYou are signed in now and can close this page.\n\t\t</div>\n\t\t<div class="error-message">\n\t\t\tAn error occurred while signing in:\n\t\t\t<div class="error-text"></div>\n\t\t</div>\n\t</div>\n\t<script>\n\t\tvar search = new URLSearchParams(window.location.search);\n\t\tvar error = search.get(\'error\');\n\t\tif (error) {\n\t\t\tconst description = search.get(\'error_description\');\n\t\t\tdocument.querySelector(\'.error-text\')\n\t\t\t\t.textContent = error + \' - \' + description;\n\t\t\tdocument.querySelector(\'body\')\n\t\t\t\t.classList.add(\'error\');\n\t\t}\n\t<\/script>\n</body>\n\n</html>\n'},269:(e,t,n)=>{"use strict";function r(e,t){return e||t}function i(e,t){return e[t]}n.d(t,{$8:()=>le,$PY:()=>B,$XS:()=>V,AHH:()=>hn,Cv9:()=>Zt,DA8:()=>wt,EHq:()=>Bt,Edw:()=>N,EtT:()=>j,FJj:()=>Qt,GuU:()=>Ke,Gvm:()=>F,HzD:()=>tn,Iuo:()=>St,JKf:()=>ct,KTd:()=>Pt,KVm:()=>Et,KgX:()=>U,KhI:()=>Y,Lln:()=>ut,Lmq:()=>$,Lok:()=>ht,N6t:()=>ye,Nq2:()=>kt,O9V:()=>L,P0f:()=>De,QdQ:()=>jt,R3R:()=>Yt,SZ2:()=>M,Tnt:()=>q,UUD:()=>Jt,UxO:()=>te,Vdv:()=>et,W$7:()=>_t,WSA:()=>Ae,Wtk:()=>Je,Y0g:()=>pt,YEm:()=>Ze,Yny:()=>At,ZHX:()=>ve,ZWZ:()=>Ue,aqQ:()=>Dt,b07:()=>D,bJ7:()=>z,cGk:()=>me,cyL:()=>H,dRz:()=>ln,eCG:()=>mt,f0d:()=>xt,fn0:()=>Ce,gBW:()=>P,hKY:()=>xe,hXl:()=>x,isD:()=>ne,jjc:()=>gt,jsL:()=>we,kgX:()=>W,mS$:()=>Ye,mmD:()=>ue,nRs:()=>Ve,oJg:()=>ae,rDm:()=>Ct,raO:()=>re,sSX:()=>Rt,tGl:()=>nn,twz:()=>it,v0u:()=>X,vE3:()=>ge,vF1:()=>ie,vKV:()=>dn,w3n:()=>rt,w9M:()=>nt,woc:()=>K,xZI:()=>yt,zS2:()=>Qe,zav:()=>J,zkX:()=>tt,zkd:()=>de,zwS:()=>Wt,zzB:()=>G});var o,s=void 0,a=null,c="",u="function",l="object",d="prototype",h="__proto__",f="undefined",p="constructor",g="Symbol",m="_polyfill",v="length",y="name",w="call",I="toString",A=r(Object),S=i(A,d),C=r(String),_=i(C,d),E=r(Math),T=r(Array),b=i(T,d),k=i(b,"slice");function P(e,t){try{return{v:e.apply(this,t)}}catch(e){return{e}}}function R(e){return function(t){return typeof t===e}}function O(e){var t="[object "+e+"]";return function(e){return!(!e||M(e)!==t)}}function M(e){return S[I].call(e)}function N(e,t){return typeof e===t}function D(e){return typeof e===f||e===f}function x(e){return e===a||D(e)}function L(e){return!!e||e!==s}var U=R("string"),q=R(u);function F(e){return!(!e&&x(e)||!e||typeof e!==l)}var H=i(T,"isArray"),B=O("Date"),j=R("number"),$=R("boolean"),z=O("Error");function V(e){return!!(e&&e.then&&q(e.then))}function K(e){return!e||!G(e)}function G(e){return!(!e||(t=function(){return!(e&&0+e)},n=!e,r=P(t),r.e?n:r.v));var t,n,r}var W=i(A,"getOwnPropertyDescriptor");function X(e,t){return!!e&&S.hasOwnProperty[w](e,t)}var Y=r(i(A,"hasOwn"),Q);function Q(e,t){return X(e,t)||!!W(e,t)}function J(e,t,n){if(e&&F(e))for(var r in e)if(Y(e,r)&&-1===t[w](n||e,r,e[r]))break}var Z={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function ee(e){var t={};if(t[Z.c]=!0,t[Z.e]=!0,e.l){t.get=function(){return e.l.v};var n=W(e.l,"v");n&&n.set&&(t.set=function(t){e.l.v=t})}return J(e,function(e,n){t[Z[e]]=L(n)?n:t[Z[e]]}),t}var te=i(A,"defineProperty"),ne=i(A,"defineProperties");function re(e,t,n,r,i,o){var s={e:o,c:i};return n&&(s.g=n),r&&(s.s=r),te(e,t,ee(s))}function ie(e,t,n){return te(e,t,ee(n))}function oe(e,t,n,r,i){var o={};return J(e,function(e,r){se(o,e,t?r:e,i),se(o,r,n?r:e,i)}),r?r(o):o}function se(e,t,n,r){te(e,t,{value:n,enumerable:!0,writable:!!r})}var ae=r(C),ce="[object Error]";function ue(e,t){var n=c,r=S[I][w](e);r===ce&&(e={stack:ae(e.stack),message:ae(e.message),name:ae(e.name)});try{n=((n=JSON.stringify(e,a,t?"number"==typeof t?t:4:s))?n.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):a)||ae(e)}catch(e){n=" - "+ue(e,t)}return r+": "+n}function le(e){throw new Error(e)}function de(e){throw new TypeError(e)}var he=i(A,"freeze");function fe(e){return e}function pe(e){return e[h]||a}var ge=i(A,"assign"),me=i(A,"keys");function ve(e){return he&&J(e,function(e,t){(H(t)||F(t))&&ve(t)}),ye(e)}var ye=r(he,fe),we=r(i(A,"seal"),fe),Ie=r(i(A,"getPrototypeOf"),pe);function Ae(e){return oe(e,1,0,ye)}function Se(e){return oe(e,0,0,ye)}function Ce(e){return function(e){var t={};return J(e,function(e,n){se(t,e,n[1]),se(t,n[0],n[1])}),ye(t)}(e)}var _e,Ee=Se({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Te="__tsUtils$gblCfg";function be(){var e;return typeof globalThis!==f&&(e=globalThis),e||typeof self===f||(e=self),e||typeof window===f||(e=window),e||typeof global===f||(e=global),e}function ke(){if(!_e){var e=P(be).v||{};_e=e[Te]=e[Te]||{}}return _e}var Pe=Re;function Re(e,t,n){var r=t?t[e]:a;return function(t){var i=(t?t[e]:a)||r;if(i||n){var o=arguments;return(i||n).apply(t,i?k[w](o,1):o)}de('"'+ae(e)+'" not defined for '+ue(t))}}function Oe(e){return function(t){return t[e]}}var Me=i(E,"max"),Ne=Pe("slice",_),De=Pe("substring",_),xe=Re("substr",_,Le);function Le(e,t,n){return x(e)&&de("Invalid "+ue(e)),n<0?c:((t=t||0)<0&&(t=Me(t+e[v],0)),D(n)?Ne(e,t):Ne(e,t,t+n))}function Ue(e,t){return De(e,0,t)}var qe,Fe,He,Be="_urid";function je(e){var t={description:ae(e),toString:function(){return g+"("+e+")"}};return t[m]=!0,t}function $e(e){var t=function(){if(!qe){var e=ke();qe=e.gblSym=e.gblSym||{k:{},s:{}}}return qe}();if(!Y(t.k,e)){var n=je(e),r=me(t.s).length;n[Be]=function(){return r+"_"+n[I]()},t.k[e]=n,t.s[n[Be]()]=ae(e)}return t.k[e]}function ze(){He=ke()}function Ve(e){var t={};return!He&&ze(),t.b=He.lzy,te(t,"v",{configurable:!0,get:function(){var n=e();return He.lzy||te(t,"v",{value:n}),t.b=He.lzy,n}}),t}function Ke(e){return te({toJSON:function(){return e}},"v",{value:e})}var Ge,We="window";function Xe(e,t){var n;return function(){return!He&&ze(),n&&!He.lzy||(n=Ke(P(e,t).v)),n.v}}function Ye(e){return!He&&ze(),Ge&&!1!==e&&!He.lzy||(Ge=Ke(P(be).v||a)),Ge.v}function Qe(e,t){var n;if((n=Ge&&!1!==t?Ge.v:Ye(t))&&n[e])return n[e];if(e===We)try{return window}catch(e){}return a}function Je(){return!!Ze()}var Ze=Xe(Qe,["document"]);function et(){return!!tt()}var tt=Xe(Qe,[We]);function nt(){return!!rt()}var rt=Xe(Qe,["navigator"]);function it(){return!!ct()}var ot,st,at,ct=Xe(Qe,["history"]),ut=Xe(function(){return!!P(function(){return process&&(process.versions||{}).node}).v});function lt(){return ot=Ke(P(Qe,[g]).v)}function dt(e){var t=(He.lzy?0:ot)||lt();return t.v?t.v[e]:s}function ht(){return!!ft()}function ft(){return!He&&ze(),((He.lzy?0:ot)||lt()).v}function pt(e,t){var n=Ee[e];!He&&ze();var r=(He.lzy?0:ot)||lt();return r.v?r.v[n||e]:t?s:function(e){var t;!Fe&&(Fe={});var n=Ee[e];return n&&(t=Fe[n]=Fe[n]||je(g+"."+n)),t}(e)}function gt(e,t){!He&&ze();var n=(He.lzy?0:ot)||lt();return n.v?n.v(e):t?a:je(e)}function mt(e){return!He&&ze(),((st=(He.lzy?0:st)||Ke(P(dt,["for"]).v)).v||$e)(e)}function vt(e){return!!e&&q(e.next)}function yt(e){return!function(e){return e===a||!L(e)}(e)&&q(e[pt(3)])}function wt(e,t,n){if(e&&(vt(e)||(!at&&(at=Ke(pt(3))),e=e[at.v]?e[at.v]():a),vt(e))){var r=s,i=s;try{for(var o=0;!(i=e.next()).done&&-1!==t[w](n||e,i.value,o,e);)o++}catch(t){r={e:t},e.throw&&(i=a,e.throw(r))}finally{try{i&&!i.done&&e.return&&e.return(i)}finally{if(r)throw r.e}}}}function It(e,t,n){return e.apply(t,n)}function At(e,t){return!D(t)&&e&&(H(t)?It(e.push,e,t):vt(t)||yt(t)?wt(t,function(t){e.push(t)}):e.push(t)),e}function St(e,t,n){if(e)for(var r=e[v]>>>0,i=0;i<r&&(!(i in e)||-1!==t[w](n||e,e[i],i,e));i++);}var Ct=Pe("indexOf",b),_t=Pe("map",b);function Et(e,t,n){return((e?e.slice:a)||k).apply(e,k[w](arguments,1))}function Tt(e,t,n){return-1!==Ct(e,t,n)}var bt,kt=Re("includes",b,Tt),Pt=Pe("reduce",b),Rt=r(i(A,"create"),Ot);function Ot(e){if(!e)return{};var t=typeof e;function n(){}return t!==l&&t!==u&&de("Prototype must be an Object or function: "+ue(e)),n[d]=e,new n}function Mt(e,t){return(A.setPrototypeOf||function(e,t){var n;!bt&&(bt=Ke(((n={})[h]=[],n instanceof Array))),bt.v?e[h]=t:J(t,function(t,n){return e[t]=n})})(e,t)}function Nt(e,t){t&&(e[y]=t)}function Dt(e,t,n){var r=n||Error,i=r[d][y],o=Error.captureStackTrace;return function(e,t,n){function r(){this[p]=t,P(ie,[this,y,{v:e,c:!0,e:!1}])}return P(ie,[t,y,{v:e,c:!0,e:!1}]),(t=Mt(t,n))[d]=n===a?Rt(n):(r[d]=n[d],new r),t}(e,function(){var n=this,s=arguments;try{P(Nt,[r,e]);var a=It(r,n,k[w](s))||n;if(a!==n){var c=Ie(n);c!==Ie(a)&&Mt(a,c)}return o&&o(a,n[p]),t&&t(a,s),a}finally{P(Nt,[r,i])}},r)}function xt(){return(Date.now||Lt)()}function Lt(){return(new Date).getTime()}function Ut(e){return function(t){return x(t)&&de("strTrim called ["+ue(t)+"]"),t&&t.replace&&(t=t.replace(e,c)),t}}var qt,Ft,Ht,Bt=Re("trim",_,Ut(/^\s+|(?=\s)\s+$/g));function jt(e){if(!e||typeof e!==l)return!1;Ht||(Ht=!et()||tt());var t=!1;if(e!==Ht){Ft||(qt=Function[d][I],Ft=qt[w](A));try{var n=Ie(e);(t=!n)||(X(n,p)&&(n=n[p]),t=!(!n||typeof n!==u||qt[w](n)!==Ft))}catch(e){}}return t}function $t(e){return e.value&&Gt(e),!0}var zt=[function(e){var t=e.value;if(H(t)){var n=e.result=[];return n.length=t.length,e.copyTo(n,t),!0}return!1},Gt,function(e){return e.type===u},function(e){var t=e.value;return!!B(t)&&(e.result=new Date(t.getTime()),!0)}];function Vt(e,t,n,r){var i=n.handler,s=n.path?r?n.path.concat(r):n.path:[],c={handler:n.handler,src:n.src,path:s},u=typeof t,d=!1,h=t===a;h||(t&&u===l?d=jt(t):h=function(e){return!o&&(o=["string","number","boolean",f,"symbol","bigint"]),!(e===l||-1===o.indexOf(e))}(u));var p={type:u,isPrim:h,isPlain:d,value:t,result:t,path:s,origin:n.src,copy:function(t,r){return Vt(e,t,r?c:n,r)},copyTo:function(t,n){return Kt(e,t,n,c)}};return p.isPrim?i&&i[w](n,p)?p.result:t:function(e,t){var r;return St(e,function(e){if(e.k===t)return r=e,-1}),r||(r={k:t,v:t},e.push(r),function(e){ie(p,"result",{g:function(){return e.v},s:function(t){e.v=t}});for(var t=0,r=i;!(r||(t<zt.length?zt[t++]:$t))[w](n,p);)r=a}(r)),r.v}(e,t)}function Kt(e,t,n,r){if(!x(n))for(var i in n)t[i]=Vt(e,n[i],r,i);return t}function Gt(e){var t=e.value;if(t&&e.isPlain){var n=e.result={};return e.copyTo(n,t),!0}return!1}function Wt(e,t,n,r,i,o,s){return function(e,t){return St(t,function(t){!function(e,t){Kt([],e,t,{handler:void 0,src:t,path:[]})}(e,t)}),e}(Vt([],a=e,{handler:undefined,src:a})||{},k[w](arguments));var a}var Xt,Yt=Oe(v);function Qt(){return!He&&ze(),Xt&&!He.lzy||(Xt=Ke(P(Qe,["performance"]).v)),Xt.v}function Jt(){var e=Qt();return e&&e.now?e.now():xt()}ht();var Zt=Re("endsWith",_,en);function en(e,t,n){U(e)||de("'"+ue(e)+"' is not a string");var r=U(t)?t:ae(t),i=!D(n)&&n<e[v]?n:e[v];return De(e,i-r[v],i)===r}var tn=Pe("indexOf",_),nn=Re("startsWith",_,rn);function rn(e,t,n){U(e)||de("'"+ue(e)+"' is not a string");var r=U(t)?t:ae(t),i=n>0?n:0;return De(e,i,i+r[v])===r}var on="ref",sn="unref",an="hasRef",cn="enabled";function un(e,t,n){var r=H(t),i=r?t.length:0,o=(i>0?t[0]:r?s:t)||setTimeout,c=(i>1?t[1]:s)||clearTimeout,u=n[0];n[0]=function(){l.dn(),It(u,s,k[w](arguments))};var l=function(e,t,n){var r,i=!0,o=e?t(a):a;function s(){return i=!1,o&&o[sn]&&o[sn](),r}function c(){o&&n(o),o=a}function u(){return o=t(o),i||s(),r}return(r={cancel:c,refresh:u})[an]=function(){return o&&o[an]?o[an]():i},r[on]=function(){return i=!0,o&&o[on]&&o[on](),r},r[sn]=s,{h:r=te(r,cn,{get:function(){return!!o},set:function(e){!e&&o&&c(),e&&!o&&u()}}),dn:function(){o=a}}}(e,function(e){if(e){if(e.refresh)return e.refresh(),e;It(c,s,[e])}return It(o,s,n)},function(e){It(c,s,[e])});return l.h}function ln(e,t){return un(!0,s,k[w](arguments))}function dn(e,t,n){return un(!0,e,k[w](arguments,1))}function hn(e,t){return un(!1,s,k[w](arguments))}},270:(e,t,n)=>{const r=n(3908),i=n(8311);e.exports=(e,t,n)=>{let o=null,s=null,a=null;try{a=new i(t,n)}catch(e){return null}return e.forEach(e=>{a.test(e)&&(o&&1!==s.compare(e)||(o=e,s=new r(o,n)))}),o}},380:(e,t,n)=>{"use strict";n.d(t,{Cr:()=>u,Xc:()=>d,pI:()=>l,u7:()=>h});var r=n(269),i=n(6182),o=n(4276),s=n(6492),a=n(1864),c=(0,o.T)("plugin");function u(e){return c.get(e,"state",{},!0)}function l(e,t){for(var n,o=[],a=null,c=e[i.uR]();c;){var l=c[i.AP]();if(l){a&&a[i.YH]&&l[s.qT]&&a[i.YH](l);var d=!!(n=u(l))[i.tZ];l[i.tZ]&&(d=l[i.tZ]()),d||o[i.y5](l),a=l,c=c[i.uR]()}}(0,r.Iuo)(o,function(r){var o=e[s.eT]();r[i.mE](e.getCfg(),o,t,e[i.uR]()),n=u(r),r[s.eT]||n[s.eT]||(n[s.eT]=o),n[i.tZ]=!0,delete n[i.Ik]})}function d(e){return e.sort(function(e,t){var n=0;if(t){var r=t[s.qT];e[s.qT]?n=r?e[s.Vo]-t[s.Vo]:1:r&&(n=-1)}else n=e?1:-1;return n})}function h(e){var t={};return{getName:function(){return t[i.RS]},setName:function(n){e&&e.setName(n),t[i.RS]=n},getTraceId:function(){return t[i.P5]},setTraceId:function(n){e&&e.setTraceId(n),(0,a.hX)(n)&&(t[i.P5]=n)},getSpanId:function(){return t[i.wi]},setSpanId:function(n){e&&e.setSpanId(n),(0,a.wN)(n)&&(t[i.wi]=n)},getTraceFlags:function(){return t[i.Rr]},setTraceFlags:function(n){e&&e.setTraceFlags(n),t[i.Rr]=n}}}},560:(e,t,n)=>{const r=n(3908);e.exports=(e,t,n)=>new r(e,n).compare(new r(t,n))},583:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UriHandlerLoopbackClient=void 0;const r=n(1398),i=n(1619),o=n(8016);t.UriHandlerLoopbackClient=class{_uriHandler;_redirectUri;_logger;_responseDeferred;constructor(e,t,n){this._uriHandler=e,this._redirectUri=t,this._logger=n}async listenForAuthCode(){await(this._responseDeferred?.cancel()),this._responseDeferred=new i.DeferredPromise;const e=await this._responseDeferred.p;if(this._responseDeferred=void 0,e)return e;throw new Error("No valid response received for authorization code.")}getRedirectUri(){return this._redirectUri}closeServer(){}async openBrowser(e){const t=await r.env.asExternalUri(r.Uri.parse(`${r.env.uriScheme}://vscode.microsoft-authentication`));(0,o.isSupportedClient)(t)?this._getCodeResponseFromUriHandler():this._getCodeResponseFromQuickPick();const n=r.Uri.parse(e+`&state=${encodeURI(t.toString(!0))}`);await r.env.openExternal(n)}async _getCodeResponseFromUriHandler(){if(!this._responseDeferred)throw new Error("No listener for auth code");const e=await(0,i.toPromise)(this._uriHandler.event);this._logger.debug(`Received URL event. Authority: ${e.authority}`);const t=new URL(e.toString(!0));this._responseDeferred?.complete({code:t.searchParams.get("code")??void 0,state:t.searchParams.get("state")??void 0,error:t.searchParams.get("error")??void 0,error_description:t.searchParams.get("error_description")??void 0,error_uri:t.searchParams.get("error_uri")??void 0})}async _getCodeResponseFromQuickPick(){if(!this._responseDeferred)throw new Error("No listener for auth code");const e=r.window.createInputBox();e.ignoreFocusOut=!0,e.title=r.l10n.t("Microsoft Authentication"),e.prompt=r.l10n.t("Provide the authorization code to complete the sign in flow."),e.placeholder=r.l10n.t("Paste authorization code here..."),e.show();const t=await new Promise(t=>{let n;const i=r.Disposable.from(e,e.onDidAccept(async()=>{if(!e.value)return void(e.validationMessage=r.l10n.t("Authorization code is required."));const i=e.value;n=i,t(i),e.hide()}),e.onDidChangeValue(()=>{e.validationMessage=void 0}),e.onDidHide(()=>{i.dispose(),n||t(void 0)}));Promise.allSettled([this._responseDeferred?.p]).then(()=>i.dispose())});if(!this._responseDeferred.isSettled)return t?(this._logger.debug("Received auth code from quick pick"),void this._responseDeferred.complete({code:t,state:void 0,error:void 0,error_description:void 0,error_uri:void 0})):void this._responseDeferred.complete({code:void 0,state:void 0,error:"User cancelled",error_description:"User cancelled",error_uri:void 0})}}},622:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(6982))&&r.__esModule?r:{default:r};t.default=function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i.default.createHash("sha1").update(e).digest()}},659:(e,t,n)=>{"use strict";n.d(t,{Im:()=>s,qU:()=>c,vz:()=>u});var r=n(269),i=n(5664),o=(((0,r.mS$)()||{}).Symbol,((0,r.mS$)()||{}).Reflect,"hasOwnProperty"),s=r.vE3||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])i.Wy[o].call(t,s)&&(e[s]=t[s]);return e},a=function(e,t){return a=i.s6.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[o](n)&&(e[n]=t[n])},a(e,t)};function c(e,t){function n(){this.constructor=e}typeof t!==i.hW&&null!==t&&(0,r.zkd)("Class extends value "+String(t)+" is not a constructor or null"),a(e,t),e[i.vR]=null===t?(0,r.sSX)(t):(n[i.vR]=t[i.vR],new n)}function u(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}},740:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AnalyticsPluginIdentifier:()=>H,BreezeChannelIdentifier:()=>F,ConfigurationManager:()=>E,ConnectionStringParser:()=>h.F,ContextTagKeys:()=>T.o,CtxTagKeys:()=>R.O,DEFAULT_BREEZE_ENDPOINT:()=>p._G,DEFAULT_BREEZE_PATH:()=>p.wc,Data:()=>C.B,DisabledPropertyName:()=>p.xF,DistributedTracingModes:()=>O.uG,Envelope:()=>g.L,Event:()=>m.J,EventPersistence:()=>O.iD,Exception:()=>v.WJ,Extensions:()=>R.F,HttpMethod:()=>p.ym,Metric:()=>y.J,PageView:()=>w.h,PageViewPerformance:()=>S.H,ProcessLegacy:()=>p.jp,PropertiesPluginIdentifier:()=>q,RemoteDependencyData:()=>I.A,RequestHeaders:()=>f.a,SampleRate:()=>p.tU,SeverityLevel:()=>_.O,TelemetryItemCreator:()=>P,ThrottleMgr:()=>d,Trace:()=>A.C,correlationIdCanIncludeCorrelationHeader:()=>r.Rs,correlationIdGetCorrelationContext:()=>r.pg,correlationIdGetCorrelationContextValue:()=>r.mD,correlationIdGetPrefix:()=>r.mp,correlationIdSetPrefix:()=>r.Wt,createDistributedTraceContextFromTrace:()=>r.Ft,createDomEvent:()=>x,createOfflineListener:()=>U.G,createTelemetryItem:()=>k,createTraceParent:()=>D.wk,dataSanitizeException:()=>b.Vt,dataSanitizeId:()=>b.HQ,dataSanitizeInput:()=>b._T,dataSanitizeKey:()=>b.lq,dataSanitizeKeyAndAddUniqueness:()=>b.zx,dataSanitizeMeasurements:()=>b.Vj,dataSanitizeMessage:()=>b.Vk,dataSanitizeProperties:()=>b.xP,dataSanitizeString:()=>b.Rr,dataSanitizeUrl:()=>b.pJ,dateTimeUtilsDuration:()=>r.jj,dateTimeUtilsNow:()=>r.lt,dsPadNumber:()=>b.qW,findAllScripts:()=>D.V5,findW3cTraceParent:()=>D.ef,formatTraceParent:()=>D.L0,getExtensionByName:()=>M.Y8,isBeaconApiSupported:()=>N.Uf,isCrossOriginError:()=>M.vv,isInternalApplicationInsightsEndpoint:()=>r.Qu,isSampledFlag:()=>D.N7,isValidSpanId:()=>D.wN,isValidTraceId:()=>D.hX,isValidTraceParent:()=>D.mJ,msToTimeSpan:()=>M.bb,parseConnectionString:()=>h.H,parseTraceParent:()=>D.ZI,strNotSpecified:()=>p.R2,stringToBoolOrDefault:()=>M.Dt,urlGetAbsoluteUrl:()=>L.wX,urlGetCompleteUrl:()=>L.k6,urlGetPathName:()=>L.Gz,urlParseFullHost:()=>L.M0,urlParseHost:()=>L.PS,urlParseUrl:()=>L.cM,utlCanUseLocalStorage:()=>u.BW,utlCanUseSessionStorage:()=>u.AN,utlDisableStorage:()=>u.Nu,utlEnableStorage:()=>u.iw,utlGetLocalStorage:()=>u.Se,utlGetSessionStorage:()=>u.vH,utlGetSessionStorageKeys:()=>u.T9,utlRemoveSessionStorage:()=>u.v7,utlRemoveStorage:()=>u.tm,utlSetLocalStorage:()=>u._M,utlSetSessionStorage:()=>u.Dt,utlSetStoragePrefix:()=>u.vh});var r=n(2318),i=n(269),o=n(3775),s=n(3673),a=n(9749),c=n(6535),u=n(4658),l=n(5130),d=function(e,t){var n,r,d,h,f,p,g,m=this,v=!1,y=!1;function w(e,t,i,o){if(v){var s=function(e){try{var t=I(e);return(0,c.Z1)(1e6)<=t.limit.samplingRate}catch(e){}return!1}(e);if(!s)return;var a=I(e),u=k(e),d=S(a,n,u),h=!1,p=0,g=P(e);try{d&&!g?(p=Math.min(a.limit.maxSendNumber,u[l.F2]+1),u[l.F2]=0,h=!0,f[e]=!0,u[l.Jm]=new Date):(f[e]=d,u[l.F2]+=1);var m=C(e);E(r,m,u);for(var y=0;y<p;y++)b(e,r,t,i)}catch(e){}return{isThrottled:h,throttleNum:p}}return o&&R(e)[l.y5]({msgID:e,message:t,severity:i}),null}function I(e){return d[e]||d[109]}function A(e,t){var n,r,o,s,a;try{var c=t||{},u={};u[l.Cx]=!!c[l.Cx];var h=c[l.zw]||{};y=(null==h?void 0:h.daysOfMonth)&&(null==h?void 0:h.daysOfMonth[l.oI])>0,u[l.zw]=(s=null===(o=(o=h)||{})||void 0===o?void 0:o.monthInterval,a=null==o?void 0:o.dayInterval,(0,i.hXl)(s)&&(0,i.hXl)(a)&&(o.monthInterval=3,y||(o[l.i9]=[28],y=!0)),o={monthInterval:null==o?void 0:o.monthInterval,dayInterval:null==o?void 0:o.dayInterval,daysOfMonth:null==o?void 0:o.daysOfMonth});var f={samplingRate:(null===(n=c.limit)||void 0===n?void 0:n.samplingRate)||100,maxSendNumber:(null===(r=c.limit)||void 0===r?void 0:r.maxSendNumber)||1};u.limit=f,d[e]=u}catch(e){}}function S(e,t,n){if(e&&!e[l.Cx]&&t&&(0,s.Gh)(n)){var r=_(),o=n[l.C9],a=e[l.zw],c=1;if(null==a?void 0:a.monthInterval){var u=12*(r.getUTCFullYear()-o.getUTCFullYear())+r.getUTCMonth()-o.getUTCMonth();c=T(a.monthInterval,0,u)}var d=1;if(y)d=(0,i.rDm)(a[l.i9],r[l.$e]());else if(null==a?void 0:a.dayInterval){var h=Math.floor((r.getTime()-o.getTime())/864e5);d=T(a.dayInterval,0,h)}return c>=0&&d>=0}return!1}function C(e,t){var n=(0,s.Gh)(t)?t:"";return e?"appInsightsThrottle"+n+"-"+e:null}function _(e){try{if(!e)return new Date;var t=new Date(e);if(!isNaN(t.getDate()))return t}catch(e){}return null}function E(e,t,n){try{return(0,u._M)(e,t,(0,i.EHq)(JSON[l.Jj](n)))}catch(e){}return!1}function T(e,t,n){return e<=0?1:n>=t&&(n-t)%e==0?Math.floor((n-t)/e)+1:-1}function b(e,t,n,r){(0,o.ZP)(t,r||1,e,n)}function k(e){try{var t=h[e];if(!t){var n=C(e,p);t=function(e,t,n){try{var r={date:_(),count:0};if(e){var i=JSON.parse(e);return{date:_(i[l.C9])||r[l.C9],count:i[l.F2]||r[l.F2],preTriggerDate:i.preTriggerDate?_(i[l.Jm]):void 0}}return E(t,n,r),r}catch(e){}return null}((0,u.Se)(r,n),r,n),h[e]=t}return h[e]}catch(e){}return null}function P(e){var t=f[e];if((0,i.hXl)(t)){t=!1;var n=k(e);n&&(t=function(e){try{if(e){var t=new Date;return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e[l.$e]()===t[l.$e]()}}catch(e){}return!1}(n[l.Jm])),f[e]=t}return f[e]}function R(e){return g=g||{},(0,i.hXl)(g[e])&&(g[e]=[]),g[e]}r=(0,o.y0)(e),f={},h={},g={},d={},A(109),p=(0,s.Gh)(t)?t:"",e.addUnloadHook((0,a.a)(e.config,function(e){var t=e.cfg;n=(0,u.BW)();var r=t.throttleMgrCfg||{};(0,i.zav)(r,function(e,t){A(parseInt(e),t)})})),m._getDbgPlgTargets=function(){return[g]},m.getConfig=function(){return d},m.canThrottle=function(e){var t=k(e);return S(I(e),n,t)},m.isTriggered=function(e){return P(e)},m.isReady=function(){return v},m.flush=function(e){try{var t=R(e);if(t&&t[l.oI]>0){var n=t.slice(0);return g[e]=[],(0,i.Iuo)(n,function(e){w(e.msgID,e[l.pM],e.severity,!1)}),!0}}catch(e){}return!1},m.flushAll=function(){try{if(g){var e=!0;return(0,i.zav)(g,function(t){var n=m.flush(parseInt(t));e=e&&n}),e}}catch(e){}return!1},m.onReadyState=function(e,t){return void 0===t&&(t=!0),(v=!!(0,i.hXl)(e)||e)&&t?m.flushAll():null},m.sendMessage=function(e,t,n){return w(e,t,n,!0)}},h=n(4484),f=n(2910),p=n(5025),g=n(1062),m=n(3072),v=n(5397),y=n(5014),w=n(1448),I=n(1365),A=n(2445),S=n(4164),C=n(7358),_=n(9762),E=function(){function e(){}return e.getConfig=function(e,t,n,r){var o;return void 0===r&&(r=!1),o=n&&e[l.up]&&e[l.up][n]&&!(0,i.hXl)(e[l.up][n][t])?e[l.up][n][t]:e[t],(0,i.hXl)(o)?r:o},e}(),T=n(8596),b=n(7975);function k(e,t,n,r,o,a){var c;n=(0,b.Rr)(r,n)||p.R2,((0,i.hXl)(e)||(0,i.hXl)(t)||(0,i.hXl)(n))&&(0,i.$8)("Input doesn't contain all required fields");var u="";e[p.ks]&&(u=e[p.ks],delete e[p.ks]);var d=((c={})[l.RS]=n,c.time=(0,s._u)(new Date),c.iKey=u,c.ext=a||{},c.tags=[],c.data={},c.baseType=t,c.baseData=e,c);return(0,i.hXl)(o)||(0,i.zav)(o,function(e,t){d.data[e]=t}),d}var P=function(){function e(){}return e.create=k,e}(),R=n(1575),O=n(7374),M=n(87),N=n(7292),D=n(1864);function x(e){var t=null;if((0,i.Tnt)(Event))t=new Event(e);else{var n=(0,i.YEm)();n&&n.createEvent&&(t=n.createEvent("Event")).initEvent(e,!0,!0)}return t}var L=n(9354),U=n(7952),q="AppInsightsPropertiesPlugin",F="AppInsightsChannelPlugin",H="ApplicationInsightsAnalytics"},836:(e,t,n)=>{"use strict";n.d(t,{P:()=>s});var r=n(269),i=n(6182),o=n(3775);function s(){var e=[];return{add:function(t){t&&e[i.y5](t)},run:function(t,n){(0,r.Iuo)(e,function(e){try{e(t,n)}catch(e){(0,o.ZP)(t[i.e4](),2,73,"Unexpected error calling unload handler - "+(0,r.mmD)(e))}}),e=[]}}}},855:(e,t,n)=>{var r=n(6585);e.exports=function(e,t){var n=t||Math.floor(Date.now()/1e3);if("string"==typeof e){var i=r(e);if(void 0===i)return;return Math.floor(n+i/1e3)}return"number"==typeof e?n+e:void 0}},856:(e,t,n)=>{"use strict";n.d(t,{v:()=>p});var r=n(8279),i=n(8205),o=n(269),s=n(6182),a=n(7847),c=n(3775),u=n(7292),l=n(3673),d="",h="&NoResponseBody=true",f="POST",p=function(){function e(){var t,n,p,g,m,v,y,w,I,A,S,C,_,E,T=0;(0,r.A)(e,this,function(e,r){var b=!0;function k(e,t){(0,c.ZP)(p,2,26,"Failed to send telemetry.",{message:e}),R(t,400,{})}function P(e){k("No endpoint url is provided for the batch",e)}function R(e,t,n,r){try{e&&e(t,n,r)}catch(e){}}function O(e,t){var n=(0,o.w3n)(),r=e[s.Vq];if(!r)return P(t),!0;r=e[s.Vq]+(_?h:d);var i=e[s.Cd],a=g?i:new Blob([i],{type:"text/plain;charset=UTF-8"});return n.sendBeacon(r,a)}function M(e,t,n){var r=e[s.Cd];try{if(r)if(O(e,t))R(t,200,{},d);else{var i=m&&m.beaconOnRetry;i&&(0,o.Tnt)(i)?i(e,t,O):(w&&w[s.L](e,t,!0),(0,c.ZP)(p,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(e){g&&(0,c.OG)(p,"Failed to send telemetry using sendBeacon API. Ex:"+(0,o.mmD)(e)),R(t,g?0:400,{},d)}}function N(e,n,r){var a,c,u,h=e[s.c1]||{};!r&&t&&(a=(0,i.Qo)(function(e,t){c=e,u=t})),g&&r&&e.disableXhrSync&&(r=!1);var p=e[s.Vq];if(!p)return P(n),void(c&&c(!1));var v=(0,l.H$)(f,p,b,!0,r,e[s.do]);function y(t){var r=m&&m.xhrOnComplete;if(r&&(0,o.Tnt)(r))r(t,n,e);else{var i=(0,l.Lo)(t);R(n,t[s.cV],(0,l.w3)(t,g),i)}}return g||v[s.yy]("Content-type","application/json"),(0,o.Iuo)((0,o.cGk)(h),function(e){v[s.yy](e,h[e])}),v.onreadystatechange=function(){g||(y(v),4===v.readyState&&c&&c(!0))},v.onload=function(){g&&y(v)},v.onerror=function(e){R(n,g?v[s.cV]:400,(0,l.w3)(v,g),g?d:(0,l.r4)(v)),u&&u(e)},v.ontimeout=function(){R(n,g?v[s.cV]:500,(0,l.w3)(v,g),g?d:(0,l.r4)(v)),c&&c(!1)},v.send(e[s.Cd]),a}function D(e,n,r){var c,u,l,p,v=e[s.Vq],w=e[s.Cd],I=g?w:new Blob([w],{type:"application/json"}),A=new Headers,S=w[s.oI],C=!1,k=!1,O=e[s.c1]||{},M=((c={method:f,body:I})[a.x]=!0,c);e.headers&&(0,o.cGk)(e.headers)[s.oI]>0&&((0,o.Iuo)((0,o.cGk)(O),function(e){A.append(e,O[e])}),M[s.c1]=A),y?M.credentials=y:b&&g&&(M.credentials="include"),r&&(M.keepalive=!0,T+=S,g?2===e._sendReason&&(C=!0,_&&(v+=h)):C=!0);var N=new Request(v,M);try{N[a.x]=!0}catch(e){}if(!r&&t&&(u=(0,i.Qo)(function(e,t){l=e,p=t})),!v)return P(n),void(l&&l(!1));function D(e){R(n,g?0:400,{},g?d:e)}function x(e,t,r){var i=e[s.cV],a=m.fetchOnComplete;a&&(0,o.Tnt)(a)?a(e,n,r||d,t):R(n,i,{},r||d)}try{(0,i.Dv)(fetch(g?v:N,g?M:null),function(t){if(r&&(T-=S,S=0),!k)if(k=!0,t.rejected)D(t.reason&&t.reason[s.pM]),p&&p(t.reason);else{var n=t[s.pF];try{g||n.ok?g&&!n.body?(x(n,null,d),l&&l(!0)):(0,i.Dv)(n.text(),function(t){x(n,e,t[s.pF]),l&&l(!0)}):(D(n.statusText),l&&l(!1))}catch(e){D((0,o.mmD)(e)),p&&p(e)}}})}catch(e){k||(D((0,o.mmD)(e)),p&&p(e))}return C&&!k&&(k=!0,R(n,200,{}),l&&l(!0)),g&&!k&&e[s.do]>0&&E&&E.set(function(){k||(k=!0,R(n,500,{}),l&&l(!0))},e[s.do]),u}function x(e,t,n){var r=(0,o.zkX)(),i=new XDomainRequest,a=e[s.Cd];i.onload=function(){var n=(0,l.Lo)(i),r=m&&m.xdrOnComplete;r&&(0,o.Tnt)(r)?r(i,t,e):R(t,200,{},n)},i.onerror=function(){R(t,400,{},g?d:(0,l.HU)(i))},i.ontimeout=function(){R(t,500,{})},i.onprogress=function(){};var u=r&&r.location&&r.location[s.Qg]||"",h=e[s.Vq];if(h){if(!g&&0!==h.lastIndexOf(u,0)){var v="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";return(0,c.ZP)(p,2,40,". "+v),void k(v,t)}var y=g?h:h[s.W7](/^(https?:)/,"");i.open(f,y),e[s.do]&&(i[s.do]=e[s.do]),i.send(a),g&&n?E&&E.set(function(){i.send(a)},0):i.send(a)}else P(t)}function L(){T=0,n=!1,t=!1,p=null,g=null,m=null,v=null,y=null,w=null,I=!1,A=!1,S=!1,C=!1,_=!1,E=null}L(),e[s.mE]=function(t,r){p=r,n&&(0,c.ZP)(p,1,28,"Sender is already initialized"),e.SetConfig(t),n=!0},e._getDbgPlgTargets=function(){return[n,g,v,t]},e.SetConfig=function(e){try{if(m=e.senderOnCompleteCallBack||{},v=!!e.disableCredentials,y=e.fetchCredentials,g=!!e.isOneDs,t=!!e.enableSendPromise,I=!!e.disableXhr,A=!!e.disableBeacon,S=!!e.disableBeaconSync,E=e.timeWrapper,_=!!e.addNoResponse,C=!!e.disableFetchKeepAlive,w={sendPOST:N},g||(b=!1),v){var n=(0,u.g$)();n&&n.protocol&&"file:"===n.protocol[s.OL]()&&(b=!1)}return!0}catch(e){}return!1},e.getSyncFetchPayload=function(){return T},e.getSenderInst=function(e,t){return e&&e[s.oI]?function(e,t){for(var n,r=0,i=null,o=0;null==i&&o<e[s.oI];)r=e[o],I||1!==r?2!==r||!(0,u.R7)(t)||t&&C?3!==r||!(0,u.Uf)()||(t?S:A)||(i=M):i=D:(0,u.PV)()?i=x:(0,u.xk)()&&(i=N),o++;return i?((n={_transport:r,_isSync:t})[s.L]=i,n):null}(e,t):null},e.getFallbackInst=function(){return w},e[s.tn]=function(e,t){L()}})}return e.__ieDyn=1,e}()},857:e=>{"use strict";e.exports=require("os")},909:(e,t,n)=>{const r=n(3908);e.exports=(e,t,n)=>{const i=new r(e,n),o=new r(t,n);return i.compare(o)||i.compareBuild(o)}},937:(e,t,n)=>{"use strict";n.d(t,{S:()=>i,_0:()=>s,hj:()=>o,m5:()=>r});var r="",i="https://browser.events.data.microsoft.com/OneCollector/1.0/",o="version",s="properties"},956:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ActiveStatus:()=>k.f,AppInsightsCore:()=>p,BaseTelemetryPlugin:()=>E.s,DiagnosticLogger:()=>c.wq,EventLatency:()=>v,EventPersistence:()=>w,EventPropertyType:()=>y,EventsDiscardedReason:()=>b.x,FullVersionString:()=>d.xE,InternalAppInsightsCore:()=>u._,LoggingSeverity:()=>C,MinChannelPriorty:()=>S,NotificationManager:()=>_.h,PerfEvent:()=>s.Q6,PerfManager:()=>s.NS,ProcessTelemetryContext:()=>T.W0,SenderPostManager:()=>H.v,TraceLevel:()=>I,Undefined:()=>D.bA,ValueKind:()=>m,ValueSanitizer:()=>A,Version:()=>d.Rx,_InternalLogMessage:()=>c.WD,__getRegisteredEvents:()=>P.El,_appendHeader:()=>R.LU,_getAllResponseHeaders:()=>R.w3,_logInternalMessage:()=>c.Oc,_testHookMaxUnloadHooksCb:()=>j.d,_throwInternal:()=>c.ZP,_warnToConsole:()=>c.OG,addEventHandler:()=>P.So,addEventListeners:()=>P.lQ,addPageHideEventListener:()=>P.Fc,addPageShowEventListener:()=>P.oS,addPageUnloadEventListener:()=>P.ee,areCookiesSupported:()=>x.gi,arrForEach:()=>o.Iuo,arrIndexOf:()=>o.rDm,arrMap:()=>o.W$7,arrReduce:()=>o.KTd,attachEvent:()=>P.Q3,blockDynamicConversion:()=>F.V9,convertAllHeadersToMap:()=>R.IL,cookieAvailable:()=>x.gi,createCookieMgr:()=>x.xN,createDynamicConfig:()=>a.e,createEnumStyle:()=>g.H,createGuid:()=>d.gj,createProcessTelemetryContext:()=>T.i8,createTraceParent:()=>q.wk,createUniqueNamespace:()=>L.Z,createUnloadHandlerContainer:()=>U.P,dateNow:()=>o.f0d,detachEvent:()=>P.Ym,disallowsSameSiteNone:()=>x.It,doPerf:()=>s.r2,dumpObj:()=>o.mmD,eventOff:()=>P.ML,eventOn:()=>P.mB,extend:()=>d.X$,findW3cTraceParent:()=>q.ef,forceDynamicConversion:()=>F.Hf,formatErrorMessageXdr:()=>R.HU,formatErrorMessageXhr:()=>R.r4,formatTraceParent:()=>q.L0,generateW3CId:()=>O.cL,getCommonSchemaMetaData:()=>d.Go,getConsole:()=>N.U5,getCookieValue:()=>d.UM,getCrypto:()=>N.MY,getDocument:()=>o.YEm,getDynamicConfigHandler:()=>F.QA,getExceptionName:()=>R.lL,getFieldValueType:()=>d.cq,getGlobal:()=>o.mS$,getGlobalInst:()=>o.zS2,getHistory:()=>o.JKf,getIEVersion:()=>N.L0,getISOString:()=>R._u,getJSON:()=>N.hm,getLocation:()=>N.g$,getMsCrypto:()=>N.iN,getNavigator:()=>o.w3n,getPerformance:()=>o.FJj,getResponseText:()=>R.Lo,getSetValue:()=>R.c2,getTenantId:()=>d.EO,getTime:()=>d.WB,getWindow:()=>o.zkX,hasDocument:()=>o.Wtk,hasHistory:()=>o.twz,hasJSON:()=>N.Z,hasNavigator:()=>o.w9M,hasOwnProperty:()=>o.v0u,hasWindow:()=>o.Vdv,isArray:()=>o.cyL,isArrayValid:()=>d.wJ,isBeaconsSupported:()=>N.Uf,isBoolean:()=>o.Lmq,isChromium:()=>d.F2,isDate:()=>o.$PY,isDocumentObjectAvailable:()=>d.g8,isError:()=>o.bJ7,isFetchSupported:()=>N.R7,isFunction:()=>o.Tnt,isGreaterThanZero:()=>d.ei,isIE:()=>N.lT,isLatency:()=>d.Hh,isNotTruthy:()=>o.woc,isNullOrUndefined:()=>o.hXl,isNumber:()=>o.EtT,isObject:()=>o.Gvm,isReactNative:()=>N.lV,isSampledFlag:()=>q.N7,isString:()=>o.KgX,isTruthy:()=>o.zzB,isTypeof:()=>o.Edw,isUint8ArrayAvailable:()=>d.h3,isUndefined:()=>o.b07,isValidSpanId:()=>q.wN,isValidTraceId:()=>q.hX,isValidTraceParent:()=>q.mJ,isValueAssigned:()=>d.yD,isValueKind:()=>d.m0,isWindowObjectAvailable:()=>d.P$,isXhrSupported:()=>N.xk,mergeEvtNamespace:()=>P.Hm,newGuid:()=>O.aq,newId:()=>M.Si,normalizeJsName:()=>R.cH,objDefineAccessors:()=>o.raO,objForEachKey:()=>o.zav,objFreeze:()=>o.N6t,objKeys:()=>o.cGk,objSeal:()=>o.jsL,onConfigChange:()=>a.a,openXhr:()=>d.H$,optimizeObject:()=>R.hW,parseResponse:()=>B.x,parseTraceParent:()=>q.ZI,perfNow:()=>o.UUD,prependTransports:()=>R.jL,proxyAssign:()=>R.qz,proxyFunctionAs:()=>R.RF,proxyFunctions:()=>R.o$,random32:()=>M.VN,randomValue:()=>M.Z1,removeEventHandler:()=>P.zh,removeEventListeners:()=>P.Wg,removePageHideEventListener:()=>P.sq,removePageShowEventListener:()=>P.vF,removePageUnloadEventListener:()=>P.Ds,safeGetCookieMgr:()=>x.um,safeGetLogger:()=>c.y0,sanitizeProperty:()=>d.TC,setEnableEnvMocks:()=>N.cU,setProcessTelemetryTimings:()=>d.u9,setValue:()=>R.KY,strContains:()=>R.Ju,strEndsWith:()=>o.Cv9,strFunction:()=>D.hW,strObject:()=>D._1,strPrototype:()=>D.vR,strStartsWith:()=>o.tGl,strTrim:()=>o.EHq,strUndefined:()=>D.bA,throwError:()=>o.$8,toISOString:()=>R._u,useXDomainRequest:()=>N.PV});var r=n(659),i=n(8279),o=n(269),s=n(8156),a=n(9749),c=n(3775),u=n(2774),l=n(937),d=n(4822),h=n(1739),f=(0,o.ZHX)({endpointUrl:l.S,propertyStorageOverride:{isVal:function(e){return!e||e.getProperty&&e.setProperty||(0,o.$8)("Invalid property storage override passed."),!0}}}),p=function(e){function t(){var n=e.call(this)||this;return(0,i.A)(t,n,function(e,t){e[h.mE]=function(n,r,i,u){(0,s.r2)(e,function(){return"AppInsightsCore.initialize"},function(){try{t[h.mE]((0,a.e)(n,f,i||e[h.Uw],!1).cfg,r,i,u)}catch(t){var s=e[h.Uw],l=(0,o.mmD)(t);-1!==l[h.Sj]("channels")&&(l+="\n - Channels must be provided through config.channels only!"),(0,c.ZP)(s,1,514,"SDK Initialization Failed - no telemetry will be sent: "+l)}},function(){return{config:n,extensions:r,logger:i,notificationManager:u}})},e.track=function(n){(0,s.r2)(e,function(){return"AppInsightsCore.track"},function(){var r=n;if(r){r[h.dg]=r[h.dg]||{},r[h.dg].trackStart=(0,d.WB)(),(0,d.Hh)(r.latency)||(r.latency=1);var i=r.ext=r.ext||{};i.sdk=i.sdk||{},i.sdk.ver=d.xE;var o=r.baseData=r.baseData||{};o[l._0]=o[l._0]||{};var s=o[l._0];s[l.hj]=s[l.hj]||e.pluginVersionString||l.m5}t.track(r)},function(){return{item:n}},!n.sync)},e[h.h4]=function(e){return t[h.h4](e||"InternalLog")}}),n}return(0,r.qU)(t,e),t.__ieDyn=1,t}(u._),g=n(4282),m=(0,g.H)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),v=(0,g.H)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),y=(0,g.H)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),w=(0,g.H)({Normal:1,Critical:2}),I=(0,g.H)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),A=function(){function e(e){var t=this,n={},r=[],i=[];function s(e,t){var s,a=n[e];if(a&&(s=a[t]),!s&&null!==s){if((0,o.KgX)(e)&&(0,o.KgX)(t))if(i[h.oI]>0){for(var c=0;c<i[h.oI];c++)if(i[c][h.hF](e,t)){s={canHandle:!0,fieldHandler:i[c]};break}}else 0===r[h.oI]&&(s={canHandle:!0});if(!s&&null!==s)for(s=null,c=0;c<r[h.oI];c++)if(r[c][h.hF](e,t)){s={canHandle:!0,handler:r[c],fieldHandler:null};break}a||(a=n[e]={}),a[t]=s}return s}function a(e,t,n,r,i,s){if(e.handler)return e.handler.property(t,n,i,s);if(!(0,o.hXl)(i[h.QV])){if(!(4096&~r&&(0,d.m0)(i[h.QV])))return null;i[h.pF]=i[h.pF].toString()}return u(e.fieldHandler,t,n,r,i)}function c(e,t,n){return(0,d.yD)(n)?{value:n}:null}function u(e,n,r,i,s){if(s&&e){var a=e.getSanitizer(n,r,i,s[h.QV],s.propertyType);if(a)if(4===i){var l={},f=s[h.pF];(0,o.zav)(f,function(t,i){var o=n+"."+r;if((0,d.yD)(i)){var s=c(0,0,i);(s=u(e,o,t,(0,d.cq)(i),s))&&(l[t]=s[h.pF])}}),s[h.pF]=l}else{var p={path:n,name:r,type:i,prop:s,sanitizer:t};s=a.call(t,p)}}return s}e&&i.push(e),t.clearCache=function(){n={}},t.addSanitizer=function(e){e&&((0,o.Nq2)(r,e)||r.push(e),n={})},t.addFieldSanitizer=function(e){e&&((0,o.Nq2)(i,e)||i.push(e),n={})},t[h.Rl]=function(e){if(e){var t=(0,o.rDm)(r,e);-1!==t&&(r.splice(t,1),n={}),(0,o.Iuo)(r,function(t){t&&t[h.Rl]&&t[h.Rl](e)})}},t[h.Mr]=function(e){if(e){var t=(0,o.rDm)(i,e);-1!==t&&(i.splice(t,1),n={}),(0,o.Iuo)(r,function(t){t&&t[h.Mr]&&t[h.Mr](e)})}},t.isEmpty=function(){return(0,o.R3R)(r)+(0,o.R3R)(i)===0},t[h.hF]=function(e,t){var n=s(e,t);return!!n&&n[h.nw]},t[h.pF]=function(e,t,n,r){var i=s(e,t);if(i&&i[h.nw]){if(!i||!i[h.nw])return null;if(i.handler)return i.handler[h.pF](e,t,n,r);if(!(0,o.KgX)(t)||(0,o.hXl)(n)||n===l.m5)return null;var u=null,f=(0,d.cq)(n);if(8192&~f)1!==f&&2!==f&&3!==f&&4096&~f?4===f&&(u=c(0,0,r?JSON.stringify(n):n)):u=c(0,0,n);else{var p=-8193&f;if(u=n,!(0,d.yD)(u[h.pF])||1!==p&&2!==p&&3!==p&&4096&~p)return null}if(u)return a(i,e,t,f,u,r)}return null},t.property=function(e,t,n,r){var i=s(e,t);if(!i||!i[h.nw])return null;if(!(0,o.KgX)(t)||(0,o.hXl)(n)||!(0,d.yD)(n[h.pF]))return null;var c=(0,d.cq)(n[h.pF]);return 0===c?null:a(i,e,t,c,n,r)}}return e.getFieldType=d.cq,e}(),S=100,C=(0,g.H)({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3}),_=n(1356),E=n(8257),T=n(2317),b=n(3662),k=n(4875),P=n(6149),R=n(3673),O=n(9882),M=n(6535),N=n(7292),D=n(5664),x=n(5034),L=n(4276),U=n(836),q=n(1864),F=n(9147),H=n(856),B=n(1190),j=n(8969)},991:(e,t,n)=>{"use strict";n.d(t,{q:()=>c});var r=n(269),i=n(6182);function o(e){return e&&(0,r.Gvm)(e)&&(e.isVal||e.fb||(0,r.KhI)(e,"v")||(0,r.KhI)(e,"mrg")||(0,r.KhI)(e,"ref")||e.set)}function s(e,t,n){var o,s=n.dfVal||r.O9V;if(t&&n.fb){var a=n.fb;(0,r.cyL)(a)||(a=[a]);for(var c=0;c<a[i.oI];c++){var u=a[c],l=t[u];if(s(l)?o=l:e&&(s(l=e.cfg[u])&&(o=l),e.set(e.cfg,(0,r.oJg)(u),l)),s(o))break}}return!s(o)&&s(n.v)&&(o=n.v),o}function a(e,t,n){var c,u=n;return n&&o(n)&&(u=s(e,t,n)),u&&(o(u)&&(u=a(e,t,u)),(0,r.cyL)(u)?(c=[])[i.oI]=u[i.oI]:(0,r.QdQ)(u)&&(c={}),c&&((0,r.zav)(u,function(n,r){r&&o(r)&&(r=a(e,t,r)),c[n]=r}),u=c)),u}function c(e,t,n,u){var l,d,h,f,p,g,m,v,y=u;o(y)?(l=y.isVal,d=y.set,g=y[i.XW],m=y[i.JQ],f=y.mrg,!(p=y.ref)&&(0,r.b07)(p)&&(p=!!f),h=s(e,t,y)):h=u,m&&e[i.JQ](t,n);var w=!0,I=t[n];!I&&(0,r.hXl)(I)||(v=I,w=!1,l&&v!==h&&!l(v)&&(v=h,w=!0),d&&(w=(v=d(v,h,t))===h)),w?v=h?a(e,t,h):h:((0,r.QdQ)(v)||(0,r.cyL)(h))&&f&&h&&((0,r.QdQ)(h)||(0,r.cyL)(h))&&(0,r.zav)(h,function(t,n){c(e,v,t,n)}),e.set(t,n,v),p&&e.ref(t,n),g&&e[i.XW](t,n)}},996:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},1045:(e,t,n)=>{"use strict";var r=n(181).Buffer,i=n(181).SlowBuffer;function o(e,t){if(!r.isBuffer(e)||!r.isBuffer(t))return!1;if(e.length!==t.length)return!1;for(var n=0,i=0;i<e.length;i++)n|=e[i]^t[i];return 0===n}e.exports=o,o.install=function(){r.prototype.equal=i.prototype.equal=function(e){return o(this,e)}};var s=r.prototype.equal,a=i.prototype.equal;o.restore=function(){r.prototype.equal=s,i.prototype.equal=a}},1062:(e,t,n)=>{"use strict";n.d(t,{L:()=>a});var r=n(3673),i=n(5025),o=n(5130),s=n(7975),a=function(e,t,n){var a=this,c=this;c.ver=1,c.sampleRate=100,c.tags={},c[o.RS]=(0,s.Rr)(e,n)||i.R2,c.data=t,c.time=(0,r._u)(new Date),c.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return 100===a.sampleRate?4:1},tags:1,data:1}}},1123:e=>{const t=/^[0-9]+$/,n=(e,n)=>{const r=t.test(e),i=t.test(n);return r&&i&&(e=+e,n=+n),e===n?0:r&&!i?-1:i&&!r?1:e<n?-1:1};e.exports={compareIdentifiers:n,rcompareIdentifiers:(e,t)=>n(t,e)}},1170:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const s=o(n(5692)),a=o(n(857)),c=o(n(1398)),u=n(5396),l=n(2468),d=n(6548),h=n(2396),f=n(8393);function p(){return{sendPOST:(e,t)=>{const n={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{const r=s.request(e.urlString,n,e=>{e.on("data",function(n){t(e.statusCode??200,e.headers,n.toString())}),e.on("error",function(){t(0,{})})});r.write(e.data,e=>{e&&t(0,{})}),r.end()}catch{t(0,{})}}}}class g extends d.BaseTelemetryReporter{constructor(e,t){let n=e=>(0,l.appInsightsClientFactory)(e,c.env.machineId,c.env.sessionId,p(),t);f.TelemetryUtil.shouldUseOneDataSystemSDK(e)&&(n=e=>(0,u.oneDataSystemClientFactory)(e,c,p()));const r={release:a.release(),platform:a.platform(),architecture:a.arch()},i=new h.BaseTelemetrySender(e,n);if(e&&0===e.indexOf("AIF-"))throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(i,c,{additionalCommonProperties:f.TelemetryUtil.getAdditionalCommonProperties(r)})}}t.default=g},1190:(e,t,n)=>{"use strict";n.d(t,{x:()=>a});var r=n(269),i=n(6182),o=n(3775),s=n(7292);function a(e,t){try{if(e&&""!==e){var n=(0,s.hm)().parse(e);if(n&&n[i.cp]&&n[i.cp]>=n.itemsAccepted&&n.itemsReceived-n.itemsAccepted===n.errors[i.oI])return n}}catch(n){(0,o.ZP)(t,1,43,"Cannot parse the response. "+(n[i.RS]||(0,r.mmD)(n)),{response:e})}return null}},1261:(e,t,n)=>{const r=n(3908),i=n(8311),o=n(5580);e.exports=(e,t)=>{e=new i(e,t);let n=new r("0.0.0");if(e.test(n))return n;if(n=new r("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){const i=e.set[t];let s=null;i.forEach(e=>{const t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":s&&!o(t,s)||(s=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}}),!s||n&&!o(n,s)||(n=s)}return n&&e.test(n)?n:null}},1356:(e,t,n)=>{"use strict";n.d(t,{h:()=>h});var r=n(8279),i=n(8205),o=n(269),s=n(9749),a=n(6182),c=n(6492),u={perfEvtsSendAll:!1};function l(e){e.h=null;var t=e.cb;e.cb=[],(0,o.Iuo)(t,function(e){(0,o.gBW)(e.fn,[e.arg])})}function d(e,t,n,r){(0,o.Iuo)(e,function(e){e&&e[t]&&(n?(n.cb[a.y5]({fn:r,arg:e}),n.h=n.h||(0,o.dRz)(l,0,n)):(0,o.gBW)(r,[e]))})}var h=function(){function e(t){var n,l;this.listeners=[];var h=[],f={h:null,cb:[]},p=(0,s.e)(t,u);l=p[a.x6](function(e){n=!!e.cfg.perfEvtsSendAll}),(0,r.A)(e,this,function(e){(0,o.vF1)(e,"listeners",{g:function(){return h}}),e[a.vR]=function(e){h[a.y5](e)},e[a.h3]=function(e){for(var t=(0,o.rDm)(h,e);t>-1;)h[a.Ic](t,1),t=(0,o.rDm)(h,e)},e[c.fc]=function(e){d(h,c.fc,f,function(t){t[c.fc](e)})},e[c.Yp]=function(e,t){d(h,c.Yp,f,function(n){n[c.Yp](e,t)})},e[c.dI]=function(e,t){d(h,c.dI,t?f:null,function(n){n[c.dI](e,t)})},e[c.l0]=function(e){e&&(!n&&e[a.Zu]()||d(h,c.l0,null,function(t){e[a.tI]?(0,o.dRz)(function(){return t[c.l0](e)},0):t[c.l0](e)}))},e[c.s4]=function(e){e&&e[a.oI]&&d(h,c.s4,f,function(t){t[c.s4](e)})},e[c.Vj]=function(e){e&&e[a.Cd]&&d(h,c.Vj,f,function(t){t[c.Vj](e)})},e[c.Ev]=function(e,t){if(e>0){var n=t||0;d(h,c.Ev,f,function(t){t[c.Ev](e,n)})}},e[a.M5]=function(e){var t,n=function(){l&&l.rm(),l=null,h=[],f.h&&f.h[a._w](),f.h=null,f.cb=[]};if(d(h,"unload",null,function(n){var r=n[a.M5](e);r&&(t||(t=[]),t[a.y5](r))}),t)return(0,i.Qo)(function(e){return(0,i.Dv)((0,i.Xf)(t),function(){n(),e()})});n()}})}return e.__ieDyn=1,e}()},1365:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(87),i=n(2318),o=n(5130),s=n(7975),a=function(){function e(e,t,n,a,c,u,l,d,h,f,p,g){void 0===h&&(h="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var m=this;m.ver=2,m.id=t,m[o.qd]=(0,r.bb)(c),m.success=u,m.resultCode=l+"",m.type=(0,s.Rr)(e,h);var v=(0,i._U)(e,n,d,a);m.data=(0,s.pJ)(e,a)||v.data,m.target=(0,s.Rr)(e,v.target),f&&(m.target="".concat(m.target," | ").concat(f)),m[o.RS]=(0,s.Rr)(e,v[o.RS]),m[o.$y]=(0,s.xP)(e,p),m[o.XA]=(0,s.Vj)(e,g)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",e.dataType="RemoteDependencyData",e}()},1398:e=>{"use strict";e.exports=require("vscode")},1448:(e,t,n)=>{"use strict";n.d(t,{h:()=>a});var r=n(5025),i=n(87),o=n(5130),s=n(7975),a=function(){function e(e,t,n,a,c,u,l){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var d=this;d.ver=2,d.id=(0,s.HQ)(e,l),d.url=(0,s.pJ)(e,n),d[o.RS]=(0,s.Rr)(e,t)||r.R2,isNaN(a)||(d[o.qd]=(0,i.bb)(a)),d[o.$y]=(0,s.xP)(e,c),d[o.XA]=(0,s.Vj)(e,u)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",e.dataType="PageviewData",e}()},1525:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){function o(e,o,s,a){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof o&&(o=(0,i.default)(o)),16!==o.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+e.length);if(c.set(o),c.set(e,o.length),c=n(c),c[6]=15&c[6]|t,c[8]=63&c[8]|128,s){a=a||0;for(let e=0;e<16;++e)s[a+e]=c[e];return s}return(0,r.default)(c)}try{o.name=e}catch(e){}return o.DNS=s,o.URL=a,o},t.URL=t.DNS=void 0;var r=o(n(2298)),i=o(n(2356));function o(e){return e&&e.__esModule?e:{default:e}}const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=s;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=a},1575:(e,t,n)=>{"use strict";n.d(t,{F:()=>i,O:()=>o});var r=n(8596),i={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},o=new r.o},1589:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.LoopbackAuthServer=void 0;const a=s(n(8611)),c=n(7016),u=s(n(9896)),l=s(n(6928)),d=n(6982);function h(e,t){u.readFile(t,(t,n)=>{t?(console.error(t),e.writeHead(404),e.end()):(e.writeHead(200,{"content-length":n.length}),e.end(n))})}t.LoopbackAuthServer=class{_server;_resultPromise;_startingRedirect;nonce=(0,d.randomBytes)(16).toString("base64");port;set state(e){e?this._startingRedirect.searchParams.set("state",e):this._startingRedirect.searchParams.delete("state")}get state(){return this._startingRedirect.searchParams.get("state")??void 0}constructor(e,t){if(!e)throw new Error("serveRoot must be defined");if(!t)throw new Error("startingRedirect must be defined");let n;this._startingRedirect=new c.URL(t),this._resultPromise=new Promise((e,t)=>n={resolve:e,reject:t}),this._server=a.createServer((t,r)=>{const i=new c.URL(t.url,`http://${t.headers.host}`);switch(i.pathname){case"/signin":(i.searchParams.get("nonce")??"").replace(/ /g,"+")!==this.nonce&&(r.writeHead(302,{location:`/?error=${encodeURIComponent("Nonce does not match.")}`}),r.end()),r.writeHead(302,{location:this._startingRedirect.toString()}),r.end();break;case"/callback":{const e=i.searchParams.get("code")??void 0,t=i.searchParams.get("state")??void 0,o=(i.searchParams.get("nonce")??"").replace(/ /g,"+"),s=i.searchParams.get("error")??void 0;if(s){r.writeHead(302,{location:`/?error=${i.searchParams.get("error_description")}`}),r.end(),n.reject(new Error(s));break}if(!e||!t||!o){r.writeHead(400),r.end();break}if(this.state!==t){r.writeHead(302,{location:`/?error=${encodeURIComponent("State does not match.")}`}),r.end(),n.reject(new Error("State does not match."));break}if(this.nonce!==o){r.writeHead(302,{location:`/?error=${encodeURIComponent("Nonce does not match.")}`}),r.end(),n.reject(new Error("Nonce does not match."));break}n.resolve({code:e,state:t}),r.writeHead(302,{location:"/"}),r.end();break}case"/":h(r,l.join(e,"index.html"));break;default:h(r,l.join(e,i.pathname.substring(1)))}})}start(){return new Promise((e,t)=>{if(this._server.listening)throw new Error("Server is already started");const n=setTimeout(()=>{t(new Error("Timeout waiting for port"))},5e3);this._server.on("listening",()=>{const t=this._server.address();if("string"==typeof t)this.port=parseInt(t);else{if(!(t instanceof Object))throw new Error("Unable to determine port");this.port=t.port}clearTimeout(n),this.state=`http://127.0.0.1:${this.port}/callback?nonce=${encodeURIComponent(this.nonce)}`,e(this.port)}),this._server.on("error",e=>{t(new Error(`Error listening to server: ${e}`))}),this._server.on("close",()=>{t(new Error("Closed"))}),this._server.listen(0,"127.0.0.1")})}stop(){return new Promise((e,t)=>{if(!this._server.listening)throw new Error("Server is not started");this._server.close(n=>{n?t(n):e()})})}waitForOAuthResponse(){return this._resultPromise}}},1619:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeferredPromise=t.IntervalTimer=t.SequencerByKey=void 0,t.raceCancellationAndTimeoutError=function(e,t,n){return function(e,t){return new Promise((n,i)=>{const o=t.onCancellationRequested(()=>{o.dispose(),i(new r.CancellationError)});e.then(n,i).finally(()=>o.dispose())})}(function(e,t){return new Promise((n,i)=>{const o=setTimeout(()=>{i(new r.CancellationError)},t);e.then(n,i).finally(()=>clearTimeout(o))})}(e,n),t)},t.toPromise=function(e){return new Promise(t=>function(e){return(t,n=null,r)=>{let i,o=!1;return i=e(e=>{if(!o)return i?i.dispose():o=!0,t.call(n,e)},null,r),o&&i.dispose(),i}}(e)(t))};const r=n(1398);t.SequencerByKey=class{promiseMap=new Map;queue(e,t){const n=(this.promiseMap.get(e)??Promise.resolve()).catch(()=>{}).then(t).finally(()=>{this.promiseMap.get(e)===n&&this.promiseMap.delete(e)});return this.promiseMap.set(e,n),n}};class i extends r.Disposable{_token;constructor(){super(()=>this.cancel()),this._token=-1}cancel(){-1!==this._token&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}t.IntervalTimer=i,t.DeferredPromise=class{completeCallback;errorCallback;outcome;get isRejected(){return 1===this.outcome?.outcome}get isResolved(){return 0===this.outcome?.outcome}get isSettled(){return!!this.outcome}get value(){return 0===this.outcome?.outcome?this.outcome?.value:void 0}p;constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new r.CancellationError)}}},1691:(e,t,n)=>{const r=n(1741),i=n(3726),o=n(8980),s=n(7260),a=n(855),c=n(7019),u=n(4977),l=n(5747),{KeyObject:d,createSecretKey:h,createPublicKey:f}=n(6982),p=["RS256","RS384","RS512"],g=["ES256","ES384","ES512"],m=["RS256","RS384","RS512"],v=["HS256","HS384","HS512"];u&&(p.splice(p.length,0,"PS256","PS384","PS512"),m.splice(m.length,0,"PS256","PS384","PS512")),e.exports=function(e,t,n,u){let y;if("function"!=typeof n||u||(u=n,n={}),n||(n={}),n=Object.assign({},n),y=u||function(e,t){if(e)throw e;return t},n.clockTimestamp&&"number"!=typeof n.clockTimestamp)return y(new r("clockTimestamp must be a number"));if(void 0!==n.nonce&&("string"!=typeof n.nonce||""===n.nonce.trim()))return y(new r("nonce must be a non-empty string"));if(void 0!==n.allowInvalidAsymmetricKeyTypes&&"boolean"!=typeof n.allowInvalidAsymmetricKeyTypes)return y(new r("allowInvalidAsymmetricKeyTypes must be a boolean"));const w=n.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return y(new r("jwt must be provided"));if("string"!=typeof e)return y(new r("jwt must be a string"));const I=e.split(".");if(3!==I.length)return y(new r("jwt malformed"));let A;try{A=s(e,{complete:!0})}catch(e){return y(e)}if(!A)return y(new r("invalid token"));const S=A.header;let C;if("function"==typeof t){if(!u)return y(new r("verify must be called asynchronous if secret or public key is provided as a callback"));C=t}else C=function(e,n){return n(null,t)};return C(S,function(t,s){if(t)return y(new r("error in secret or public key callback: "+t.message));const u=""!==I[2].trim();if(!u&&s)return y(new r("jwt signature is required"));if(u&&!s)return y(new r("secret or public key must be provided"));if(!u&&!n.algorithms)return y(new r('please specify "none" in "algorithms" to verify unsigned tokens'));if(null!=s&&!(s instanceof d))try{s=f(s)}catch(e){try{s=h("string"==typeof s?Buffer.from(s):s)}catch(e){return y(new r("secretOrPublicKey is not valid key material"))}}if(n.algorithms||("secret"===s.type?n.algorithms=v:["rsa","rsa-pss"].includes(s.asymmetricKeyType)?n.algorithms=m:"ec"===s.asymmetricKeyType?n.algorithms=g:n.algorithms=p),-1===n.algorithms.indexOf(A.header.alg))return y(new r("invalid algorithm"));if(S.alg.startsWith("HS")&&"secret"!==s.type)return y(new r(`secretOrPublicKey must be a symmetric key when using ${S.alg}`));if(/^(?:RS|PS|ES)/.test(S.alg)&&"public"!==s.type)return y(new r(`secretOrPublicKey must be an asymmetric key when using ${S.alg}`));if(!n.allowInvalidAsymmetricKeyTypes)try{c(S.alg,s)}catch(e){return y(e)}let C;try{C=l.verify(e,A.header.alg,s)}catch(e){return y(e)}if(!C)return y(new r("invalid signature"));const _=A.payload;if(void 0!==_.nbf&&!n.ignoreNotBefore){if("number"!=typeof _.nbf)return y(new r("invalid nbf value"));if(_.nbf>w+(n.clockTolerance||0))return y(new i("jwt not active",new Date(1e3*_.nbf)))}if(void 0!==_.exp&&!n.ignoreExpiration){if("number"!=typeof _.exp)return y(new r("invalid exp value"));if(w>=_.exp+(n.clockTolerance||0))return y(new o("jwt expired",new Date(1e3*_.exp)))}if(n.audience){const e=Array.isArray(n.audience)?n.audience:[n.audience];if(!(Array.isArray(_.aud)?_.aud:[_.aud]).some(function(t){return e.some(function(e){return e instanceof RegExp?e.test(t):e===t})}))return y(new r("jwt audience invalid. expected: "+e.join(" or ")))}if(n.issuer&&("string"==typeof n.issuer&&_.iss!==n.issuer||Array.isArray(n.issuer)&&-1===n.issuer.indexOf(_.iss)))return y(new r("jwt issuer invalid. expected: "+n.issuer));if(n.subject&&_.sub!==n.subject)return y(new r("jwt subject invalid. expected: "+n.subject));if(n.jwtid&&_.jti!==n.jwtid)return y(new r("jwt jwtid invalid. expected: "+n.jwtid));if(n.nonce&&_.nonce!==n.nonce)return y(new r("jwt nonce invalid. expected: "+n.nonce));if(n.maxAge){if("number"!=typeof _.iat)return y(new r("iat required when maxAge is specified"));const e=a(n.maxAge,_.iat);if(void 0===e)return y(new r('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(w>=e+(n.clockTolerance||0))return y(new o("maxAge exceeded",new Date(1e3*e)))}if(!0===n.complete){const e=A.signature;return y(null,{header:S,payload:_,signature:e})}return y(null,_)})}},1729:(e,t,n)=>{const r=n(144);e.exports=(e,t)=>{const n=r(e,t);return n&&n.prerelease.length?n.prerelease:null}},1739:(e,t,n)=>{"use strict";n.d(t,{Jg:()=>d,Mr:()=>p,QV:()=>u,Rl:()=>f,Sj:()=>o,Uw:()=>i,dg:()=>s,h4:()=>a,hF:()=>h,mE:()=>r,nw:()=>g,oI:()=>l,pF:()=>c});var r="initialize",i="logger",o="indexOf",s="timings",a="pollInternalLogs",c="value",u="kind",l="length",d="processTelemetryStart",h="handleField",f="rmSanitizer",p="rmFieldSanitizer",g="canHandle"},1741:e=>{var t=function(e,t){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,t&&(this.inner=t)};(t.prototype=Object.create(Error.prototype)).constructor=t,e.exports=t},1763:(e,t,n)=>{const r=n(560);e.exports=(e,t)=>r(e,t,!0)},1832:(e,t,n)=>{const r=n(144);e.exports=(e,t)=>{const n=r(e,null,!0),i=r(t,null,!0),o=n.compare(i);if(0===o)return null;const s=o>0,a=s?n:i,c=s?i:n,u=!!a.prerelease.length;if(c.prerelease.length&&!u)return c.patch||c.minor?a.patch?"patch":a.minor?"minor":"major":"major";const l=u?"pre":"";return n.major!==i.major?l+"major":n.minor!==i.minor?l+"minor":n.patch!==i.patch?l+"patch":"prerelease"}},1864:(e,t,n)=>{"use strict";n.d(t,{L0:()=>C,N7:()=>S,V5:()=>E,ZI:()=>y,ef:()=>_,hX:()=>w,mJ:()=>A,wN:()=>I,wk:()=>v});var r=n(269),i=n(6182),o=n(9882),s=n(7292),a=n(6492),c=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,u="00",l="ff",d="00000000000000000000000000000000",h="0000000000000000",f=1;function p(e,t,n){return!(!e||e[i.oI]!==t||e===n||!e.match(/^[\da-f]*$/i))}function g(e,t,n){return p(e,t)?e:n}function m(e){(isNaN(e)||e<0||e>255)&&(e=1);for(var t=e.toString(16);t[i.oI]<2;)t="0"+t;return t}function v(e,t,n,s){var a;return(a={})[i.s]=p(s,2,l)?s:u,a[i.P5]=w(e)?e:(0,o.cL)(),a[i.wi]=I(t)?t:(0,r.ZWZ)((0,o.cL)(),16),a.traceFlags=n>=0&&n<=255?n:1,a}function y(e,t){var n;if(!e)return null;if((0,r.cyL)(e)&&(e=e[0]||""),!e||!(0,r.KgX)(e)||e[i.oI]>8192)return null;if(-1!==e.indexOf(",")){var o=e[i.sY](",");e=o[t>0&&o[i.oI]>t?t:0]}var s=c.exec((0,r.EHq)(e));return s&&s[1]!==l&&s[2]!==d&&s[3]!==h?((n={version:(s[1]||a.m5)[i.OL](),traceId:(s[2]||a.m5)[i.OL](),spanId:(s[3]||a.m5)[i.OL]()})[i.Rr]=parseInt(s[4],16),n):null}function w(e){return p(e,32,d)}function I(e){return p(e,16,h)}function A(e){return!!(e&&p(e[i.s],2,l)&&p(e[i.P5],32,d)&&p(e[i.wi],16,h)&&p(m(e[i.Rr]),2))}function S(e){return!!A(e)&&(e[i.Rr]&f)===f}function C(e){if(e){var t=m(e[i.Rr]);p(t,2)||(t="01");var n=e[i.s]||u;return"00"!==n&&"ff"!==n&&(n=u),"".concat(n.toLowerCase(),"-").concat(g(e.traceId,32,d).toLowerCase(),"-").concat(g(e.spanId,16,h).toLowerCase(),"-").concat(t.toLowerCase())}return""}function _(e){var t="traceparent",n=y((0,s.$Z)(t),e);return n||(n=y((0,s.Iu)(t),e)),n}function E(e){var t=e.getElementsByTagName("script"),n=[];return(0,r.Iuo)(t,function(e){var t=e[i.NA]("src");if(t){var r=e[i.NA]("crossorigin"),o=!0===e.hasAttribute("async"),s=!0===e.hasAttribute("defer"),a=e[i.NA]("referrerpolicy"),c={url:t};r&&(c.crossOrigin=r),o&&(c.async=o),s&&(c.defer=s),a&&(c.referrerPolicy=a),n[i.y5](c)}}),n}},1883:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScopeData=void 0;const n=["openid","email","profile","offline_access"];t.ScopeData=class{originalScopes;allScopes;scopeStr;scopesToSend;clientId;tenant;tenantId;claims;constructor(e=[],t,n){this.originalScopes=e;const r=[...e];r.sort(),this.allScopes=r,this.scopeStr=r.join(" "),this.claims=t,this.scopesToSend=this.getScopesToSend(r),this.clientId=this.getClientId(this.allScopes),this.tenant=this.getTenant(this.allScopes,n),this.tenantId=this.getTenantId(this.tenant)}getClientId(e){return e.reduce((e,t)=>t.startsWith("VSCODE_CLIENT_ID:")?t.split("VSCODE_CLIENT_ID:")[1]:e,void 0)??"aebc6443-996d-45c2-90f0-388ff96faa56"}getTenant(e,t){if(t?.path){const e=t.path.split("/")[1];if(e)return e}return e.reduce((e,t)=>t.startsWith("VSCODE_TENANT:")?t.split("VSCODE_TENANT:")[1]:e,void 0)??"organizations"}getTenantId(e){switch(e){case"organizations":case"common":case"consumers":return;default:return this.tenant}}getScopesToSend(e){const t=e.filter(e=>!e.startsWith("VSCODE_")),r=new Set(t);for(const e of n)r.delete(e);return r.size||t.push("User.Read"),t}}},1977:(e,t,n)=>{const r=n(9589);e.exports=r.satisfies(process.version,">=15.7.0")},2010:(e,t,n)=>{"use strict";var r=n(2861).Buffer,i=n(3527);function o(e){if(r.isBuffer(e))return e;if("string"==typeof e)return r.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function s(e,t,n){for(var r=0;t+r<n&&0===e[t+r];)++r;return e[t+r]>=128&&--r,r}e.exports={derToJose:function(e,t){e=o(e);var n=i(t),s=n+1,a=e.length,c=0;if(48!==e[c++])throw new Error('Could not find expected "seq"');var u=e[c++];if(129===u&&(u=e[c++]),a-c<u)throw new Error('"seq" specified length of "'+u+'", only "'+(a-c)+'" remaining');if(2!==e[c++])throw new Error('Could not find expected "int" for "r"');var l=e[c++];if(a-c-2<l)throw new Error('"r" specified length of "'+l+'", only "'+(a-c-2)+'" available');if(s<l)throw new Error('"r" specified length of "'+l+'", max of "'+s+'" is acceptable');var d=c;if(c+=l,2!==e[c++])throw new Error('Could not find expected "int" for "s"');var h=e[c++];if(a-c!==h)throw new Error('"s" specified length of "'+h+'", expected "'+(a-c)+'"');if(s<h)throw new Error('"s" specified length of "'+h+'", max of "'+s+'" is acceptable');var f=c;if((c+=h)!==a)throw new Error('Expected to consume entire buffer, but "'+(a-c)+'" bytes remain');var p=n-l,g=n-h,m=r.allocUnsafe(p+l+g+h);for(c=0;c<p;++c)m[c]=0;e.copy(m,c,d+Math.max(-p,0),d+l);for(var v=c=n;c<v+g;++c)m[c]=0;return e.copy(m,c,f+Math.max(-g,0),f+h),(m=m.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(e,t){e=o(e);var n=i(t),a=e.length;if(a!==2*n)throw new TypeError('"'+t+'" signatures must be "'+2*n+'" bytes, saw "'+a+'"');var c=s(e,0,n),u=s(e,n,e.length),l=n-c,d=n-u,h=2+l+1+1+d,f=h<128,p=r.allocUnsafe((f?2:3)+h),g=0;return p[g++]=48,f?p[g++]=h:(p[g++]=129,p[g++]=255&h),p[g++]=2,p[g++]=l,c<0?(p[g++]=0,g+=e.copy(p,g,0,n)):g+=e.copy(p,g,c,n),p[g++]=2,p[g++]=d,u<0?(p[g++]=0,e.copy(p,g,n)):e.copy(p,g,n+u),p}}},2107:(e,t,n)=>{"use strict";Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return r.default}});i(n(8610)),i(n(3208));var r=i(n(4061));i(n(3358)),i(n(6348)),i(n(51)),i(n(129)),i(n(2298)),i(n(2356));function i(e){return e&&e.__esModule?e:{default:e}}},2111:(e,t,n)=>{const r=n(4641),i=n(3999),o=n(5580),s=n(4089),a=n(7059),c=n(5200);e.exports=(e,t,n,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return r(e,n,u);case"!=":return i(e,n,u);case">":return o(e,n,u);case">=":return s(e,n,u);case"<":return a(e,n,u);case"<=":return c(e,n,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},2203:e=>{"use strict";e.exports=require("stream")},2298:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(129))&&r.__esModule?r:{default:r};const o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).substr(1));t.default=function(e,t=0){const n=(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase();if(!(0,i.default)(n))throw TypeError("Stringified UUID is invalid");return n}},2317:(e,t,n)=>{"use strict";n.d(t,{PV:()=>I,W0:()=>A,i8:()=>v,nU:()=>w,tS:()=>y});var r=n(269),i=n(991),o=n(9749),s=n(6182),a=n(3775),c=n(3673),u=n(6492),l=n(8156),d=n(380),h="TelemetryPluginChain",f="_hasRun",p="_getTelCtx",g=0;function m(e,t,n,c){var l=null,d=[];t||(t=(0,o.e)({},null,n[s.Uw])),null!==c&&(l=c?function(e,t,n){for(;e;){if(e[s.AP]()===n)return e;e=e[s.uR]()}return I([n],t.config||{},t)}(e,n,c):e);var h={_next:function(){var e=l;if(l=e?e[s.uR]():null,!e){var t=d;t&&t[s.oI]>0&&((0,r.Iuo)(t,function(e){try{e.func.call(e.self,e.args)}catch(e){(0,a.ZP)(n[s.Uw],2,73,"Unexpected Exception during onComplete - "+(0,r.mmD)(e))}}),d=[])}return e},ctx:{core:function(){return n},diagLog:function(){return(0,a.y0)(n,t.cfg)},getCfg:function(){return t.cfg},getExtCfg:function(e,n){var o=f(e,!0);return n&&(0,r.zav)(n,function(e,n){if((0,r.hXl)(o[e])){var s=t.cfg[e];!s&&(0,r.hXl)(s)||(o[e]=s)}(0,i.q)(t,o,e,n)}),t[s.h0](o,n)},getConfig:function(e,n,i){void 0===i&&(i=!1);var o,s=f(e,!1),a=t.cfg;return!s||!s[n]&&(0,r.hXl)(s[n])?!a[n]&&(0,r.hXl)(a[n])||(o=a[n]):o=s[n],o||!(0,r.hXl)(o)?o:i},hasNext:function(){return!!l},getNext:function(){return l},setNext:function(e){l=e},iterate:function(e){for(var t;t=h._next();){var n=t[s.AP]();n&&e(n)}},onComplete:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];e&&d[s.y5]({func:e,self:(0,r.b07)(t)?h.ctx:t,args:n})}}};function f(e,n){var r=null,i=t.cfg;if(i&&e){var o=i[u.Bw];!o&&n&&(o={}),i[u.Bw]=o,(o=t.ref(i,u.Bw))&&(!(r=o[e])&&n&&(r={}),o[e]=r,r=t.ref(o,e))}return r}return h}function v(e,t,n,i){var a=(0,o.e)(t),c=m(e,a,n,i),l=c.ctx;return l[s.$5]=function(e){var t=c._next();return t&&t[u.qT](e,l),!t},l[s.$o]=function(e,t){return void 0===e&&(e=null),(0,r.cyL)(e)&&(e=I(e,a.cfg,n,t)),v(e||l[s.uR](),a.cfg,n,t)},l}function y(e,t,n){var i=(0,o.e)(t.config),a=m(e,i,t,n),c=a.ctx;return c[s.$5]=function(e){var t=a._next();return t&&t[s.M5](c,e),!t},c[s.$o]=function(e,n){return void 0===e&&(e=null),(0,r.cyL)(e)&&(e=I(e,i.cfg,t,n)),y(e||c[s.uR](),t,n)},c}function w(e,t,n){var i=(0,o.e)(t.config),a=m(e,i,t,n).ctx;return a[s.$5]=function(e){return a.iterate(function(t){(0,r.Tnt)(t[s.HC])&&t[s.HC](a,e)})},a[s.$o]=function(e,n){return void 0===e&&(e=null),(0,r.cyL)(e)&&(e=I(e,i.cfg,t,n)),w(e||a[s.uR](),t,n)},a}function I(e,t,n,i){var o=null,c=!i;if((0,r.cyL)(e)&&e[s.oI]>0){var m=null;(0,r.Iuo)(e,function(e){if(c||i!==e||(c=!0),c&&e&&(0,r.Tnt)(e[u.qT])){var y=function(e,t,n){var i,o=null,c=(0,r.Tnt)(e[u.qT]),m=(0,r.Tnt)(e[s.YH]),y={getPlugin:function(){return e},getNext:function(){return o},processTelemetry:function(i,a){w(a=a||function(){var i;return e&&(0,r.Tnt)(e[p])&&(i=e[p]()),i||(i=v(y,t,n)),i}(),function(t){if(!e||!c)return!1;var n=(0,d.Cr)(e);return!n[s.Ik]&&!n[u.Hr]&&(m&&e[s.YH](o),e[u.qT](i,t),!0)},"processTelemetry",function(){return{item:i}},!i.sync)||a[s.$5](i)},unload:function(t,n){w(t,function(){var r=!1;if(e){var i=(0,d.Cr)(e),o=e[u.eT]||i[u.eT];!e||o&&o!==t.core()||i[s.Ik]||(i[u.eT]=null,i[s.Ik]=!0,i[s.tZ]=!1,e[s.Ik]&&!0===e[s.Ik](t,n)&&(r=!0))}return r},"unload",function(){},n[s.tI])||t[s.$5](n)},update:function(t,n){w(t,function(){var r=!1;if(e){var i=(0,d.Cr)(e),o=e[u.eT]||i[u.eT];!e||o&&o!==t.core()||i[s.Ik]||e[s.HC]&&!0===e[s.HC](t,n)&&(r=!0)}return r},"update",function(){},!1)||t[s.$5](n)},_id:i=e?e[s.Ju]+"-"+e[u.Vo]+"-"+g++:"Unknown-0-"+g++,_setNext:function(e){o=e}};function w(t,n,c,d,p){var g=!1,m=e?e[s.Ju]:h,v=t[f];return v||(v=t[f]={}),t.setNext(o),e&&(0,l.r2)(t[u.eT](),function(){return m+":"+c},function(){v[i]=!0;try{var e=o?o._id:u.m5;e&&(v[e]=!1),g=n(t)}catch(e){var l=!o||v[o._id];l&&(g=!0),o&&l||(0,a.ZP)(t[s.e4](),1,73,"Plugin ["+m+"] failed during "+c+" - "+(0,r.mmD)(e)+", run flags: "+(0,r.mmD)(v))}},d,p),g}return(0,r.N6t)(y)}(e,t,n);o||(o=y),m&&m._setNext(y),m=y}})}return i&&!o?I([i],t,n):o}var A=function(e,t,n,i){var o=v(e,t,n,i);(0,c.o$)(this,o,(0,r.cGk)(o))}},2318:(e,t,n)=>{"use strict";n.d(t,{Ft:()=>A,Qu:()=>h,Rs:()=>g,Wt:()=>f,_U:()=>y,jj:()=>I,lt:()=>w,mD:()=>v,mp:()=>p,pg:()=>m});var r=n(269),i=n(1864),o=n(5025),s=n(2910),a=n(7975),c=n(9354),u=n(5130),l=[o._G+o.wc,"https://breeze.aimon.applicationinsights.io"+o.wc,"https://dc-int.services.visualstudio.com"+o.wc],d="cid-v1:";function h(e){return-1!==(0,r.rDm)(l,e[u.OL]())}function f(e){d=e}function p(){return d}function g(e,t,n){if(!t||e&&e.disableCorrelationHeaders)return!1;if(e&&e[u.Ol])for(var i=0;i<e.correlationHeaderExcludePatterns[u.oI];i++)if(e[u.Ol][i].test(t))return!1;var o=(0,c.cM)(t).host[u.OL]();if(!o||-1===(0,r.HzD)(o,":443")&&-1===(0,r.HzD)(o,":80")||(o=((0,c.M0)(t,!0)||"")[u.OL]()),(!e||!e.enableCorsCorrelation)&&o&&o!==n)return!1;var s,a=e&&e.correlationHeaderDomains;if(a&&((0,r.Iuo)(a,function(e){var t=new RegExp(e.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));s=s||t.test(o)}),!s))return!1;var l=e&&e.correlationHeaderExcludedDomains;if(!l||0===l[u.oI])return!0;for(i=0;i<l[u.oI];i++)if(new RegExp(l[i].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")).test(o))return!1;return o&&o[u.oI]>0}function m(e){if(e){var t=v(e,s.a[1]);if(t&&t!==d)return t}}function v(e,t){if(e)for(var n=e[u.sY](","),r=0;r<n[u.oI];++r){var i=n[r][u.sY]("=");if(2===i[u.oI]&&i[0]===t)return i[1]}}function y(e,t,n,r){var i,o=r,s=r;if(t&&t[u.oI]>0){var l=(0,c.cM)(t);if(i=l.host,!o)if(null!=l[u.Ue]){var d=0===l.pathname[u.oI]?"/":l[u.Ue];"/"!==d.charAt(0)&&(d="/"+d),s=l[u.Ue],o=(0,a.Rr)(e,n?n+" "+d:d)}else o=(0,a.Rr)(e,t)}else i=r,o=r;return{target:i,name:o,data:s}}function w(){var e=(0,r.FJj)();if(e&&e.now&&e.timing){var t=e.now()+e.timing.navigationStart;if(t>0)return t}return(0,r.f0d)()}function I(e,t){var n=null;return 0===e||0===t||(0,r.hXl)(e)||(0,r.hXl)(t)||(n=t-e),n}function A(e,t){var n=e||{};return{getName:function(){return n[u.RS]},setName:function(e){t&&t.setName(e),n[u.RS]=e},getTraceId:function(){return n.traceID},setTraceId:function(e){t&&t.setTraceId(e),(0,i.hX)(e)&&(n.traceID=e)},getSpanId:function(){return n.parentID},setSpanId:function(e){t&&t.setSpanId(e),(0,i.wN)(e)&&(n.parentID=e)},getTraceFlags:function(){return n.traceFlags},setTraceFlags:function(e){t&&t.setTraceFlags(e),n.traceFlags=e}}}},2356:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(129))&&r.__esModule?r:{default:r};t.default=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}},2396:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTelemetrySender=void 0,function(e){e[e.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",e[e.INSTANTIATING=1]="INSTANTIATING",e[e.INSTANTIATED=2]="INSTANTIATED"}(n||(n={})),t.BaseTelemetrySender=class{constructor(e,t){this._instantiationStatus=n.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e}sendEventData(e,t){this._telemetryClient?this._telemetryClient.logEvent(e,t):this._instantiationStatus!==n.INSTANTIATED&&this._eventQueue.push({eventName:e,data:t})}sendErrorData(e,t){if(!this._telemetryClient)return void(this._instantiationStatus!==n.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:t}));const r={stack:e.stack,message:e.message,name:e.name};if(t){const e=t.properties||t;t.properties={...e,...r}}else t={properties:r};this._telemetryClient.logEvent("unhandlederror",t)}async flush(){return this._telemetryClient?.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:t})=>this.sendEventData(e,t)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:t})=>this.sendErrorData(e,t)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===n.NOT_INSTANTIATED&&(this._instantiationStatus=n.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=n.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=n.INSTANTIATED}))}}},2410:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BetterTokenStorage=void 0;const i=r(n(8377)),o=n(1398);t.BetterTokenStorage=class{keylistKey;_operationInProgress=!1;_tokensPromise=Promise.resolve(new Map);_secretStorage;_didChangeInOtherWindow=new o.EventEmitter;onDidChangeInOtherWindow=this._didChangeInOtherWindow.event;constructor(e,t){this.keylistKey=e,this._secretStorage=t.secrets,t.subscriptions.push(t.secrets.onDidChange(e=>this.handleSecretChange(e))),this.initialize()}initialize(){this._operationInProgress=!0,this._tokensPromise=new Promise((e,t)=>{this._secretStorage.get(this.keylistKey).then(t=>{if(!t)return void e(new Map);const n=JSON.parse(t).map(e=>new Promise((t,n)=>{this._secretStorage.get(e).then(n=>{t({key:e,value:n})},n)}));Promise.allSettled(n).then(t=>{const n=new Map;t.forEach(e=>{if("fulfilled"===e.status&&e.value.value){const t=this.parseSecret(e.value.value);n.set(e.value.key,t)}else"rejected"===e.status?i.default.error(e.reason):i.default.error("Key was not found in SecretStorage.")}),e(n)})},t=>{i.default.error(t),e(new Map)})}),this._operationInProgress=!1}async get(e){return(await this.getTokens()).get(e)}async getAll(e){const t=await this.getTokens(),n=new Array;for(const[r,i]of t)e&&!e(i)||n.push(i);return n}async store(e,t){const n=await this.getTokens(),r=!n.has(e);n.set(e,t);const o=this.serializeSecret(t);this._operationInProgress=!0,this._tokensPromise=new Promise((t,s)=>{const a=[this._secretStorage.store(e,o)];r&&a.push(this.updateKeyList(n)),Promise.allSettled(a).then(e=>{e.forEach(e=>{"rejected"===e.status&&i.default.error(e.reason)}),t(n)})}),this._operationInProgress=!1}async delete(e){const t=await this.getTokens();t.has(e)&&(t.delete(e),this._operationInProgress=!0,this._tokensPromise=new Promise((n,r)=>{Promise.allSettled([this._secretStorage.delete(e),this.updateKeyList(t)]).then(e=>{e.forEach(e=>{"rejected"===e.status&&i.default.error(e.reason)}),n(t)})}),this._operationInProgress=!1)}async deleteAll(e){const t=await this.getTokens(),n=[];for(const[r,i]of t)e&&!e(i)||n.push(this.delete(r));await Promise.all(n)}async updateKeyList(e){const t=[];for(const[n]of e)t.push(n);const n=JSON.stringify(t);await this._secretStorage.store(this.keylistKey,n)}parseSecret(e){return JSON.parse(e)}serializeSecret(e){return JSON.stringify(e)}async getTokens(){let e;do{e=await this._tokensPromise}while(this._operationInProgress);return e}async handleSecretChange(e){const t=e.key;if(t===this.keylistKey)return;const n=await this.getTokens();this._operationInProgress=!0,this._tokensPromise=new Promise((e,r)=>{this._secretStorage.get(t).then(e=>{if(!e){if(n.has(t)){const e=n.get(t);n.delete(t),this._didChangeInOtherWindow.fire({added:[],updated:[],removed:[{key:t,value:e}]})}return n}const r=this.parseSecret(e),i=n.get(t);return i?(e!==this.serializeSecret(i)&&(n.set(t,r),this._didChangeInOtherWindow.fire({added:[],updated:[t],removed:[]})),n):(n.set(t,r),this._didChangeInOtherWindow.fire({added:[t],updated:[],removed:[]}),n)},e=>(i.default.error(e),n)).then(e)}),this._operationInProgress=!1}}},2417:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MicrosoftSovereignCloudAuthenticationTelemetryReporter=t.MicrosoftAuthenticationTelemetryReporter=void 0;const i=r(n(1170));class o{sharedProperties={};_telemetryReporter;constructor(e){this._telemetryReporter=new i.default(e)}get telemetryReporter(){return this._telemetryReporter}setSharedProperty(e,t){this.sharedProperties[e]=t}postEvent(e,t){const n={...this.sharedProperties,...Object.fromEntries(t)};this._telemetryReporter.sendTelemetryEvent(e,n)}sendActivatedWithMsalNoBrokerEvent(){this._telemetryReporter.sendTelemetryEvent("activatingmsalnobroker")}sendActivatedWithClassicImplementationEvent(e){this._telemetryReporter.sendTelemetryEvent("activatingClassic",{reason:e})}sendLoginEvent(e){this._telemetryReporter.sendTelemetryEvent("login",{scopes:JSON.stringify(this._scrubGuids(e))})}sendLoginFailedEvent(){this._telemetryReporter.sendTelemetryEvent("loginFailed")}sendLogoutEvent(){this._telemetryReporter.sendTelemetryEvent("logout")}sendLogoutFailedEvent(){this._telemetryReporter.sendTelemetryEvent("logoutFailed")}sendTelemetryErrorEvent(e){let t,n,r,i;if("string"==typeof e)t=e;else{const t=e;r=t.errorCode,i=t.correlationId,n=t.name}this._telemetryReporter.sendTelemetryErrorEvent("msalError",{errorMessage:t,errorName:n,errorCode:r,errorCorrelationId:i})}sendAccountEvent(e,t){this._telemetryReporter.sendTelemetryEvent("account",{scopes:JSON.stringify(this._scrubGuids(e)),accountType:t})}_scrubGuids(e){return e.map(e=>e.replace(/[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/i,"{guid}"))}}t.MicrosoftAuthenticationTelemetryReporter=o,t.MicrosoftSovereignCloudAuthenticationTelemetryReporter=class extends o{sendLoginEvent(e){this._telemetryReporter.sendTelemetryEvent("loginMicrosoftSovereignCloud",{scopes:JSON.stringify(this._scrubGuids(e))})}sendLoginFailedEvent(){this._telemetryReporter.sendTelemetryEvent("loginMicrosoftSovereignCloudFailed")}sendLogoutEvent(){this._telemetryReporter.sendTelemetryEvent("logoutMicrosoftSovereignCloud")}sendLogoutFailedEvent(){this._telemetryReporter.sendTelemetryEvent("logoutMicrosoftSovereignCloudFailed")}}},2445:(e,t,n)=>{"use strict";n.d(t,{C:()=>s});var r=n(5025),i=n(5130),o=n(7975),s=function(){function e(e,t,n,s,a){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var c=this;c.ver=2,t=t||r.R2,c[i.pM]=(0,o.Vk)(e,t),c[i.$y]=(0,o.xP)(e,s),c[i.XA]=(0,o.Vj)(e,a),n&&(c[i.Ur]=n)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Message",e.dataType="MessageData",e}()},2468:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.appInsightsClientFactory=void 0;const s=n(740),a=n(8393);t.appInsightsClientFactory=async(e,t,r,i,c)=>{let u;try{const t=await Promise.resolve().then(()=>o(n(5927))),r={};if(i){const e={alwaysUseXhrOverride:!0,httpXHROverride:i};r[s.BreezeChannelIdentifier]=e}let a;e.startsWith("InstrumentationKey=")||(a=e);const c=a?{instrumentationKey:a}:{connectionString:e};u=new t.ApplicationInsights({...c,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:r})}catch(e){return Promise.reject(e)}return{logEvent:(e,n)=>{const i={...n?.properties,...n?.measurements};c?.length&&a.TelemetryUtil.applyReplacements(i,c),u?.track({name:e,data:i,baseType:"EventData",ext:{user:{id:t,authId:t},app:{sesId:r}},baseData:{name:e,properties:n?.properties,measurements:n?.measurements}})},flush:async()=>{u?.flush(!1)},dispose:async()=>new Promise(e=>{u?.unload(!0,()=>{e(),u=void 0},1e3)})}}},2475:(e,t,n)=>{"use strict";n.d(t,{DD:()=>c,Lx:()=>a,NU:()=>s});var r=n(269),i=n(6182);function o(e,t,n){return!e&&(0,r.hXl)(e)?t:(0,r.Lmq)(e)?e:"true"===(0,r.oJg)(e)[i.OL]()}function s(e){return{mrg:!0,v:e}}function a(e,t,n){return{fb:n,isVal:e,v:t}}function c(e,t){return{fb:t,set:o,v:!!e}}},2525:(e,t,n)=>{const r=n(7638),i=n(560);e.exports=(e,t,n)=>{const o=[];let s=null,a=null;const c=e.sort((e,t)=>i(e,t,n));for(const e of c)r(e,t,n)?(a=e,s||(s=e)):(a&&o.push([s,a]),a=null,s=null);s&&o.push([s,null]);const u=[];for(const[e,t]of o)e===t?u.push(e):t||e!==c[0]?t?e===c[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const l=u.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return l.length<d.length?l:t}},2583:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsalAuthProvider=void 0;const r=n(8151),i=n(1398),o=n(8197),s=n(3226),a=n(1883),c=n(4539),u=n(2410),l=n(3563),d=n(2866),h=n(3217);class f{_context;_telemetryReporter;_logger;_uriHandler;_publicClientManager;_env;_disposables;_eventBufferer=new c.EventBufferer;_onDidChangeSessionsEmitter=new i.EventEmitter;onDidChangeSessions=this._onDidChangeSessionsEmitter.event;constructor(e,t,n,r,i,s=o.Environment.AzureCloud){this._context=e,this._telemetryReporter=t,this._logger=n,this._uriHandler=r,this._publicClientManager=i,this._env=s,this._disposables=e.subscriptions;const a=this._eventBufferer.wrapEvent(this._publicClientManager.onDidAccountsChange,(e,t)=>{if(!e)return t;const n={added:[...e.added??[],...t.added??[]],deleted:[...e.deleted??[],...t.deleted??[]],changed:[...e.changed??[],...t.changed??[]]};return{added:Array.from(new Map(n.added.map(e=>[e.username,e])).values()),deleted:Array.from(new Map(n.deleted.map(e=>[e.username,e])).values()),changed:Array.from(new Map(n.changed.map(e=>[e.username,e])).values())}},{added:new Array,deleted:new Array,changed:new Array})(e=>this._handleAccountChange(e));this._disposables.push(this._onDidChangeSessionsEmitter,a)}static async create(e,t,n,r,i=o.Environment.AzureCloud){const a=await s.CachedPublicClientApplicationManager.create(e.secrets,n,t,i);e.subscriptions.push(a);const c=new f(e,t,n,r,a,i);return await c.initialize(),c}async _migrateSessions(){const e=new u.BetterTokenStorage("microsoft.login.keylist",this._context),t=await e.getAll(e=>(e.endpoint||=o.Environment.AzureCloud.activeDirectoryEndpointUrl,e.endpoint===this._env.activeDirectoryEndpointUrl));this._context.globalState.update("msalMigration",!0);const n=new Map;for(const e of t){const t=new a.ScopeData(e.scope.split(" ")),r=`${t.clientId}:${t.tenant}`;n.has(r)||n.set(r,{clientId:t.clientId,tenant:t.tenant,refreshTokens:[]}),n.get(r).refreshTokens.push(e.refreshToken)}for(const{clientId:e,tenant:t,refreshTokens:r}of n.values())await this._publicClientManager.getOrCreate(e,{refreshTokensToMigrate:r,tenant:t})}async initialize(){this._context.globalState.get("msalMigration",!1)||await this._migrateSessions();for(const e of this._publicClientManager.getAll())for(const t of e.accounts){const e=t.tenantId,n="9188040d-6c67-4c5b-b112-36a304b66dad"===e||"f8cdef31-a31e-4b4a-93e4-5f571e91255a"===e?"msa":"aad";this._telemetryReporter.sendAccountEvent([],n)}}_handleAccountChange({added:e,changed:t,deleted:n}){this._logger.debug(`[_handleAccountChange] added: ${e.length}, changed: ${t.length}, deleted: ${n.length}`),this._onDidChangeSessionsEmitter.fire({added:e.map(this.sessionFromAccountInfo),changed:t.map(this.sessionFromAccountInfo),removed:n.map(this.sessionFromAccountInfo)})}async getSessions(e,t={}){const n=void 0===e,r=new a.ScopeData(e,void 0,t?.authorizationServer);if(this._logger.info("[getSessions]",n?"[all]":`[${r.scopeStr}]`,"starting"),n){const e=new Map;for(const t of this._publicClientManager.getAll())for(const n of t.accounts)e.has(n.homeAccountId)||e.set(n.homeAccountId,this.sessionFromAccountInfo(n));const t=Array.from(e.values());return this._logger.info("[getSessions] [all]",`returned ${t.length} session(s)`),t}const i=await this._publicClientManager.getOrCreate(r.clientId),o=await this.getAllSessionsForPca(i,r,t?.account);return this._logger.info(`[getSessions] [${r.scopeStr}] returned ${o.length} session(s)`),o}async createSession(e,t){const n=new a.ScopeData(e,void 0,t.authorizationServer);this._logger.info("[createSession]",`[${n.scopeStr}]`,"starting");const o=await this._publicClientManager.getOrCreate(n.clientId);let s;const c=i.l10n.t("Yes"),u=i.l10n.t("No"),d=async e=>{if(void 0===s)return;const t=s?i.l10n.t("Having trouble logging in? Would you like to try a different way? ({0})",e):i.l10n.t("You have not yet finished authorizing this extension to use your Microsoft Account. Would you like to try a different way? ({0})",e);if(await i.window.showWarningMessage(t,c,u)!==c)throw new i.CancellationError},h="undefined"!=typeof process&&"string"==typeof process?.versions?.node,f=(0,l.getMsalFlows)({extensionHost:h?this._context.extension.extensionKind===i.ExtensionKind.UI?2:1:0,isBrokerSupported:o.isBrokerAvailable}),p=new URL(n.tenant,this._env.activeDirectoryEndpointUrl).toString();let g;for(const e of f){if(e!==f[0])try{await d(e.label)}finally{this._telemetryReporter.sendLoginFailedEvent()}try{const r=await e.trigger({cachedPca:o,authority:p,scopes:n.scopesToSend,loginHint:t.account?.label,windowHandle:i.window.nativeHandle?Buffer.from(i.window.nativeHandle):void 0,logger:this._logger,uriHandler:this._uriHandler}),s=this.sessionFromAuthenticationResult(r,n.originalScopes);return this._telemetryReporter.sendLoginEvent(s.scopes),this._logger.info("[createSession]",`[${n.scopeStr}]`,"returned session"),s}catch(e){if(g=e,e instanceof r.ServerError||e?.errorCode===r.ClientAuthErrorCodes.userCanceled)throw this._telemetryReporter.sendLoginFailedEvent(),e;e instanceof i.CancellationError&&(s=!0)}}throw this._telemetryReporter.sendLoginFailedEvent(),g??new Error("No auth flow succeeded")}async removeSession(e){this._logger.info("[removeSession]",e,"starting");const t=new Array;for(const n of this._publicClientManager.getAll()){const r=n.accounts;for(const i of r)i.homeAccountId===e&&(this._telemetryReporter.sendLogoutEvent(),t.push(n.removeAccount(i)),this._logger.info(`[removeSession] [${e}] [${n.clientId}] removing session...`))}if(!t.length)return void this._logger.info("[removeSession]",e,"session not found");const n=await Promise.allSettled(t);for(const t of n)"rejected"===t.status&&(this._telemetryReporter.sendLogoutFailedEvent(),this._logger.error("[removeSession]",e,"error removing session",t.reason));this._logger.info("[removeSession]",e,`attempted to remove ${t.length} sessions`)}async getSessionsFromChallenges(e,t){this._logger.info("[getSessionsFromChallenges]","starting with",e.challenges.length,"challenges");const n=this.extractScopesFromChallenges(e.challenges)??e.fallbackScopes;if(!n||0===n.length)throw new Error("No scopes found in authentication challenges or fallback scopes");const r=this.extractClaimsFromChallenges(e.challenges);if(!r)throw new Error("No claims found in authentication challenges");const i=new a.ScopeData(n,r,t?.authorizationServer);this._logger.info("[getSessionsFromChallenges]",`[${i.scopeStr}]`,"with claims:",i.claims);const o=await this._publicClientManager.getOrCreate(i.clientId),s=await this.getAllSessionsForPca(o,i,t?.account);return this._logger.info("[getSessionsFromChallenges]","returning",s.length,"sessions"),s}async createSessionFromChallenges(e,t){this._logger.info("[createSessionFromChallenges]","starting with",e.challenges.length,"challenges");const n=this.extractScopesFromChallenges(e.challenges)??e.fallbackScopes;if(!n||0===n.length)throw new Error("No scopes found in authentication challenges or fallback scopes");const o=this.extractClaimsFromChallenges(e.challenges),s=n.length>0?n:["https://graph.microsoft.com/User.Read"],c=new a.ScopeData(s,o,t.authorizationServer);this._logger.info("[createSessionFromChallenges]",`[${c.scopeStr}]`,"starting with claims:",o);const u=await this._publicClientManager.getOrCreate(c.clientId);let d;const h=i.l10n.t("Yes"),f=i.l10n.t("No"),p=async e=>{if(void 0===d)return;const t=d?i.l10n.t("Having trouble logging in? Would you like to try a different way? ({0})",e):i.l10n.t("You have not yet finished authorizing this extension to use your Microsoft Account. Would you like to try a different way? ({0})",e);if(await i.window.showWarningMessage(t,h,f)!==h)throw new i.CancellationError},g="undefined"!=typeof process&&"string"==typeof process?.versions?.node,m=(0,l.getMsalFlows)({extensionHost:g?this._context.extension.extensionKind===i.ExtensionKind.UI?2:1:0,isBrokerSupported:u.isBrokerAvailable}),v=new URL(c.tenant,this._env.activeDirectoryEndpointUrl).toString();let y;for(const e of m){if(e!==m[0])try{await p(e.label)}finally{this._telemetryReporter.sendLoginFailedEvent()}try{const n={cachedPca:u,authority:v,scopes:c.scopesToSend,loginHint:t.account?.label,windowHandle:i.window.nativeHandle?Buffer.from(i.window.nativeHandle):void 0,logger:this._logger,uriHandler:this._uriHandler,claims:c.claims},r=await e.trigger(n),o=this.sessionFromAuthenticationResult(r,c.originalScopes);return this._telemetryReporter.sendLoginEvent(o.scopes),this._logger.info("[createSessionFromChallenges]",`[${c.scopeStr}]`,"returned session"),o}catch(e){if(y=e,e instanceof r.ClientAuthError&&e.errorCode===r.ClientAuthErrorCodes.userCanceled){this._logger.info("[createSessionFromChallenges]",`[${c.scopeStr}]`,"user cancelled"),d=!0;continue}throw this._logger.error("[createSessionFromChallenges]",`[${c.scopeStr}]`,"error",e),e}}throw this._telemetryReporter.sendLoginFailedEvent(),y??new Error("No auth flow succeeded")}extractScopesFromChallenges(e){for(const t of e)if("bearer"===t.scheme.toLowerCase()&&t.params.scope)return t.params.scope.split(" ")}extractClaimsFromChallenges(e){for(const t of e)if("bearer"===t.scheme.toLowerCase()&&t.params.claims)try{return(0,d.base64Decode)(t.params.claims)}catch(e){this._logger.warn("[extractClaimsFromChallenges]","failed to decode claims... checking if it is already JSON",e);try{return JSON.parse(t.params.claims),t.params.claims}catch(e){this._logger.error("[extractClaimsFromChallenges]","failed to parse claims as JSON... returning undefined",e)}}}async getAllSessionsForPca(e,t,n){let r=n?e.accounts.filter(e=>e.homeAccountId===n.id):e.accounts;const i=new Map;for(const e of r){const t=i.get(e.homeAccountId)||[];t.push(e),i.set(e.homeAccountId,t)}r=Array.from(i.values()).map(e=>{if(1===e.length)return e[0];if(t.tenantId){const n=e.find(e=>e.tenantId===t.tenantId);if(n)return n}return e.find(e=>e.tenantId===e.idTokenClaims?.tid)||e[0]});const o=new URL(t.tenant,this._env.activeDirectoryEndpointUrl).toString(),s=[];return this._eventBufferer.bufferEventsAsync(async()=>{for(const n of r)try{let r,i,a;t.tenantId?n.tenantId!==t.tenantId&&(r=!0):n.tenantId!==n.idTokenClaims?.tid&&(r=!0),t.claims&&(r=!0,i=t.claims),e.isBrokerAvailable&&"darwin"===process.platform&&(a=h.Config.macOSBrokerRedirectUri);const c=await e.acquireTokenSilent({account:n,authority:o,scopes:t.scopesToSend,claims:i,redirectUri:a,forceRefresh:r});s.push(this.sessionFromAuthenticationResult(c,t.originalScopes))}catch(e){this._telemetryReporter.sendTelemetryErrorEvent(e),this._logger.info(`[getAllSessionsForPca] [${t.scopeStr}] [${n.username}] failed to acquire token silently, skipping account`,JSON.stringify(e));continue}return s})}sessionFromAuthenticationResult(e,t){return{accessToken:e.accessToken,idToken:e.idToken,id:e.account?.homeAccountId??e.uniqueId,account:{id:e.account?.homeAccountId??e.uniqueId,label:e.account?.username.toLowerCase()??"Unknown"},scopes:t}}sessionFromAccountInfo(e){return{accessToken:"1234",id:e.homeAccountId,scopes:[],account:{id:e.homeAccountId,label:e.username.toLowerCase()},idToken:e.idToken}}}t.MsalAuthProvider=f},2774:(e,t,n)=>{"use strict";n.d(t,{_:()=>N});var r,i=n(659),o=n(8279),s=n(8205),a=n(269),c=n(9749),u=n(4875),l=n(6182),d=n(4013),h=n(7847),f=n(5034),p=n(4276),g=n(7867),m=n(3775),v=n(3673),y=n(6492),w=n(1356),I=n(8156),A=n(2317),S=n(380),C=function(e){function t(){var n,r,i=e.call(this)||this;function s(){n=0,r=[]}return i.identifier="TelemetryInitializerPlugin",i.priority=199,s(),(0,o.A)(t,i,function(e,t){e.addTelemetryInitializer=function(e){return function(e,t,n){var r={id:t,fn:n};return(0,a.Yny)(e,r),{remove:function(){(0,a.Iuo)(e,function(t,n){if(t.id===r.id)return e[l.Ic](n,1),-1})}}}(r,n++,e)},e[y.qT]=function(t,n){(function(e,t,n){for(var r=!1,i=e[l.oI],o=0;o<i;++o){var s=e[o];if(s)try{if(!1===s.fn[l.y9](null,[t])){r=!0;break}}catch(e){(0,m.ZP)(n,2,64,"Telemetry initializer failed: "+(0,v.lL)(e),{exception:(0,a.mmD)(e)},!0)}}return!r})(r,t,n?n[l.e4]():e[l.e4]())&&e[l.$5](t,n)},e[l.tn]=function(){s()}}),i}return(0,i.qU)(t,e),t.__ieDyn=1,t}(n(8257).s),_=n(836),E=n(8969),T="Plugins must provide initialize method",b="SDK is still unloading...",k=(0,a.ZHX)(((r={cookieCfg:{}})[y.jy]={rdOnly:!0,ref:!0,v:[]},r[y.LZ]={rdOnly:!0,ref:!0,v:[]},r[y.Bw]={ref:!0,v:{}},r[y.Yd]=y.HP,r.loggingLevelConsole=0,r.diagnosticLogInterval=y.HP,r));function P(e,t){return new I.NS(t)}function R(e,t){var n=!1;return(0,a.Iuo)(t,function(t){if(t===e)return n=!0,-1}),n}function O(e,t,n,r){n&&(0,a.zav)(n,function(n,i){r&&(0,a.QdQ)(i)&&(0,a.QdQ)(t[n])&&O(e,t[n],i,r),r&&(0,a.QdQ)(i)&&(0,a.QdQ)(t[n])?O(e,t[n],i,r):e.set(t,n,i)})}function M(e,t){var n=null,r=-1;return(0,a.Iuo)(e,function(e,i){if(e.w===t)return n=e,r=i,-1}),{i:r,l:n}}var N=function(){function e(){var t,n,r,N,D,x,L,U,q,F,H,B,j,$,z,V,K,G,W,X,Y,Q,J,Z,ee,te,ne,re,ie,oe,se,ae;(0,o.A)(e,this,function(e){function o(){ie=!0,(0,a.hXl)(Y)?(te=u.f[l.Yq],(0,m.ZP)(r,1,112,"ikey can't be resolved from promises")):te=u.f.ACTIVE,ce()}function ce(){n&&(e.releaseQueue(),e[l.h4]())}function ue(e){return oe&&oe[l.XM]||ae||(e||r&&r.queue[l.oI]>0)&&(se||(se=!0,Se(t[l.x6](function(e){var t=e.cfg.diagnosticLogInterval;t&&t>0||(t=1e4);var n=!1;oe&&(n=oe[l.XM],oe[l._w]()),(oe=(0,a.AHH)(ve,t)).unref(),oe[l.XM]=n}))),oe[l.XM]=!0),oe}function le(){var e={};Z=[];var t=function(t){t&&(0,a.Iuo)(t,function(t){if(t[l.Ju]&&t[l.s]&&!e[t.identifier]){var n=t[l.Ju]+"="+t[l.s];Z[l.y5](n),e[t.identifier]=t}})};t(B),H&&(0,a.Iuo)(H,function(e){t(e)}),t(F)}function de(){n=!1,(t=(0,c.e)({},k,e[l.Uw])).cfg[l.Bl]=1,(0,a.vF1)(e,"config",{g:function(){return t.cfg},s:function(t){e.updateCfg(t,!1)}}),(0,a.vF1)(e,"pluginVersionStringArr",{g:function(){return Z||le(),Z}}),(0,a.vF1)(e,"pluginVersionString",{g:function(){return ee||(Z||le(),ee=Z.join(";")),ee||y.m5}}),(0,a.vF1)(e,"logger",{g:function(){return r||(r=new m.wq(t.cfg),t[l.Uw]=r),r},s:function(e){t[l.Uw]=e,r!==e&&((0,d.K)(r,!1),r=e)}}),e[l.Uw]=new m.wq(t.cfg),J=[];var i=e.config[y.jy]||[];i.splice(0,i[l.oI]),(0,a.Yny)(i,J),$=new C,N=[],(0,d.K)(D,!1),D=null,x=null,L=null,(0,d.K)(U,!1),U=null,q=null,F=[],H=null,B=null,j=!1,z=null,V=(0,p.Z)("AIBaseCore",!0),K=(0,_.P)(),X=null,Y=null,G=(0,E.w)(),Q=[],ee=null,Z=null,ae=!1,oe=null,se=!1,te=0,ne=null,re=null,ie=!1}function he(){var n=(0,A.i8)(ge(),t.cfg,e);return n[l.by](ue),n}function fe(t){var n=function(e,t,n){var r,i=[],o=[],s={};return(0,a.Iuo)(n,function(n){((0,a.hXl)(n)||(0,a.hXl)(n[l.mE]))&&(0,a.$8)(T);var r=n[y.Vo],c=n[l.Ju];n&&r&&((0,a.hXl)(s[r])?s[r]=c:(0,m.OG)(e,"Two extensions have same priority #"+r+" - "+s[r]+", "+c)),!r||r<t?i[l.y5](n):o[l.y5](n)}),(r={})[y.eT]=i,r[y.LZ]=o,r}(e[l.Uw],h.i,F);q=null,ee=null,Z=null,B=(H||[])[0]||[],B=(0,S.Xc)((0,a.Yny)(B,n[y.LZ]));var r=(0,a.Yny)((0,S.Xc)(n[y.eT]),B);J=(0,a.N6t)(r);var i=e.config[y.jy]||[];i.splice(0,i[l.oI]),(0,a.Yny)(i,J);var o=he();B&&B[l.oI]>0&&(0,S.pI)(o[l.$o](B),r),(0,S.pI)(o,r),t&&we(t)}function pe(e){var t=null,n=null,r=[];return(0,a.Iuo)(J,function(t){if(t[l.Ju]===e&&t!==$)return n=t,-1;t.getChannel&&r[l.y5](t)}),!n&&r[l.oI]>0&&(0,a.Iuo)(r,function(t){if(!(n=t.getChannel(e)))return-1}),n&&(t={plugin:n,setEnabled:function(e){(0,S.Cr)(n)[y.Hr]=!e},isEnabled:function(){var e=(0,S.Cr)(n);return!e[l.Ik]&&!e[y.Hr]},remove:function(e,t){var r;void 0===e&&(e=!0);var i=[n],o=((r={reason:1})[l.tI]=e,r);me(i,o,function(e){e&&fe({reason:32,removed:i}),t&&t(e)})}}),t}function ge(){if(!q){var n=(J||[]).slice();-1===(0,a.rDm)(n,$)&&n[l.y5]($),q=(0,A.PV)((0,S.Xc)(n),t.cfg,e)}return q}function me(n,r,i){if(n&&n[l.oI]>0){var o=(0,A.PV)(n,t.cfg,e),s=(0,A.tS)(o,e);s[l.by](function(){var e=!1,t=[];(0,a.Iuo)(F,function(r,i){R(r,n)?e=!0:t[l.y5](r)}),F=t,ee=null,Z=null;var r=[];H&&((0,a.Iuo)(H,function(t,i){var o=[];(0,a.Iuo)(t,function(t){R(t,n)?e=!0:o[l.y5](t)}),r[l.y5](o)}),H=r),i&&i(e),ue()}),s[l.$5](r)}else i(!1)}function ve(){if(r&&r.queue){var t=r.queue.slice(0);r.queue[l.oI]=0,(0,a.Iuo)(t,function(t){var n,r=((n={})[l.RS]=z||"InternalMessageId: "+t[l.JR],n[l.FI]=Y,n[l.fA]=(0,v._u)(new Date),n.baseType=m.WD.dataType,n.baseData={message:t[l.pM]},n);e.track(r)})}}function ye(e,t,n,r){var i=1,o=!1,s=null;function c(){i--,o&&0===i&&(s&&s[l._w](),s=null,t&&t(o),t=null)}return r=r||5e3,B&&B[l.oI]>0&&he()[l.$o](B).iterate(function(t){if(t.flush){i++;var o=!1;t.flush(e,function(){o=!0,c()},n)||o||(e&&null==s?s=(0,a.dRz)(function(){s=null,c()},r):c())}}),o=!0,c(),!0}function we(t){var n=(0,A.nU)(ge(),e);n[l.by](ue),e._updateHook&&!0===e._updateHook(n,t)||n[l.$5](t)}function Ie(t){var n=e[l.Uw];n?((0,m.ZP)(n,2,73,t),ue()):(0,a.$8)(t)}function Ae(t){var n=e[l.RF]();n&&n[y.Yp]([t],2)}function Se(e){G.add(e)}de(),e._getDbgPlgTargets=function(){return[J,N]},e[l.tZ]=function(){return n},e.activeStatus=function(){return te},e._setPendingStatus=function(){te=3},e[l.mE]=function(d,h,f,p){var w;j&&(0,a.$8)(b),e[l.tZ]()&&(0,a.$8)("Core cannot be initialized more than once"),t=(0,c.e)(d,k,f||e[l.Uw],!1),d=t.cfg,Se(t[l.x6](function(e){var t=e.cfg;if(3!==te){re=t.initInMemoMaxSize||100;var i=t[l.sl],c=t.endpointUrl;if((0,a.hXl)(i)){Y=null,te=u.f[l.Yq];var h="Please provide instrumentation key";n?((0,m.ZP)(r,1,100,h),ce()):(0,a.$8)(h)}else{var f=[];if((0,a.$XS)(i)?(f[l.y5](i),Y=null):Y=i,(0,a.$XS)(c)?(f[l.y5](c),ne=null):ne=c,f[l.oI]){ie=!1,te=3;var p=(0,v.Gh)(t.initTimeOut)?t.initTimeOut:5e4,g=(0,s.lh)(f);(0,a.dRz)(function(){ie||o()},p),(0,s.Dv)(g,function(e){try{if(ie)return;if(!e.rejected){var t=e[l.pF];if(t&&t[l.oI]){var n=t[0];if(Y=n&&n[l.pF],t[l.oI]>1){var r=t[1];ne=r&&r[l.pF]}}Y&&(d[l.sl]=Y,d.endpointUrl=ne)}o()}catch(e){ie||o()}})}else o();var w=e.ref(e.cfg,y.Bw);(0,a.zav)(w,function(t){e.ref(w,t)})}}})),W=function(e,t,n,r){return t.add(e[l.x6](function(e){var t=e.cfg.disableDbgExt;!0===t&&r&&(n[l.h3](r),r=null),n&&!r&&!0!==t&&(r=(0,g.M)(e.cfg),n[l.vR](r))})),r}(t,G,(D=p)&&e[l.RF](),W),Se(t[l.x6](function(t){if(t.cfg.enablePerfMgr){var n=t.cfg[y.Yd];w===n&&w||(n||(n=P),(0,v.c2)(t.cfg,y.Yd,n),w=n,L=null),x||L||!(0,a.Tnt)(n)||(L=n(e,e[l.RF]()))}else L=null,w=null})),e[l.Uw]=f;var I=d[y.jy];if((F=[])[l.y5].apply(F,(0,i.vz)((0,i.vz)([],h,!1),I,!1)),H=d[y.LZ],fe(null),B&&0!==B[l.oI]||(0,a.$8)("No "+y.LZ+" available"),H&&H[l.oI]>1){var A=e[l.AP]("TeeChannelController");A&&A.plugin||(0,m.ZP)(r,1,28,"TeeChannel required")}!function(e,t,n){(0,a.Iuo)(t,function(t){var r=(0,c.a)(e,t.w,n);delete t.w,t.rm=function(){r.rm()}})}(d,Q,r),Q=null,n=!0,te===u.f.ACTIVE&&ce()},e.getChannels=function(){var e=[];return B&&(0,a.Iuo)(B,function(t){e[l.y5](t)}),(0,a.N6t)(e)},e.track=function(t){(0,I.r2)(e[y.kI](),function(){return"AppInsightsCore:track"},function(){null===t&&(Ae(t),(0,a.$8)("Invalid telemetry item")),!t[l.RS]&&(0,a.hXl)(t[l.RS])&&(Ae(t),(0,a.$8)("telemetry name required")),t[l.FI]=t[l.FI]||Y,t[l.fA]=t[l.fA]||(0,v._u)(new Date),t.ver=t.ver||"4.0",!j&&e[l.tZ]()&&te===u.f.ACTIVE?he()[l.$5](t):te!==u.f[l.Yq]&&N[l.oI]<=re&&N[l.y5](t)},function(){return{item:t}},!t.sync)},e[l.DI]=he,e[l.RF]=function(){return D||(D=new w.h(t.cfg),e._notificationManager=D),D},e[l.vR]=function(t){e.getNotifyMgr()[l.vR](t)},e[l.h3]=function(e){D&&D[l.h3](e)},e.getCookieMgr=function(){return U||(U=(0,f.xN)(t.cfg,e[l.Uw])),U},e.setCookieMgr=function(e){U!==e&&((0,d.K)(U,!1),U=e)},e[y.kI]=function(){return x||L||(0,I.Z4)()},e.setPerfMgr=function(e){x=e},e.eventCnt=function(){return N[l.oI]},e.releaseQueue=function(){if(n&&N[l.oI]>0){var e=N;N=[],2===te?(0,a.Iuo)(e,function(e){e[l.FI]=e[l.FI]||Y,he()[l.$5](e)}):(0,m.ZP)(r,2,20,"core init status is not active")}},e[l.h4]=function(e){return z=e||null,ae=!1,oe&&oe[l._w](),ue(!0)},e[l.Di]=function(){ae=!0,oe&&oe[l._w](),ve()},(0,v.o$)(e,function(){return $},["addTelemetryInitializer"]),e[l.M5]=function(t,i,o){var c;void 0===t&&(t=!0),n||(0,a.$8)("SDK is not initialized"),j&&(0,a.$8)(b);var u,h=((c={reason:50})[l.tI]=t,c.flushComplete=!1,c);t&&!i&&(u=(0,s.Qo)(function(e){i=e}));var f=(0,A.tS)(ge(),e);function p(t){h.flushComplete=t,j=!0,K.run(f,h),e[l.Di](),f[l.$5](h)}return f[l.by](function(){G.run(e[l.Uw]),(0,d.k)([U,D,r],t,function(){de(),i&&i(h)})},e),ve(),ye(t,p,6,o)||p(!1),u},e[l.AP]=pe,e.addPlugin=function(e,t,n,r){if(!e)return r&&r(!1),void Ie(T);var i=pe(e[l.Ju]);if(i&&!t)return r&&r(!1),void Ie("Plugin ["+e[l.Ju]+"] is already loaded!");var o={reason:16};function s(t){F[l.y5](e),o.added=[e],fe(o),r&&r(!0)}if(i){var a=[i.plugin];me(a,{reason:2,isAsync:!!n},function(e){e?(o.removed=a,o.reason|=32,s()):r&&r(!1)})}else s()},e.updateCfg=function(n,r){var i;if(void 0===r&&(r=!0),e[l.tZ]()){i={reason:1,cfg:t.cfg,oldCfg:(0,a.zwS)({},t.cfg),newConfig:(0,a.zwS)({},n),merge:r},n=i.newConfig;var o=t.cfg;n[y.jy]=o[y.jy],n[y.LZ]=o[y.LZ]}t._block(function(e){var t=e.cfg;O(e,t,n,r),r||(0,a.zav)(t,function(r){(0,a.KhI)(n,r)||e.set(t,r,y.HP)}),e[l.h0](t,k)},!0),t[l.zs](),i&&we(i)},e.evtNamespace=function(){return V},e.flush=ye,e.getTraceCtx=function(e){return X||(X=(0,S.u7)()),X},e.setTraceCtx=function(e){X=e||null},e.addUnloadHook=Se,(0,v.RF)(e,"addUnloadCb",function(){return K},"add"),e.onCfgChange=function(r){var i,o,s,u;return n?i=(0,c.a)(t.cfg,r,e[l.Uw]):((u=M(o=Q,s=r).l)||(u={w:s,rm:function(){var e=M(o,s);-1!==e.i&&o[l.Ic](e.i,1)}},o[l.y5](u)),i=u),function(e){return(0,a.vF1)({rm:function(){e.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(e)+">"}})}(i)},e.getWParam=function(){return(0,a.Wtk)()||t.cfg.enableWParam?0:-1}})}return e.__ieDyn=1,e}()},2851:(e,t,n)=>{var r=n(181).Buffer;e.exports=function(e){return"string"==typeof e?e:"number"==typeof e||r.isBuffer(e)?e.toString():JSON.stringify(e)}},2861:(e,t,n)=>{var r=n(181),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},2866:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.base64Encode=function(e){return Buffer.from(e,"binary").toString("base64")},t.base64Decode=function(e){return Buffer.from(e,"base64").toString("utf8")}},2910:(e,t,n)=>{"use strict";n.d(t,{a:()=>r});var r=(0,n(4282).o)({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]})},2938:(e,t,n)=>{const r=n(3908);e.exports=(e,t)=>new r(e,t).major},3007:(e,t,n)=>{const r=n(3908);e.exports=(e,t,n,i,o)=>{"string"==typeof n&&(o=i,i=n,n=void 0);try{return new r(e instanceof r?e.version:e,n).inc(t,i,o).version}catch(e){return null}}},3034:(e,t,n)=>{"use strict";let r;Object.defineProperty(t,"__esModule",{value:!0});try{r=n(4482).net.fetch}catch{r=fetch}t.default=r},3072:(e,t,n)=>{"use strict";n.d(t,{J:()=>s});var r=n(5025),i=n(5130),o=n(7975),s=function(){function e(e,t,n,s){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var a=this;a.ver=2,a[i.RS]=(0,o.Rr)(e,t)||r.R2,a[i.$y]=(0,o.xP)(e,n),a[i.XA]=(0,o.Vj)(e,s)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Event",e.dataType="EventData",e}()},3208:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(1525)),i=o(n(8435));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)("v3",48,i.default);t.default=s},3217:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0,t.Config={macOSBrokerRedirectUri:"msauth.com.microsoft.VSCode.helper://auth"}},3226:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CachedPublicClientApplicationManager=void 0;const r=n(1398),i=n(6244),o=n(3310),s=n(3217),a=n(8016);class c{_env;_pcasSecretStorage;_accountAccess;_secretStorage;_logger;_telemetryReporter;_pcas=new Map;_pcaDisposables=new Map;_disposable;_onDidAccountsChangeEmitter=new r.EventEmitter;onDidAccountsChange=this._onDidAccountsChangeEmitter.event;constructor(e,t,n,i,o,s,a){this._env=e,this._pcasSecretStorage=t,this._accountAccess=n,this._secretStorage=i,this._logger=o,this._telemetryReporter=s,this._disposable=r.Disposable.from(...a,this._registerSecretStorageHandler(),this._onDidAccountsChangeEmitter)}static async create(e,t,n,r){const i=await u.create(e,r.name),s=await i.getOldValue(),a=await o.ScopedAccountAccess.create(e,r.name,t,s),l=new c(r,i,a,e,t,n,[i,a]);return await l.initialize(),l}_registerSecretStorageHandler(){return this._pcasSecretStorage.onDidChange(()=>this._handleSecretStorageChange())}async initialize(){let e;this._logger.debug("[initialize] Initializing PublicClientApplicationManager");try{e=await this._pcasSecretStorage.get()}catch(e){this._logger.error("[initialize] Error initializing PublicClientApplicationManager:",e),await this._pcasSecretStorage.delete()}if(!e)return;const t=new Array;for(const n of e)try{t.push(this._doCreatePublicClientApplication(n))}catch(e){this._logger.error("[initialize] Error intitializing PCA:",n)}const n=await Promise.allSettled(t);let r=!1;for(const e of n)if("rejected"===e.status)this._logger.error("[initialize] Error getting PCA:",e.reason);else if(!e.value.accounts.length){r=!0;const t=e.value.clientId;this._pcaDisposables.get(t)?.dispose(),this._pcaDisposables.delete(t),this._pcas.delete(t),this._logger.debug(`[initialize] [${t}] PCA disposed because it's empty.`)}r&&await this._storePublicClientApplications(),this._logger.debug("[initialize] PublicClientApplicationManager initialized")}dispose(){this._disposable.dispose(),r.Disposable.from(...this._pcaDisposables.values()).dispose()}async getOrCreate(e,t){let n=this._pcas.get(e);if(n?this._logger.debug(`[getOrCreate] [${e}] PublicClientApplicationManager cache hit`):(this._logger.debug(`[getOrCreate] [${e}] PublicClientApplicationManager cache miss, creating new PCA...`),n=await this._doCreatePublicClientApplication(e),await this._storePublicClientApplications(),this._logger.debug(`[getOrCreate] [${e}] PCA created.`)),t?.refreshTokensToMigrate?.length){this._logger.debug(`[getOrCreate] [${e}] Migrating refresh tokens to PCA...`);const r=new URL(t.tenant,this._env.activeDirectoryEndpointUrl).toString();let i=a.DEFAULT_REDIRECT_URI;n.isBrokerAvailable&&"darwin"===process.platform&&(i=s.Config.macOSBrokerRedirectUri);for(const o of t.refreshTokensToMigrate)try{const t=await n.acquireTokenByRefreshToken({refreshToken:o,forceCache:!0,scopes:[],authority:r,redirectUri:i});t?.account&&this._logger.debug(`[getOrCreate] [${e}] Refresh token migrated to PCA.`)}catch(t){this._logger.error(`[getOrCreate] [${e}] Error migrating refresh token:`,t)}}return n}async _doCreatePublicClientApplication(e){const t=await i.CachedPublicClientApplication.create(e,this._secretStorage,this._accountAccess,this._logger,this._telemetryReporter);this._pcas.set(e,t);const n=r.Disposable.from(t,t.onDidAccountsChange(e=>this._onDidAccountsChangeEmitter.fire(e)),t.onDidRemoveLastAccount(()=>{n.dispose(),this._pcaDisposables.delete(e),this._pcas.delete(e),this._logger.debug(`[_doCreatePublicClientApplication] [${e}] PCA disposed. Firing off storing of PCAs...`),this._storePublicClientApplications()}));return this._pcaDisposables.set(e,n),t.accounts.length>0&&this._onDidAccountsChangeEmitter.fire({added:t.accounts,changed:[],deleted:[]}),t}getAll(){return Array.from(this._pcas.values())}async _handleSecretStorageChange(){let e;this._logger.debug("[_handleSecretStorageChange] Handling PCAs secret storage change...");try{e=await this._pcasSecretStorage.get()}catch(e){return void await this._storePublicClientApplications()}if(!e)return this._logger.debug("[_handleSecretStorageChange] PCAs deleted in secret storage. Disposing all..."),r.Disposable.from(...this._pcaDisposables.values()).dispose(),this._pcas.clear(),this._pcaDisposables.clear(),void this._logger.debug("[_handleSecretStorageChange] Finished PCAs secret storage change.");const t=new Set(e);for(const e of this._pcas.keys())t.delete(e)||this._logger.debug(`[_handleSecretStorageChange] PCA was deleted in another window: ${e}`);for(const e of t)try{this._logger.debug(`[_handleSecretStorageChange] [${e}] Creating new PCA that was created in another window...`),await this._doCreatePublicClientApplication(e),this._logger.debug(`[_handleSecretStorageChange] [${e}] PCA created.`)}catch(t){this._logger.error(`Failed to create new PublicClientApplication: ${e}`);continue}this._logger.debug("[_handleSecretStorageChange] Finished handling PCAs secret storage change.")}_storePublicClientApplications(){return this._pcasSecretStorage.store(Array.from(this._pcas.keys()))}}t.CachedPublicClientApplicationManager=c;class u{_secretStorage;_cloudName;_disposable;_onDidChangeEmitter=new r.EventEmitter;onDidChange=this._onDidChangeEmitter.event;_oldKey;_key;constructor(e,t){this._secretStorage=e,this._cloudName=t,this._oldKey=`publicClientApplications-${this._cloudName}`,this._key=`publicClients-${this._cloudName}`,this._disposable=r.Disposable.from(this._onDidChangeEmitter,this._secretStorage.onDidChange(e=>{e.key===this._key&&this._onDidChangeEmitter.fire()}))}static async create(e,t){const n=new u(e,t);return await n.initialize(),n}async initialize(){const e=await this.getOldValue();if(!e)return;const t=await this.get()??[];for(const{clientId:n}of e)t.includes(n)||t.push(n);await this.store(t)}async get(){const e=await this._secretStorage.get(this._key);if(e)return JSON.parse(e)}async getOldValue(){const e=await this._secretStorage.get(this._oldKey);if(!e)return;const t=[];for(const n of JSON.parse(e)){const e=JSON.parse(n);e.clientId&&e.authority&&t.push(e)}return t}store(e){return this._secretStorage.store(this._key,JSON.stringify(e))}delete(){return this._secretStorage.delete(this._key)}dispose(){this._disposable.dispose()}}},3310:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScopedAccountAccess=void 0;const r=n(1398);class i{_accountAccessSecretStorage;_onDidAccountAccessChangeEmitter=new r.EventEmitter;onDidAccountAccessChange=this._onDidAccountAccessChangeEmitter.event;value=new Array;_disposable;constructor(e,t=[]){this._accountAccessSecretStorage=e,this._disposable=r.Disposable.from(...t,this._onDidAccountAccessChangeEmitter,this._accountAccessSecretStorage.onDidChange(()=>this.update()))}static async create(e,t,n,r){const s=await o.create(e,t,n,r),a=new i(s,[s]);return await a.initialize(),a}dispose(){this._disposable.dispose()}async initialize(){await this.update()}isAllowedAccess(e){return this.value.includes(e.homeAccountId)}async setAllowedAccess(e,t){if(t){if(this.value.includes(e.homeAccountId))return;await this._accountAccessSecretStorage.store([...this.value,e.homeAccountId])}else await this._accountAccessSecretStorage.store(this.value.filter(t=>t!==e.homeAccountId))}async update(){const e=new Set(this.value),t=await this._accountAccessSecretStorage.get();this.value=t??[],e.size===this.value.length&&this.value.every(t=>e.has(t))||this._onDidAccountAccessChangeEmitter.fire()}}t.ScopedAccountAccess=i;class o{_secretStorage;_cloudName;_logger;_migrations;_disposable;_onDidChangeEmitter=new r.EventEmitter;onDidChange=this._onDidChangeEmitter.event;_key;constructor(e,t,n,i){this._secretStorage=e,this._cloudName=t,this._logger=n,this._migrations=i,this._key=`accounts-${this._cloudName}`,this._disposable=r.Disposable.from(this._onDidChangeEmitter,this._secretStorage.onDidChange(e=>{e.key===this._key&&this._onDidChangeEmitter.fire()}))}static async create(e,t,n,r){const i=new o(e,t,n,r);return await i.initialize(),i}async initialize(){if(this._migrations&&!await this.get())try{const e=new Set;for(const{clientId:t,authority:n}of this._migrations){const r=`accounts-${this._cloudName}-${t}-${n}`,i=await this._secretStorage.get(r);i&&JSON.parse(i).forEach(t=>e.add(t))}e.size>0&&await this.store(Array.from(e))}catch(e){this._logger.error(`Failed to migrate account access secret storage: ${e}`)}}async get(){const e=await this._secretStorage.get(this._key);if(e)return JSON.parse(e)}store(e){return this._secretStorage.store(this._key,JSON.stringify(e))}delete(){return this._secretStorage.delete(this._key)}dispose(){this._disposable.dispose()}}},3358:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(1525)),i=o(n(622));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)("v5",80,i.default);t.default=s},3387:(e,t,n)=>{var r=n(2861).Buffer,i=n(8948),o=n(8789),s=n(2203),a=n(2851),c=n(9023);function u(e,t){return r.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function l(e){var t=e.header,n=e.payload,r=e.secret||e.privateKey,i=e.encoding,s=o(t.alg),l=function(e,t,n){n=n||"utf8";var r=u(a(e),"binary"),i=u(a(t),n);return c.format("%s.%s",r,i)}(t,n,i),d=s.sign(l,r);return c.format("%s.%s",l,d)}function d(e){var t=e.secret||e.privateKey||e.key,n=new i(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=n,this.payload=new i(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}c.inherits(d,s),d.prototype.sign=function(){try{var e=l({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},d.sign=l,e.exports=d},3518:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SecretStorageCachePlugin=void 0;const r=n(1398);t.SecretStorageCachePlugin=class{_secretStorage;_key;_onDidChange=new r.EventEmitter;onDidChange=this._onDidChange.event;_disposable;_value;constructor(e,t){this._secretStorage=e,this._key=t,this._disposable=r.Disposable.from(this._onDidChange,this._registerChangeHandler())}_registerChangeHandler(){return this._secretStorage.onDidChange(e=>{e.key===this._key&&this._onDidChange.fire()})}async beforeCacheAccess(e){const t=await this._secretStorage.get(this._key);this._value=t,t&&e.tokenCache.deserialize(t)}async afterCacheAccess(e){if(e.cacheHasChanged){const t=e.tokenCache.serialize();t!==this._value&&await this._secretStorage.store(this._key,t)}}dispose(){this._disposable.dispose()}}},3527:e=>{"use strict";function t(e){return(e/8|0)+(e%8==0?0:1)}var n={ES256:t(256),ES384:t(384),ES512:t(521)};e.exports=function(e){var t=n[e];if(t)return t;throw new Error('Unknown algorithm "'+e+'"')}},3563:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMsalFlows=function(e){const t=[];for(const n of a){let r=!0;switch(e.extensionHost){case 1:r&&=n.options.supportsRemoteExtensionHost;break;case 0:r&&=n.options.supportsWebWorkerExtensionHost}if(r&&(t.push(n),e.isBrokerSupported))return t}return t};const r=n(1398),i=n(583),o=n(215),s=n(3217),a=[new class{label="default";options={supportsRemoteExtensionHost:!1,supportsWebWorkerExtensionHost:!1};async trigger({cachedPca:e,authority:t,scopes:n,claims:i,loginHint:a,windowHandle:c,logger:u}){let l;return u.info("Trying default msal flow..."),e.isBrokerAvailable&&"darwin"===process.platform&&(l=s.Config.macOSBrokerRedirectUri),await e.acquireTokenInteractive({openBrowser:async e=>{await r.env.openExternal(r.Uri.parse(e))},scopes:n,authority:t,successTemplate:o.loopbackTemplate,errorTemplate:o.loopbackTemplate,loginHint:a,prompt:a?void 0:"select_account",windowHandle:c,claims:i,redirectUri:l})}},new class{label="protocol handler";options={supportsRemoteExtensionHost:!0,supportsWebWorkerExtensionHost:!1};async trigger({cachedPca:e,authority:t,scopes:n,claims:r,loginHint:o,windowHandle:a,logger:c,uriHandler:u}){c.info("Trying protocol handler flow...");const l=new i.UriHandlerLoopbackClient(u,"https://vscode.dev/redirect",c);let d;return e.isBrokerAvailable&&"darwin"===process.platform&&(d=s.Config.macOSBrokerRedirectUri),await e.acquireTokenInteractive({openBrowser:e=>l.openBrowser(e),scopes:n,authority:t,loopbackClient:l,loginHint:o,prompt:o?void 0:"select_account",windowHandle:a,claims:r,redirectUri:d})}}]},3639:e=>{var t=Object.prototype.toString;e.exports=function(e){return"number"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Number]"==t.call(e)}},3662:(e,t,n)=>{"use strict";n.d(t,{x:()=>i});var r=n(4282),i=(0,r.H)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5});(0,r.H)({Unknown:0,NonRetryableStatus:1,CleanStorage:2,MaxInStorageTimeExceeded:3})},3673:(e,t,n)=>{"use strict";n.d(t,{CP:()=>C,Gh:()=>l,H$:()=>O,HU:()=>E,IL:()=>M,Ju:()=>h,KY:()=>g,LU:()=>N,Lo:()=>_,RF:()=>w,SZ:()=>A,_u:()=>f,c2:()=>m,cH:()=>d,hW:()=>S,jL:()=>b,lL:()=>p,o$:()=>I,qz:()=>y,r4:()=>T,w3:()=>U});var r=n(269),i=n(5664),o=n(6182),s=n(6492),a=/-([a-z])/g,c=/([^\w\d_$])/g,u=/^(\d+[\w\d_$])/;function l(e){return!(0,r.hXl)(e)}function d(e){var t=e;return t&&(0,r.KgX)(t)&&(t=(t=(t=t[o.W7](a,function(e,t){return t.toUpperCase()}))[o.W7](c,"_"))[o.W7](u,function(e,t){return"_"+t})),t}function h(e,t){return!(!e||!t)&&-1!==(0,r.HzD)(e,t)}function f(e){return e&&e.toISOString()||""}function p(e){return(0,r.bJ7)(e)?e[o.RS]:s.m5}function g(e,t,n,r,i){var o=n;return e&&((o=e[t])===n||i&&!i(o)||r&&!r(n)||(o=n,e[t]=o)),o}function m(e,t,n){var i;return e?!(i=e[t])&&(0,r.hXl)(i)&&(i=(0,r.b07)(n)?{}:n,e[t]=i):i=(0,r.b07)(n)?{}:n,i}function v(e,t){var n=null,i=null;return(0,r.Tnt)(e)?n=e:i=e,function(){var e=arguments;if(n&&(i=n()),i)return i[t][o.y9](i,e)}}function y(e,t,n){if(e&&t&&(0,r.Gvm)(e)&&(0,r.Gvm)(t)){var i=function(i){if((0,r.KgX)(i)){var o=t[i];(0,r.Tnt)(o)?n&&!n(i,!0,t,e)||(e[i]=v(t,i)):n&&!n(i,!1,t,e)||((0,r.KhI)(e,i)&&delete e[i],(0,r.vF1)(e,i,{g:function(){return t[i]},s:function(e){t[i]=e}}))}};for(var o in t)i(o)}return e}function w(e,t,n,i,o){e&&t&&n&&(!1!==o||(0,r.b07)(e[t]))&&(e[t]=v(n,i))}function I(e,t,n,i){return e&&t&&(0,r.Gvm)(e)&&(0,r.cyL)(n)&&(0,r.Iuo)(n,function(n){(0,r.KgX)(n)&&w(e,n,t,n,i)}),e}function A(e){return function(){var t=this;e&&(0,r.zav)(e,function(e,n){t[e]=n})}}function S(e){return e&&r.vE3&&(e=(0,i.s6)((0,r.vE3)({},e))),e}function C(e,t,n,i,s,a){var c=arguments,u=c[0]||{},l=c[o.oI],d=!1,h=1;for(l>0&&(0,r.Lmq)(u)&&(d=u,u=c[h]||{},h++),(0,r.Gvm)(u)||(u={});h<l;h++){var f=c[h],p=(0,r.cyL)(f),g=(0,r.Gvm)(f);for(var m in f)if(p&&m in f||g&&(0,r.KhI)(f,m)){var v=f[m],y=void 0;if(d&&v&&((y=(0,r.cyL)(v))||(0,r.QdQ)(v))){var w=u[m];y?(0,r.cyL)(w)||(w=[]):(0,r.QdQ)(w)||(w={}),v=C(d,w,v)}void 0!==v&&(u[m]=v)}}return u}function _(e){try{return e.responseText}catch(e){}return null}function E(e,t){return e?"XDomainRequest,Response:"+_(e)||0:t}function T(e,t){return e?"XMLHttpRequest,Status:"+e[o.cV]+",Response:"+_(e)||0:t}function b(e,t){return t&&((0,r.EtT)(t)?e=[t].concat(e):(0,r.cyL)(t)&&(e=t.concat(e))),e}Object.getPrototypeOf;var k="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",P="withCredentials",R="timeout";function O(e,t,n,r,i,o){function s(e,t,n){try{e[t]=n}catch(e){}}void 0===r&&(r=!1),void 0===i&&(i=!1);var a=new XMLHttpRequest;return r&&s(a,k,r),n&&s(a,P,n),a.open(e,t,!i),n&&s(a,P,n),!i&&o&&s(a,R,o),a}function M(e){var t={};if((0,r.KgX)(e)){var n=(0,r.EHq)(e)[o.sY](/[\r\n]+/);(0,r.Iuo)(n,function(e){if(e){var n=e.indexOf(": ");if(-1!==n){var i=(0,r.EHq)(e.substring(0,n))[o.OL](),s=(0,r.EHq)(e.substring(n+1));t[i]=s}else t[(0,r.EHq)(e)]=1}})}return t}function N(e,t,n){if(!e[n]&&t&&t[o.Az]){var i=t[o.Az](n);i&&(e[n]=(0,r.EHq)(i))}return e}var D="kill-duration",x="kill-duration-seconds",L="time-delta-millis";function U(e,t){var n={};return e[o.wJ]?n=M(e[o.wJ]()):t&&(n=N(n,e,L),n=N(n,e,D),n=N(n,e,x)),n}},3683:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.UriEventHandler=void 0;const a=s(n(1398));class c extends a.EventEmitter{_disposable=a.window.registerUriHandler(this);handleUri(e){this.fire(e)}dispose(){super.dispose(),this._disposable.dispose()}}t.UriEventHandler=c},3726:(e,t,n)=>{var r=n(1741),i=function(e,t){r.call(this,e),this.name="NotBeforeError",this.date=t};(i.prototype=Object.create(r.prototype)).constructor=i,e.exports=i},3775:(e,t,n)=>{"use strict";n.d(t,{OG:()=>A,Oc:()=>S,WD:()=>m,ZP:()=>I,wq:()=>y,y0:()=>v});var r,i=n(8279),o=n(269),s=n(9749),a=n(6182),c=n(7867),u=n(7292),l=n(6492),d="warnToConsole",h={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},f=((r={})[0]=null,r[1]="errorToConsole",r[2]=d,r[3]="debugToConsole",r);function p(e){return e?'"'+e[a.W7](/\"/g,l.m5)+'"':l.m5}function g(e,t){var n=(0,u.U5)();if(n){var r="log";n[e]&&(r=e),(0,o.Tnt)(n[r])&&n[r](t)}}var m=function(){function e(e,t,n,r){void 0===n&&(n=!1);var i=this;i[a.JR]=e,i[a.pM]=(n?"AI: ":"AI (Internal): ")+e;var o=l.m5;(0,u.Z)()&&(o=(0,u.hm)().stringify(r));var s=(t?" message:"+p(t):l.m5)+(r?" props:"+p(o):l.m5);i[a.pM]+=s}return e.dataType="MessageData",e}();function v(e,t){return(e||{})[a.Uw]||new y(t)}var y=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n,r,u,l,p,v=0,y={};(0,i.A)(e,this,function(e){function i(t,n){if(!(v>=u)){var i=!0,o="AITR_"+n[a.JR];if(y[o]?i=!1:y[o]=!0,i&&(t<=r&&(e.queue[a.y5](n),v++,w(1===t?"error":"warn",n)),v===u)){var s="Internal events throttle limit per PageView reached for this app.",c=new m(23,s,!1);e.queue[a.y5](c),1===t?e.errorToConsole(s):e[a.on](s)}}}function w(e,n){var r=(0,c.$)(t||{});r&&r[a.e4]&&r[a.e4](e,n)}p=function(t){return(0,s.a)((0,s.e)(t,h,e).cfg,function(e){var t=e.cfg;n=t[a.Bl],r=t.loggingLevelTelemetry,u=t.maxMessageLimit,l=t.enableDebug})}(t||{}),e.consoleLoggingLevel=function(){return n},e[a.ih]=function(t,r,s,c,u){void 0===u&&(u=!1);var h=new m(r,s,u,c);if(l)throw(0,o.mmD)(h);var p=f[t]||d;if((0,o.b07)(h[a.pM]))w("throw"+(1===t?"Critical":"Warning"),h);else{if(u){var g=+h[a.JR];!y[g]&&n>=t&&(e[p](h[a.pM]),y[g]=!0)}else n>=t&&e[p](h[a.pM]);i(t,h)}},e.debugToConsole=function(e){g("debug",e),w("warning",e)},e[a.on]=function(e){g("warn",e),w("warning",e)},e.errorToConsole=function(e){g("error",e),w("error",e)},e.resetInternalMessageCount=function(){v=0,y={}},e[a.sx]=i,e[a.M5]=function(e){p&&p.rm(),p=null}})}return e.__ieDyn=1,e}();function w(e){return e||new y}function I(e,t,n,r,i,o){void 0===o&&(o=!1),w(e)[a.ih](t,n,r,i,o)}function A(e,t){w(e)[a.on](t)}function S(e,t,n){w(e)[a.sx](t,n)}},3874:(e,t,n)=>{const r=n(8311);e.exports=(e,t)=>{try{return new r(e,t).range||"*"}catch(e){return null}}},3904:(e,t,n)=>{const r=Symbol("SemVer ANY");class i{static get ANY(){return r}constructor(e,t){if(t=o(t),e instanceof i){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===r?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?s[a.COMPARATORLOOSE]:s[a.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new l(n[2],this.options.loose):this.semver=r}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===r||e===r)return!0;if("string"==typeof e)try{e=new l(e,this.options)}catch(e){return!1}return c(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):!((t=o(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!e.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!e.operator.startsWith("<"))&&(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))&&!(c(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))&&!(c(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}}e.exports=i;const o=n(8587),{safeRe:s,t:a}=n(9718),c=n(2111),u=n(7272),l=n(3908),d=n(8311)},3908:(e,t,n)=>{const r=n(7272),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=n(6874),{safeRe:s,t:a}=n(9718),c=n(8587),{compareIdentifiers:u}=n(1123);class l{constructor(e,t){if(t=c(t),e instanceof l){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?s[a.LOOSE]:s[a.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<o)return t}return e}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof l)){if("string"==typeof e&&e===this.version)return 0;e=new l(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof l||(e=new l(e,this.options)),u(this.major,e.major)||u(this.minor,e.minor)||u(this.patch,e.patch)}comparePre(e){if(e instanceof l||(e=new l(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return u(n,i)}while(++t)}compareBuild(e){e instanceof l||(e=new l(e,this.options));let t=0;do{const n=this.build[t],i=e.build[t];if(r("build compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return u(n,i)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(n)?1:0;if(!t&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let r=this.prerelease.length;for(;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);if(-1===r){if(t===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let r=[t,e];!1===n&&(r=[t]),0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=r):this.prerelease=r}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=l},3927:(e,t,n)=>{const r=n(909);e.exports=(e,t)=>e.sort((e,n)=>r(e,n,t))},3999:(e,t,n)=>{const r=n(560);e.exports=(e,t,n)=>0!==r(e,t,n)},4013:(e,t,n)=>{"use strict";n.d(t,{K:()=>s,k:()=>a});var r=n(8205),i=n(269),o=n(6182);function s(e,t){if(e&&e[o.M5])return e[o.M5](t)}function a(e,t,n){var o;return n||(o=(0,r.Qo)(function(e){n=e})),e&&(0,i.R3R)(e)>0?(0,r.Dv)(s(e[0],t),function(){a((0,i.KVm)(e,1),t,n)}):n(),o}},4040:(e,t,n)=>{e.exports={decode:n(7260),verify:n(1691),sign:n(7651),JsonWebTokenError:n(1741),NotBeforeError:n(3726),TokenExpiredError:n(8980)}},4061:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(9614)),i=o(n(2298));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,n){const o=(e=e||{}).random||(e.rng||r.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=o[e];return t}return(0,i.default)(o)}},4089:(e,t,n)=>{const r=n(560);e.exports=(e,t,n)=>r(e,t,n)>=0},4164:(e,t,n)=>{"use strict";n.d(t,{H:()=>s});var r=n(5025),i=n(5130),o=n(7975),s=function(){function e(e,t,n,s,a,c,u){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var l=this;l.ver=2,l.url=(0,o.pJ)(e,n),l[i.RS]=(0,o.Rr)(e,t)||r.R2,l[i.$y]=(0,o.xP)(e,a),l[i.XA]=(0,o.Vj)(e,c),u&&(l.domProcessing=u.domProcessing,l[i.qd]=u[i.qd],l.networkConnect=u.networkConnect,l.perfTotal=u.perfTotal,l[i.fd]=u[i.fd],l.sentRequest=u.sentRequest)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",e.dataType="PageviewPerformanceData",e}()},4276:(e,t,n)=>{"use strict";n.d(t,{T:()=>f,Z:()=>h});var r=n(269),i=n(6182),o=n(3673),s=n(6492),a=n(6535),c="3.3.4",u="."+(0,a.Si)(6),l=0;function d(e){return 1===e[i.re]||9===e[i.re]||!+e[i.re]}function h(e,t){return void 0===t&&(t=!1),(0,o.cH)(e+l+++(t?"."+c:s.m5)+u)}function f(e){var t={id:h("_aiData-"+(e||s.m5)+"."+c),accept:function(e){return d(e)},get:function(e,n,i,s){var a=e[t.id];return a?a[(0,o.cH)(n)]:(s&&(a=function(e,t){var n=t[e.id];if(!n){n={};try{d(t)&&(0,r.vF1)(t,e.id,{e:!1,v:n})}catch(e){}}return n}(t,e),a[(0,o.cH)(n)]=i),i)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch(e){}}};return t}},4277:(e,t,n)=>{const r=n(909);e.exports=(e,t)=>e.sort((e,n)=>r(n,e,t))},4282:(e,t,n)=>{"use strict";n.d(t,{H:()=>i,o:()=>o});var r=n(269),i=r.WSA,o=r.fn0},4482:e=>{"use strict";e.exports=require("electron")},4484:(e,t,n)=>{"use strict";n.d(t,{F:()=>u,H:()=>c});var r=n(269),i=n(5025),o=n(5130),s=";",a="=";function c(e){if(!e)return{};var t=e[o.sY](s),n=(0,r.KTd)(t,function(e,t){var n=t[o.sY](a);if(2===n[o.oI]){var r=n[0][o.OL](),i=n[1];e[r]=i}return e},{});if((0,r.cGk)(n)[o.oI]>0){if(n.endpointsuffix){var c=n.location?n.location+".":"";n[o.zV]=n[o.zV]||"https://"+c+"dc."+n.endpointsuffix}n[o.zV]=n[o.zV]||i._G,(0,r.Cv9)(n[o.zV],"/")&&(n[o.zV]=n[o.zV].slice(0,-1))}return n}var u={parse:c}},4493:(e,t,n)=>{const r=n(3908);e.exports=(e,t)=>new r(e,t).patch},4539:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventBufferer=void 0,t.EventBufferer=class{data=[];wrapEvent(e,t,n){return(r,i,o)=>e(e=>{const o=this.data[this.data.length-1];if(!t)return void(o?o.buffers.push(()=>r.call(i,e)):r.call(i,e));const s=o;s?(s.items??=[],s.items.push(e),0===s.buffers.length&&o.buffers.push(()=>{s.reducedResult??=n?s.items.reduce(t,n):s.items.reduce(t),r.call(i,s.reducedResult)})):r.call(i,t(n,e))},void 0,o)}bufferEvents(e){const t={buffers:new Array};this.data.push(t);const n=e();return this.data.pop(),t.buffers.forEach(e=>e()),n}async bufferEventsAsync(e){const t={buffers:new Array};this.data.push(t);try{return await e()}finally{this.data.pop(),t.buffers.forEach(e=>e())}}}},4623:(e,t,n)=>{const r=n(9589);e.exports=r.satisfies(process.version,">=16.9.0")},4641:(e,t,n)=>{const r=n(560);e.exports=(e,t,n)=>0===r(e,t,n)},4658:(e,t,n)=>{"use strict";n.d(t,{AN:()=>A,BW:()=>v,Dt:()=>_,Nu:()=>p,Se:()=>y,T9:()=>S,_M:()=>w,iw:()=>m,tm:()=>I,v7:()=>E,vH:()=>C,vh:()=>g});var r=n(269),i=n(3775),o=n(3673),s=n(7374),a=n(5130),c=void 0,u=void 0,l="";function d(){return v()?h(s.eL.LocalStorage):null}function h(e){try{if((0,r.hXl)((0,r.mS$)()))return null;var t=(new Date)[a.xE](),n=(0,r.zS2)(e===s.eL.LocalStorage?"localStorage":"sessionStorage"),i=l+t;n.setItem(i,t);var o=n.getItem(i)!==t;if(n[a.AZ](i),!o)return n}catch(e){}return null}function f(){return A()?h(s.eL.SessionStorage):null}function p(){c=!1,u=!1}function g(e){l=e||""}function m(){c=v(!0),u=A(!0)}function v(e){return(e||void 0===c)&&(c=!!h(s.eL.LocalStorage)),c}function y(e,t){var n=d();if(null!==n)try{return n.getItem(t)}catch(t){c=!1,(0,i.ZP)(e,2,1,"Browser failed read of local storage. "+(0,o.lL)(t),{exception:(0,r.mmD)(t)})}return null}function w(e,t,n){var s=d();if(null!==s)try{return s.setItem(t,n),!0}catch(t){c=!1,(0,i.ZP)(e,2,3,"Browser failed write to local storage. "+(0,o.lL)(t),{exception:(0,r.mmD)(t)})}return!1}function I(e,t){var n=d();if(null!==n)try{return n[a.AZ](t),!0}catch(t){c=!1,(0,i.ZP)(e,2,5,"Browser failed removal of local storage item. "+(0,o.lL)(t),{exception:(0,r.mmD)(t)})}return!1}function A(e){return(e||void 0===u)&&(u=!!h(s.eL.SessionStorage)),u}function S(){var e=[];return A()&&(0,r.zav)((0,r.zS2)("sessionStorage"),function(t){e[a.y5](t)}),e}function C(e,t){var n=f();if(null!==n)try{return n.getItem(t)}catch(t){u=!1,(0,i.ZP)(e,2,2,"Browser failed read of session storage. "+(0,o.lL)(t),{exception:(0,r.mmD)(t)})}return null}function _(e,t,n){var s=f();if(null!==s)try{return s.setItem(t,n),!0}catch(t){u=!1,(0,i.ZP)(e,2,4,"Browser failed write to session storage. "+(0,o.lL)(t),{exception:(0,r.mmD)(t)})}return!1}function E(e,t){var n=f();if(null!==n)try{return n[a.AZ](t),!0}catch(t){u=!1,(0,i.ZP)(e,2,6,"Browser failed removal of session storage item. "+(0,o.lL)(t),{exception:(0,r.mmD)(t)})}return!1}},4822:(e,t,n)=>{"use strict";n.d(t,{EO:()=>A,F2:()=>D,Go:()=>E,H$:()=>x,Hh:()=>C,P$:()=>w,Rx:()=>l,TC:()=>_,UM:()=>T,WB:()=>P,X$:()=>k,cq:()=>N,ei:()=>L,g8:()=>y,gj:()=>b,h3:()=>S,m0:()=>R,u9:()=>M,wJ:()=>O,xE:()=>d,yD:()=>I});var r,i=n(269),o=n(7292),s=n(9882),a=n(5664),c=n(937),u=n(1739),l="4.3.4",d="1DS-Web-JS-"+l,h=a.Wy.hasOwnProperty,f="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",p="withCredentials",g="timeout",m=((r={})[0]=0,r[2]=6,r[1]=1,r[3]=7,r[4098]=6,r[4097]=1,r[4099]=7,r),v=null,y=(0,i.Wtk)(),w=(0,i.Vdv)();function I(e){return!(e===c.m5||(0,i.hXl)(e))}function A(e){if(e){var t=(0,i.HzD)(e,"-");if(t>-1)return(0,i.ZWZ)(e,t)}return c.m5}function S(){return null===v&&(v=!(0,i.b07)(Uint8Array)&&!function(){var e=(0,i.w3n)();if(!(0,i.b07)(e)&&e.userAgent){var t=e.userAgent.toLowerCase();if((t[u.Sj]("safari")>=0||t[u.Sj]("firefox")>=0)&&t[u.Sj]("chrome")<0)return!0}return!1}()&&!(0,o.lV)()),v}function C(e){return!!(e&&(0,i.EtT)(e)&&e>=1&&e<=4)}function _(e,t,n){if(!t&&!I(t)||"string"!=typeof e)return null;var r=typeof t;if("string"===r||"number"===r||"boolean"===r||(0,i.cyL)(t))t={value:t};else if("object"!==r||h.call(t,"value")){if((0,i.hXl)(t[u.pF])||t[u.pF]===c.m5||!(0,i.KgX)(t[u.pF])&&!(0,i.EtT)(t[u.pF])&&!(0,i.Lmq)(t[u.pF])&&!(0,i.cyL)(t[u.pF]))return null}else t={value:n?JSON.stringify(t):t};if((0,i.cyL)(t[u.pF])&&!O(t[u.pF]))return null;if(!(0,i.hXl)(t[u.QV])){if((0,i.cyL)(t[u.pF])||!R(t[u.QV]))return null;t[u.pF]=t[u.pF].toString()}return t}function E(e,t,n){var r=-1;if(!(0,i.b07)(e))if(t>0&&(32===t?r=8192:t<=13&&(r=t<<5)),function(e){return e>=0&&e<=9}(n))-1===r&&(r=0),r|=n;else{var o=m[N(e)]||-1;-1!==r&&-1!==o?r|=o:6===o&&(r=o)}return r}function T(e,t,n){var r;return void 0===n&&(n=!0),e&&(r=e.get(t),n&&r&&decodeURIComponent&&(r=decodeURIComponent(r))),r||c.m5}function b(e){void 0===e&&(e="D");var t=(0,s.aq)();return"B"===e?t="{"+t+"}":"P"===e?t="("+t+")":"N"===e&&(t=t.replace(/-/g,c.m5)),t}function k(e,t,n,r,o){var s={},a=!1,c=0,l=arguments[u.oI],d=arguments;for((0,i.Lmq)(d[0])&&(a=d[0],c++);c<l;c++)e=d[c],(0,i.zav)(e,function(e,t){a&&t&&(0,i.Gvm)(t)?(0,i.cyL)(t)?(s[e]=s[e]||[],(0,i.Iuo)(t,function(t,n){t&&(0,i.Gvm)(t)?s[e][n]=k(!0,s[e][n],t):s[e][n]=t})):s[e]=k(!0,s[e],t):s[e]=t});return s}var P=i.UUD;function R(e){return 0===e||e>0&&e<=13||32===e}function O(e){return e[u.oI]>0}function M(e,t){var n=e;n[u.dg]=n[u.dg]||{},n[u.dg][u.Jg]=n[u.dg][u.Jg]||{},n[u.dg][u.Jg][t]=P()}function N(e){var t=0;if(null!=e){var n=typeof e;"string"===n?t=1:"number"===n?t=2:"boolean"===n?t=3:n===a._1&&(t=4,(0,i.cyL)(e)?(t=4096,e[u.oI]>0&&(t|=N(e[0]))):h.call(e,"value")&&(t=8192|N(e[u.pF])))}return t}function D(){return!!(0,i.zS2)("chrome")}function x(e,t,n,r,i,o){function s(e,t,n){try{e[t]=n}catch(e){}}void 0===r&&(r=!1),void 0===i&&(i=!1);var a=new XMLHttpRequest;return r&&s(a,f,r),n&&s(a,p,n),a.open(e,t,!i),n&&s(a,p,n),!i&&o&&s(a,g,o),a}function L(e){return e>0}},4875:(e,t,n)=>{"use strict";n.d(t,{f:()=>r});var r=(0,n(4282).H)({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2})},4977:(e,t,n)=>{var r=n(9589);e.exports=r.satisfies(process.version,"^6.12.0 || >=8.0.0")},5014:(e,t,n)=>{"use strict";n.d(t,{J:()=>a});var r=n(5025),i=n(5130),o=function(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0},s=n(7975),a=function(){function e(e,t,n,a,c,u,l,d,h){this.aiDataContract={ver:1,metrics:1,properties:0};var f=this;f.ver=2;var p=new o;p[i.F2]=a>0?a:void 0,p.max=isNaN(u)||null===u?void 0:u,p.min=isNaN(c)||null===c?void 0:c,p[i.RS]=(0,s.Rr)(e,t)||r.R2,p.value=n,p.stdDev=isNaN(l)||null===l?void 0:l,f.metrics=[p],f[i.$y]=(0,s.xP)(e,d),f[i.XA]=(0,s.Vj)(e,h)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",e.dataType="MetricData",e}()},5025:(e,t,n)=>{"use strict";n.d(t,{R2:()=>u,_G:()=>a,jp:()=>o,ks:()=>l,tU:()=>i,wc:()=>c,xF:()=>r,ym:()=>s});var r="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",i="sampleRate",o="ProcessLegacy",s="http.method",a="https://dc.services.visualstudio.com",c="/v2/track",u="not_specified",l="iKey"},5032:(e,t,n)=>{const r=n(8311),i=n(3904),{ANY:o}=i,s=n(7638),a=n(560),c=[new i(">=0.0.0-0")],u=[new i(">=0.0.0")],l=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===o){if(1===t.length&&t[0].semver===o)return!0;e=n.includePrerelease?c:u}if(1===t.length&&t[0].semver===o){if(n.includePrerelease)return!0;t=u}const r=new Set;let i,l,f,p,g,m,v;for(const t of e)">"===t.operator||">="===t.operator?i=d(i,t,n):"<"===t.operator||"<="===t.operator?l=h(l,t,n):r.add(t.semver);if(r.size>1)return null;if(i&&l){if(f=a(i.semver,l.semver,n),f>0)return null;if(0===f&&(">="!==i.operator||"<="!==l.operator))return null}for(const e of r){if(i&&!s(e,String(i),n))return null;if(l&&!s(e,String(l),n))return null;for(const r of t)if(!s(e,String(r),n))return!1;return!0}let y=!(!l||n.includePrerelease||!l.semver.prerelease.length)&&l.semver,w=!(!i||n.includePrerelease||!i.semver.prerelease.length)&&i.semver;y&&1===y.prerelease.length&&"<"===l.operator&&0===y.prerelease[0]&&(y=!1);for(const e of t){if(v=v||">"===e.operator||">="===e.operator,m=m||"<"===e.operator||"<="===e.operator,i)if(w&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===w.major&&e.semver.minor===w.minor&&e.semver.patch===w.patch&&(w=!1),">"===e.operator||">="===e.operator){if(p=d(i,e,n),p===e&&p!==i)return!1}else if(">="===i.operator&&!s(i.semver,String(e),n))return!1;if(l)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),"<"===e.operator||"<="===e.operator){if(g=h(l,e,n),g===e&&g!==l)return!1}else if("<="===l.operator&&!s(l.semver,String(e),n))return!1;if(!e.operator&&(l||i)&&0!==f)return!1}return!(i&&m&&!l&&0!==f||l&&v&&!i&&0!==f||w||y)},d=(e,t,n)=>{if(!e)return t;const r=a(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},h=(e,t,n)=>{if(!e)return t;const r=a(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,n={})=>{if(e===t)return!0;e=new r(e,n),t=new r(t,n);let i=!1;e:for(const r of e.set){for(const e of t.set){const t=l(r,e,n);if(i=i||null!==t,t)continue e}if(i)return!1}return!0}},5034:(e,t,n)=>{"use strict";n.d(t,{It:()=>F,gi:()=>N,um:()=>O,xN:()=>M});var r,i,o,s=n(269),a=n(2475),c=n(9749),u=n(6182),l=n(3775),d=n(7292),h=n(3673),f=n(6492),p="toGMTString",g="toUTCString",m="cookie",v="expires",y="isCookieUseDisabled",w="disableCookiesUsage",I="_ckMgr",A=null,S=null,C=null,_={},E={},T=((r={cookieCfg:(0,a.NU)((i={},i[f.Fk]={fb:"cookieDomain",dfVal:h.Gh},i.path={fb:"cookiePath",dfVal:h.Gh},i.enabled=f.HP,i.ignoreCookies=f.HP,i.blockedCookies=f.HP,i)),cookieDomain:f.HP,cookiePath:f.HP})[w]=f.HP,r);function b(){!o&&(o=(0,s.nRs)(function(){return(0,s.YEm)()}))}function k(e){return!e||e.isEnabled()}function P(e,t){return!!(t&&e&&(0,s.cyL)(e.ignoreCookies))&&-1!==(0,s.rDm)(e.ignoreCookies,t)}function R(e,t){var n=t[u.XM];if((0,s.hXl)(n)){var r=void 0;(0,s.b07)(e[y])||(r=!e[y]),(0,s.b07)(e[w])||(r=!e[w]),n=r}return n}function O(e,t){var n;if(e)n=e.getCookieMgr();else if(t){var r=t.cookieCfg;n=r&&r[I]?r[I]:M(t)}return n||(n=function(e,t){var n=M[I]||E[I];return n||(n=M[I]=M(e,t),E[I]=n),n}(t,(e||{})[u.Uw])),n}function M(e,t){var n,r,i,o,a,l,m,y,w;e=(0,c.e)(e||E,null,t).cfg,a=(0,c.a)(e,function(t){t[u.h0](t.cfg,T),r=t.ref(t.cfg,"cookieCfg"),i=r[f.QW]||"/",o=r[f.Fk],l=!1!==R(e,r),m=r.getCookie||U,y=r.setCookie||q,w=r.delCookie||q},t);var A=((n={isEnabled:function(){var n=!1!==R(e,r)&&l&&N(t),i=E[I];return n&&i&&A!==i&&(n=k(i)),n},setEnabled:function(e){l=!1!==e,r[u.XM]=e},set:function(e,t,n,a,c){var l=!1;if(k(A)&&!function(e,t){return!!(t&&e&&(0,s.cyL)(e.blockedCookies)&&-1!==(0,s.rDm)(e.blockedCookies,t))||P(e,t)}(r,e)){var m={},w=(0,s.EHq)(t||f.m5),I=(0,s.HzD)(w,";");if(-1!==I&&(w=(0,s.EHq)((0,s.ZWZ)(t,I)),m=D((0,s.P0f)(t,I+1))),(0,h.KY)(m,f.Fk,a||o,s.zzB,s.b07),!(0,s.hXl)(n)){var C=(0,d.lT)();if((0,s.b07)(m[v])){var _=(0,s.f0d)()+1e3*n;if(_>0){var E=new Date;E.setTime(_),(0,h.KY)(m,v,x(E,C?p:g)||x(E,C?p:g)||f.m5,s.zzB)}}C||(0,h.KY)(m,"max-age",f.m5+n,null,s.b07)}var T=(0,d.g$)();T&&"https:"===T[u.Qg]&&((0,h.KY)(m,"secure",null,null,s.b07),null===S&&(S=!F(((0,s.w3n)()||{})[u.tX])),S&&(0,h.KY)(m,"SameSite","None",null,s.b07)),(0,h.KY)(m,f.QW,c||i,null,s.b07),y(e,L(w,m)),l=!0}return l},get:function(e){var t=f.m5;return k(A)&&!P(r,e)&&(t=m(e)),t},del:function(e,t){var n=!1;return k(A)&&(n=A.purge(e,t)),n},purge:function(e,n){var r,i=!1;if(N(t)){var o=((r={})[f.QW]=n||"/",r[v]="Thu, 01 Jan 1970 00:00:01 GMT",r);(0,d.lT)()||(o["max-age"]="0"),w(e,L(f.m5,o)),i=!0}return i}})[u.M5]=function(e){a&&a.rm(),a=null},n);return A[I]=A,A}function N(e){if(null===A){A=!1,!o&&b();try{var t=o.v||{};A=void 0!==t[m]}catch(t){(0,l.ZP)(e,2,68,"Cannot access document.cookie - "+(0,h.lL)(t),{exception:(0,s.mmD)(t)})}}return A}function D(e){var t={};if(e&&e[u.oI]){var n=(0,s.EHq)(e)[u.sY](";");(0,s.Iuo)(n,function(e){if(e=(0,s.EHq)(e||f.m5)){var n=(0,s.HzD)(e,"=");-1===n?t[e]=null:t[(0,s.EHq)((0,s.ZWZ)(e,n))]=(0,s.EHq)((0,s.P0f)(e,n+1))}})}return t}function x(e,t){return(0,s.Tnt)(e[t])?e[t]():null}function L(e,t){var n=e||f.m5;return(0,s.zav)(t,function(e,t){n+="; "+e+((0,s.hXl)(t)?f.m5:"="+t)}),n}function U(e){var t=f.m5;if(!o&&b(),o.v){var n=o.v[m]||f.m5;C!==n&&(_=D(n),C=n),t=(0,s.EHq)(_[e]||f.m5)}return t}function q(e,t){!o&&b(),o.v&&(o.v[m]=e+"="+t)}function F(e){return!(!(0,s.KgX)(e)||!(0,h.Ju)(e,"CPU iPhone OS 12")&&!(0,h.Ju)(e,"iPad; CPU OS 12")&&!((0,h.Ju)(e,"Macintosh; Intel Mac OS X 10_14")&&(0,h.Ju)(e,"Version/")&&(0,h.Ju)(e,"Safari"))&&(!(0,h.Ju)(e,"Macintosh; Intel Mac OS X 10_14")||!(0,s.Cv9)(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))&&!(0,h.Ju)(e,"Chrome/5")&&!(0,h.Ju)(e,"Chrome/6")&&(!(0,h.Ju)(e,"UnrealEngine")||(0,h.Ju)(e,"Chrome"))&&!(0,h.Ju)(e,"UCBrowser/12")&&!(0,h.Ju)(e,"UCBrowser/11"))}},5130:(e,t,n)=>{"use strict";n.d(t,{$e:()=>y,$y:()=>E,AZ:()=>u,Av:()=>L,C9:()=>v,Cx:()=>p,F2:()=>h,Fq:()=>R,IE:()=>D,J$:()=>b,Jj:()=>w,Jm:()=>f,OK:()=>C,OL:()=>o,Ol:()=>A,QE:()=>N,RS:()=>l,Ue:()=>I,Ur:()=>P,XA:()=>T,fd:()=>H,h_:()=>q,i9:()=>m,lW:()=>x,lx:()=>U,oI:()=>i,on:()=>_,pM:()=>d,qd:()=>F,qg:()=>k,r1:()=>O,sY:()=>r,up:()=>S,vu:()=>M,xE:()=>a,y5:()=>c,zV:()=>s,zw:()=>g});var r="split",i="length",o="toLowerCase",s="ingestionendpoint",a="toString",c="push",u="removeItem",l="name",d="message",h="count",f="preTriggerDate",p="disabled",g="interval",m="daysOfMonth",v="date",y="getUTCDate",w="stringify",I="pathname",A="correlationHeaderExcludePatterns",S="extensionConfig",C="exceptions",_="parsedStack",E="properties",T="measurements",b="sizeInBytes",k="typeName",P="severityLevel",R="problemGroup",O="isManual",M="CreateFromInterface",N="assembly",D="fileName",x="hasFullStack",L="level",U="method",q="line",F="duration",H="receivedResponse"},5200:(e,t,n)=>{const r=n(560);e.exports=(e,t,n)=>r(e,t,n)<=0},5256:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.activate=async function(e){const t=new l.MicrosoftAuthenticationTelemetryReporter(e.extension.packageJSON.aiKey);if(d=h(),e.subscriptions.push(a.workspace.onDidChangeConfiguration(async t=>{if(!t.affectsConfiguration("microsoft-authentication"))return;if(d===h())return;e.globalState.update("msalMigration",void 0);const n=a.l10n.t("Reload");await a.window.showInformationMessage("Reload required",{modal:!0,detail:a.l10n.t("Microsoft Account configuration has been changed.")},n)===n&&a.commands.executeCommand("workbench.action.reloadWindow")})),"undefined"==typeof process||"string"!=typeof process?.versions?.node)return t.sendActivatedWithClassicImplementationEvent("web"),await c.activate(e,t.telemetryReporter);switch(d){case"msal-no-broker":t.sendActivatedWithMsalNoBrokerEvent(),await u.activate(e,t);break;case"classic":t.sendActivatedWithClassicImplementationEvent("setting"),await c.activate(e,t.telemetryReporter);break;default:await u.activate(e,t)}},t.deactivate=function(){"classic"!==d?u.deactivate():c.deactivate()};const a=n(1398),c=s(n(7773)),u=s(n(8428)),l=n(2417);let d="msal";const h=()=>a.workspace.getConfiguration("microsoft-authentication").get("implementation")??"msal"},5342:(e,t,n)=>{const r=n(7075);e.exports=(e,t,n)=>r(e,t,"<",n)},5396:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.oneDataSystemClientFactory=void 0,t.oneDataSystemClientFactory=async(e,t,r)=>{let i=await(async(e,t,r)=>{const i=await Promise.resolve().then(()=>o(n(956))),s=await Promise.resolve().then(()=>o(n(8916))),a=new i.AppInsightsCore,c=new s.PostChannel,u={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[c]]};if(r){u.extensionConfig={};const e={alwaysUseXhrOverride:!0,httpXHROverride:r};u.extensionConfig[c.identifier]=e}const l=t.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(u,[]),a.addTelemetryInitializer(e=>{e.ext=e.ext??{},e.ext.web=e.ext.web??{},e.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',l&&(e.ext.utc=e.ext.utc??{},e.ext.utc.flags=8462029)}),a})(e,t,r);return{logEvent:(e,t)=>{try{i?.track({name:e,baseData:{name:e,properties:t?.properties,measurements:t?.measurements}})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},flush:async()=>{try{return new Promise((e,t)=>{i?i.flush(!0,e=>{e||t("Failed to flush app 1DS!")}):e()})}catch(e){throw new Error("Failed to flush 1DS!\n"+e.message)}},dispose:async()=>new Promise(e=>{i?i.unload(!1,()=>{e(),i=void 0},1e3):e()})}}},5397:(e,t,n)=>{"use strict";n.d(t,{WJ:()=>A});var r=n(659),i=n(269),o=n(5025),s=n(5130),a=n(7975),c="error",u="stack",l="stackDetails",d="errorSrc",h="message",f="description";function p(e,t){var n=e;return n&&!(0,i.KgX)(n)&&(JSON&&JSON[s.Jj]?(n=JSON[s.Jj](e),!t||n&&"{}"!==n||(n=(0,i.Tnt)(e[s.xE])?e[s.xE]():""+e)):n=e+" - (Missing JSON.stringify)"),n||""}function g(e,t){var n=e;return e&&(n&&!(0,i.KgX)(n)&&(n=e[h]||e[f]||n),n&&!(0,i.KgX)(n)&&(n=p(n,!0)),e.filename&&(n=n+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?"))),t&&"String"!==t&&"Object"!==t&&"Error"!==t&&-1===(0,i.HzD)(n||"",t)&&(n=t+": "+n),n||""}function m(e){return e&&e.src&&(0,i.KgX)(e.src)&&e.obj&&(0,i.cyL)(e.obj)}function v(e){var t=e||"";(0,i.KgX)(t)||(t=(0,i.KgX)(t[u])?t[u]:""+t);var n=t[s.sY]("\n");return{src:t,obj:n}}function y(e){var t=null;if(e)try{if(e[u])t=v(e[u]);else if(e[c]&&e[c][u])t=v(e[c][u]);else if(e.exception&&e.exception[u])t=v(e.exception[u]);else if(m(e))t=e;else if(m(e[l]))t=e[l];else if((0,i.zkX)()&&(0,i.zkX)().opera&&e[h])t=function(e){for(var t=[],n=e[s.sY]("\n"),r=0;r<n[s.oI];r++){var i=n[r];n[r+1]&&(i+="@"+n[r+1],r++),t[s.y5](i)}return{src:e,obj:t}}(e[s.pM]);else if(e.reason&&e.reason[u])t=v(e.reason[u]);else if((0,i.KgX)(e))t=v(e);else{var n=e[h]||e[f]||"";(0,i.KgX)(e[d])&&(n&&(n+="\n"),n+=" from "+e[d]),n&&(t=v(n))}}catch(e){t=v(e)}return t||{src:"",obj:null}}function w(e){var t="";if(e&&!(t=e.typeName||e[s.RS]||""))try{var n=/function (.{1,200})\(/.exec(e.constructor[s.xE]());t=n&&n[s.oI]>1?n[1]:""}catch(e){}return t}function I(e){if(e)try{if(!(0,i.KgX)(e)){var t=w(e),n=p(e,!1);return n&&"{}"!==n||(e[c]&&(t=w(e=e[c])),n=p(e,!0)),0!==(0,i.HzD)(n,t)&&"String"!==t?t+":"+n:n}}catch(e){}return""+(e||"")}var A=function(){function e(e,t,n,r,o,c){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var u=this;u.ver=2,function(e){try{if((0,i.Gvm)(e))return"ver"in e&&"exceptions"in e&&"properties"in e}catch(e){}return!1}(t)?(u[s.OK]=t[s.OK]||[],u[s.$y]=t[s.$y],u[s.XA]=t[s.XA],t[s.Ur]&&(u[s.Ur]=t[s.Ur]),t.id&&(u.id=t.id,t[s.$y].id=t.id),t[s.Fq]&&(u[s.Fq]=t[s.Fq]),(0,i.hXl)(t[s.r1])||(u[s.r1]=t[s.r1])):(n||(n={}),c&&(n.id=c),u[s.OK]=[new S(e,t,n)],u[s.$y]=(0,a.xP)(e,n),u[s.XA]=(0,a.Vj)(e,r),o&&(u[s.Ur]=o),c&&(u.id=c))}return e.CreateAutoException=function(e,t,n,r,i,o,a,c){var u,l=w(i||o||e);return(u={})[s.pM]=g(e,l),u.url=t,u.lineNumber=n,u.columnNumber=r,u.error=I(i||o||e),u.evt=I(o||e),u[s.qg]=l,u.stackDetails=y(a||i||o),u.errorSrc=c,u},e.CreateFromInterface=function(t,n,o,a){var c=n[s.OK]&&(0,i.W$7)(n[s.OK],function(e){return S[s.vu](t,e)});return new e(t,(0,r.Im)((0,r.Im)({},n),{exceptions:c}),o,a)},e.prototype.toInterface=function(){var e,t=this,n=t.exceptions,r=t.properties,o=t.measurements,a=t.severityLevel,c=t.problemGroup,u=t.id,l=t.isManual,d=n instanceof Array&&(0,i.W$7)(n,function(e){return e.toInterface()})||void 0;return(e={ver:"4.0"})[s.OK]=d,e.severityLevel=a,e.properties=r,e.measurements=o,e.problemGroup=c,e.id=u,e.isManual=l,e},e.CreateSimpleException=function(e,t,n,r,i,o){var a;return{exceptions:[(a={},a[s.lW]=!0,a.message=e,a.stack=i,a.typeName=t,a)]}},e.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",e.dataType="ExceptionData",e.formatError=I,e}(),S=function(){function e(e,t,n){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var r=this;if(function(e){try{if((0,i.Gvm)(e))return"hasFullStack"in e&&"typeName"in e}catch(e){}return!1}(t))r[s.qg]=t[s.qg],r[s.pM]=t[s.pM],r[u]=t[u],r[s.on]=t[s.on]||[],r[s.lW]=t[s.lW];else{var d=t,h=d&&d.evt;(0,i.bJ7)(d)||(d=d[c]||h||d),r[s.qg]=(0,a.Rr)(e,w(d))||o.R2,r[s.pM]=(0,a.Vk)(e,g(t||d,r[s.qg]))||o.R2;var f=t[l]||y(t);r[s.on]=function(e){var t,n=e.obj;if(n&&n[s.oI]>0){t=[];var r=0,o=0;if((0,i.Iuo)(n,function(e){var n=e[s.xE]();if(C.regex.test(n)){var i=new C(n,r++);o+=i[s.J$],t[s.y5](i)}}),o>32768)for(var a=0,c=t[s.oI]-1,u=0,l=a,d=c;a<c;){if((u+=t[a][s.J$]+t[c][s.J$])>32768){var h=d-l+1;t.splice(l,h);break}l=a,d=c,a++,c--}}return t}(f),(0,i.cyL)(r[s.on])&&(0,i.W$7)(r[s.on],function(t){t[s.QE]=(0,a.Rr)(e,t[s.QE]),t[s.IE]=(0,a.Rr)(e,t[s.IE])}),r[u]=(0,a.Vt)(e,function(e){var t="";return e&&(e.obj?(0,i.Iuo)(e.obj,function(e){t+=e+"\n"}):t=e.src||""),t}(f)),r.hasFullStack=(0,i.cyL)(r.parsedStack)&&r.parsedStack[s.oI]>0,n&&(n[s.qg]=n[s.qg]||r[s.qg])}}return e.prototype.toInterface=function(){var e,t=this,n=t[s.on]instanceof Array&&(0,i.W$7)(t[s.on],function(e){return e.toInterface()});return(e={id:t.id,outerId:t.outerId,typeName:t[s.qg],message:t[s.pM],hasFullStack:t[s.lW],stack:t[u]})[s.on]=n||void 0,e},e.CreateFromInterface=function(t,n){var o=n[s.on]instanceof Array&&(0,i.W$7)(n[s.on],function(e){return C[s.vu](e)})||n[s.on];return new e(t,(0,r.Im)((0,r.Im)({},n),{parsedStack:o}))},e}(),C=function(){function e(t,n){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var r=this;if(r[s.J$]=0,"string"==typeof t){var o=t;r[s.Av]=n,r[s.lx]="<no_method>",r[s.QE]=(0,i.EHq)(o),r[s.IE]="",r[s.h_]=0;var a=o.match(e.regex);a&&a[s.oI]>=5&&(r[s.lx]=(0,i.EHq)(a[2])||r[s.lx],r[s.IE]=(0,i.EHq)(a[4]),r[s.h_]=parseInt(a[5])||0)}else r[s.Av]=t[s.Av],r[s.lx]=t[s.lx],r[s.QE]=t[s.QE],r[s.IE]=t[s.IE],r[s.h_]=t[s.h_],r[s.J$]=0;r.sizeInBytes+=r.method[s.oI],r.sizeInBytes+=r.fileName[s.oI],r.sizeInBytes+=r.assembly[s.oI],r[s.J$]+=e.baseSize,r.sizeInBytes+=r.level.toString()[s.oI],r.sizeInBytes+=r.line.toString()[s.oI]}return e.CreateFromInterface=function(t){return new e(t,null)},e.prototype.toInterface=function(){var e=this;return{level:e[s.Av],method:e[s.lx],assembly:e[s.QE],fileName:e[s.IE],line:e[s.h_]}},e.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,e.baseSize=58,e}()},5541:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsalLoggerOptions=void 0;const r=n(8151),i=n(1398);t.MsalLoggerOptions=class{_output;_telemtryReporter;piiLoggingEnabled=!1;constructor(e,t){this._output=e,this._telemtryReporter=t}get logLevel(){return this._toMsalLogLevel(i.env.logLevel)}loggerCallback(e,t,n){switch(e){case r.LogLevel.Error:return this._output.error(t),void this._telemtryReporter.sendTelemetryErrorEvent(t);case r.LogLevel.Warning:return void this._output.warn(t);case r.LogLevel.Info:return void this._output.debug(t);case r.LogLevel.Verbose:return void this._output.trace(t);case r.LogLevel.Trace:return;default:return void this._output.debug(t)}}_toMsalLogLevel(e){switch(e){case i.LogLevel.Trace:return r.LogLevel.Trace;case i.LogLevel.Debug:return r.LogLevel.Verbose;case i.LogLevel.Info:return r.LogLevel.Info;case i.LogLevel.Warning:return r.LogLevel.Warning;case i.LogLevel.Error:return r.LogLevel.Error;default:return r.LogLevel.Info}}}},5571:(e,t,n)=>{const r=n(7075);e.exports=(e,t,n)=>r(e,t,">",n)},5580:(e,t,n)=>{const r=n(560);e.exports=(e,t,n)=>r(e,t,n)>0},5664:(e,t,n)=>{"use strict";n.d(t,{Wy:()=>c,_1:()=>i,bA:()=>o,hW:()=>r,s6:()=>a,vR:()=>s});var r="function",i="object",o="undefined",s="prototype",a=Object,c=a[s]},5692:e=>{"use strict";e.exports=require("https")},5747:(e,t,n)=>{var r=n(3387),i=n(7599);t.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],t.sign=r.sign,t.verify=i.verify,t.decode=i.decode,t.isValid=i.isValid,t.createSign=function(e){return new r(e)},t.createVerify=function(e){return new i(e)}},5927:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AppInsightsCore:()=>vt._,ApplicationInsights:()=>kt,Sender:()=>gt,SeverityLevel:()=>Et.O,arrForEach:()=>A.Iuo,isNullOrUndefined:()=>A.hXl,proxyFunctions:()=>I.o$,throwError:()=>A.$8});var r=n(8279),i=n(659),o=n(5025),s=n(3072),a=n(2445),c=n(1448),u=n(4164),l=n(5397),d=n(5014),h=n(1365),f=n(740),p=n(7952),g=n(4658),m=n(2318),v=n(2910),y=n(2475),w=n(3775),I=n(3673),A=n(269),S=n(6149),C=n(4276),_=n(9749),E=n(2317),T=n(4875),b=n(7292),k=n(856),P=n(4013),R=n(1190),O=n(8257),M=n(1575),N=n(7975),D=n(1062),x=n(7358),L="duration",U="tags",q="deviceType",F="data",H="name",B="traceID",j="length",$="stringify",z="measurements",V="dataType",K="envelopeType",G="toString",W="_get",X="enqueue",Y="count",Q="eventsLimitInMem",J="push",Z="item",ee="emitLineDelimitedJson",te="clear",ne="createNew",re="markAsSent",ie="clearSent",oe="bufferOverride",se="BUFFER_KEY",ae="SENT_BUFFER_KEY",ce="concat",ue="MAX_BUFFER_SIZE",le="triggerSend",de="diagLog",he="initialize",fe="_sender",pe="endpointUrl",ge="instrumentationKey",me="customHeaders",ve="maxBatchSizeInBytes",ye="onunloadDisableBeacon",we="isBeaconApiDisabled",Ie="alwaysUseXhrOverride",Ae="disableXhr",Se="enableSessionStorageBuffer",Ce="_buffer",_e="onunloadDisableFetch",Ee="disableSendBeaconSplit",Te="enableSendPromise",be="getSenderInst",ke="unloadTransports",Pe="convertUndefined",Re="maxBatchInterval",Oe="serialize",Me="_onError",Ne="_onPartialSuccess",De="_onSuccess",xe="itemsReceived",Le="itemsAccepted",Ue="oriPayload",qe="baseType",Fe="sampleRate",He="eventsSendRequest",Be="getSamplingScore",je="baseType",$e="baseData",ze="properties",Ve="true";function Ke(e,t,n){return(0,I.KY)(e,t,n,A.zzB)}function Ge(e,t,n){(0,A.hXl)(e)||(0,A.zav)(e,function(e,r){(0,A.EtT)(r)?n[e]=r:(0,A.KgX)(r)?t[e]=r:(0,b.Z)()&&(t[e]=(0,b.hm)()[$](r))})}function We(e,t){(0,A.hXl)(e)||(0,A.zav)(e,function(n,r){e[n]=r||t})}function Xe(e,t,n,r){var s=new D.L(e,r,t);Ke(s,"sampleRate",n[o.tU]),(n[$e]||{}).startTime&&(s.time=(0,I._u)(n[$e].startTime)),s.iKey=n.iKey;var a=n.iKey.replace(/-/g,"");return s[H]=s[H].replace("{0}",a),function(e,t,n){var r=n[U]=n[U]||{},o=t.ext=t.ext||{},s=t[U]=t[U]||[],a=o.user;a&&(Ke(r,M.O.userAuthUserId,a.authId),Ke(r,M.O.userId,a.id||a.localId));var c=o.app;c&&Ke(r,M.O.sessionId,c.sesId);var u=o.device;u&&(Ke(r,M.O.deviceId,u.id||u.localId),Ke(r,M.O[q],u.deviceClass),Ke(r,M.O.deviceIp,u.ip),Ke(r,M.O.deviceModel,u.model),Ke(r,M.O[q],u[q]));var l=t.ext.web;if(l){Ke(r,M.O.deviceLanguage,l.browserLang),Ke(r,M.O.deviceBrowserVersion,l.browserVer),Ke(r,M.O.deviceBrowser,l.browser);var d=n[F]=n[F]||{},h=d[$e]=d[$e]||{},f=h[ze]=h[ze]||{};Ke(f,"domain",l.domain),Ke(f,"isManual",l.isManual?Ve:null),Ke(f,"screenRes",l.screenRes),Ke(f,"userConsent",l.userConsent?Ve:null)}var p=o.os;p&&(Ke(r,M.O.deviceOS,p[H]),Ke(r,M.O.deviceOSVersion,p.osVer));var g=o.trace;g&&(Ke(r,M.O.operationParentId,g.parentID),Ke(r,M.O.operationName,(0,N.Rr)(e,g[H])),Ke(r,M.O.operationId,g[B]));for(var m={},v=s[j]-1;v>=0;v--){var y=s[v];(0,A.zav)(y,function(e,t){m[e]=t}),s.splice(v,1)}(0,A.zav)(s,function(e,t){m[e]=t});var w=(0,i.Im)((0,i.Im)({},r),m);w[M.O.internalSdkVersion]||(w[M.O.internalSdkVersion]=(0,N.Rr)(e,"javascript:".concat(Qe.Version),64)),n[U]=(0,I.hW)(w)}(e,n,s),n[U]=n[U]||[],(0,I.hW)(s)}function Ye(e,t){(0,A.hXl)(t[$e])&&(0,w.ZP)(e,1,46,"telemetryItem.baseData cannot be null.")}var Qe={Version:"3.3.4"};function Je(e,t,n){Ye(e,t);var r={},i={};t[je]!==s.J[V]&&(r.baseTypeSource=t[je]),t[je]===s.J[V]?(r=t[$e][ze]||{},i=t[$e][z]||{}):t[$e]&&Ge(t[$e],r,i),Ge(t[F],r,i),(0,A.hXl)(n)||We(r,n);var o=t[$e][H],a=new s.J(e,o,r,i),c=new x.B(s.J[V],a);return Xe(e,s.J[K],t,c)}var Ze,et,tt=function(){function e(t,n){var i=[],o=!1,s=n.maxRetryCnt;this[W]=function(){return i},this._set=function(e){return i=e},(0,r.A)(e,this,function(e){e[X]=function(r){e[Y]()>=n[Q]?o||((0,w.ZP)(t,2,105,"Maximum in-memory buffer size reached: "+e[Y](),!0),o=!0):(r.cnt=r.cnt||0,!(0,A.hXl)(s)&&r.cnt>s||i[J](r))},e[Y]=function(){return i[j]},e.size=function(){for(var e=i[j],t=0;t<i[j];t++)e+=i[t].item[j];return n[ee]||(e+=2),e},e[te]=function(){i=[],o=!1},e.getItems=function(){return i.slice(0)},e.batchPayloads=function(e){if(e&&e[j]>0){var t=[];return(0,A.Iuo)(e,function(e){t[J](e[Z])}),n[ee]?t.join("\n"):"["+t.join(",")+"]"}return null},e[ne]=function(e,n,r){var o=i.slice(0);e=e||t,n=n||{};var s=r?new it(e,n):new nt(e,n);return(0,A.Iuo)(o,function(e){s[X](e)}),s}})}return e.__ieDyn=1,e}(),nt=function(e){function t(n,i){var o=e.call(this,n,i)||this;return(0,r.A)(t,o,function(e,t){e[re]=function(e){t[te]()},e[ie]=function(e){}}),o}return(0,i.qU)(t,e),t.__ieDyn=1,t}(tt),rt=["AI_buffer","AI_sentBuffer"],it=function(e){function t(n,i){var o=e.call(this,n,i)||this,s=!1,a=null==i?void 0:i.namePrefix,c=i[oe]||{getItem:g.vH,setItem:g.Dt},u=c.getItem,l=c.setItem,d=i.maxRetryCnt;return(0,r.A)(t,o,function(e,r){var i=m(t[se]),o=m(t[ae]),c=function(){var e=[];try{return(0,A.Iuo)(rt,function(t){var n=S(t);if(e=e[ce](n),a){var r=S(a+"_"+t);e=e[ce](r)}}),e}catch(e){(0,w.ZP)(n,2,41,"Transfer events from previous buffers: "+(0,I.lL)(e)+". previous Buffer items can not be removed",{exception:(0,A.mmD)(e)})}return[]}(),h=o[ce](c),f=e._set(i[ce](h));function p(e,t){var n=[],r=[];return(0,A.Iuo)(e,function(e){r[J](e[Z])}),(0,A.Iuo)(t,function(e){(0,A.Tnt)(e)||-1!==(0,A.rDm)(r,e[Z])||n[J](e)}),n}function m(e){return v(a?a+"_"+e:e)}function v(e){try{var t=u(n,e);if(t){var r=(0,b.hm)().parse(t);if((0,A.KgX)(r)&&(r=(0,b.hm)().parse(r)),r&&(0,A.cyL)(r))return r}}catch(t){(0,w.ZP)(n,1,42," storage key: "+e+", "+(0,I.lL)(t),{exception:(0,A.mmD)(t)})}return[]}function y(e,t){var r=e;try{r=a?a+"_"+r:r;var i=JSON[$](t);l(n,r,i)}catch(e){l(n,r,JSON[$]([])),(0,w.ZP)(n,2,41," storage key: "+r+", "+(0,I.lL)(e)+". Buffer cleared",{exception:(0,A.mmD)(e)})}}function S(e){try{var t=v(e),r=[];return(0,A.Iuo)(t,function(e){var t={item:e,cnt:0};r[J](t)}),(0,g.v7)(n,e),r}catch(e){}return[]}f[j]>t[ue]&&(f[j]=t[ue]),y(t[ae],[]),y(t[se],f),e[X]=function(i){e[Y]()>=t[ue]?s||((0,w.ZP)(n,2,67,"Maximum buffer size reached: "+e[Y](),!0),s=!0):(i.cnt=i.cnt||0,!(0,A.hXl)(d)&&i.cnt>d||(r[X](i),y(t.BUFFER_KEY,e[W]())))},e[te]=function(){r[te](),y(t.BUFFER_KEY,e[W]()),y(t[ae],[]),s=!1},e[re]=function(r){y(t[se],e._set(p(r,e[W]())));var i=m(t[ae]);i instanceof Array&&r instanceof Array&&((i=i[ce](r))[j]>t[ue]&&((0,w.ZP)(n,1,67,"Sent buffer reached its maximum size: "+i[j],!0),i[j]=t[ue]),y(t[ae],i))},e[ie]=function(e){var n=m(t[ae]);n=p(e,n),y(t[ae],n)},e[ne]=function(r,i,o){o=!!o;var s=e[W]().slice(0),a=m(t[ae]).slice(0);r=r||n,i=i||{},e[te]();var c=o?new t(r,i):new nt(r,i);return(0,A.Iuo)(s,function(e){c[X](e)}),o&&c[re](a),c}}),o}var n;return(0,i.qU)(t,e),n=t,t.VERSION="_1",t.BUFFER_KEY="AI_buffer"+n.VERSION,t.SENT_BUFFER_KEY="AI_sentBuffer"+n.VERSION,t.MAX_BUFFER_SIZE=2e3,t}(tt),ot=function(){function e(t){(0,r.A)(e,this,function(e){function n(e,o){var s="__aiCircularRefCheck",a={};if(!e)return(0,w.ZP)(t,1,48,"cannot serialize object because it is null or undefined",{name:o},!0),a;if(e[s])return(0,w.ZP)(t,2,50,"Circular reference detected while serializing object",{name:o},!0),a;if(!e.aiDataContract){if("measurements"===o)a=i(e,"number",o);else if("properties"===o)a=i(e,"string",o);else if("tags"===o)a=i(e,"string",o);else if((0,A.cyL)(e))a=r(e,o);else{(0,w.ZP)(t,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:o},!0);try{(0,b.hm)()[$](e),a=e}catch(e){(0,w.ZP)(t,1,48,e&&(0,A.Tnt)(e[G])?e[G]():"Error serializing object",null,!0)}}return a}return e[s]=!0,(0,A.zav)(e.aiDataContract,function(i,s){var c=(0,A.Tnt)(s)?1&s():1&s,u=(0,A.Tnt)(s)?4&s():4&s,l=2&s,d=void 0!==e[i],h=(0,A.Gvm)(e[i])&&null!==e[i];if(!c||d||l){if(!u){var f;void 0!==(f=h?l?r(e[i],i):n(e[i],i):e[i])&&(a[i]=f)}}else(0,w.ZP)(t,1,24,"Missing required field specification. The field is required but not present on source",{field:i,name:o})}),delete e[s],a}function r(e,r){var i;if(e)if((0,A.cyL)(e)){i=[];for(var o=0;o<e[j];o++){var s=n(e[o],r+"["+o+"]");i[J](s)}}else(0,w.ZP)(t,1,54,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:r},!0);return i}function i(e,n,r){var i;return e&&(i={},(0,A.zav)(e,function(e,o){if("string"===n)void 0===o?i[e]="undefined":null===o?i[e]="null":o[G]?i[e]=o[G]():i[e]="invalid field: toString() is not defined.";else if("number"===n)if(void 0===o)i[e]="undefined";else if(null===o)i[e]="null";else{var s=parseFloat(o);i[e]=s}else i[e]="invalid field: "+r+" is of unknown type.",(0,w.ZP)(t,1,i[e],null,!0)})),i}e[Oe]=function(e){var r=n(e,"root");try{return(0,b.hm)()[$](r)}catch(e){(0,w.ZP)(t,1,48,e&&(0,A.Tnt)(e[G])?e[G]():"Error serializing object",null,!0)}}})}return e.__ieDyn=1,e}(),st=n(8596),at=function(){function e(){}return e.prototype.getHashCodeScore=function(t){return this.getHashCode(t)/e.INT_MAX_VALUE*100},e.prototype.getHashCode=function(e){if(""===e)return 0;for(;e[j]<8;)e=e[ce](e);for(var t=5381,n=0;n<e[j];++n)t=(t<<5)+t+e.charCodeAt(n),t&=t;return Math.abs(t)},e.INT_MAX_VALUE=2147483647,e}(),ct=function(){var e=new at,t=new st.o;this[Be]=function(n){return n[U]&&n[U][t.userId]?e.getHashCodeScore(n[U][t.userId]):n.ext&&n.ext.user&&n.ext.user.id?e.getHashCodeScore(n.ext.user.id):n[U]&&n[U][t.operationId]?e.getHashCodeScore(n[U][t.operationId]):n.ext&&n.ext.telemetryTrace&&n.ext.telemetryTrace[B]?e.getHashCodeScore(n.ext.telemetryTrace[B]):100*Math.random()}},ut=function(){function e(e,t){this.INT_MAX_VALUE=2147483647;var n=t||(0,w.y0)(null);(e>100||e<0)&&(n.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[Fe]=e,this.samplingScoreGenerator=new ct}return e.prototype.isSampledIn=function(e){var t=this[Fe];return null==t||t>=100||e.baseType===d.J[V]||this.samplingScoreGenerator[Be](e)<t},e}(),lt=void 0;function dt(e){try{return e.responseText}catch(e){}return null}var ht,ft=(0,A.ZHX)(((Ze={endpointUrl:(0,y.Lx)(A.zzB,o._G+o.wc)})[ee]=(0,y.DD)(),Ze[Re]=15e3,Ze[ve]=102400,Ze.disableTelemetry=(0,y.DD)(),Ze[Se]=(0,y.DD)(!0),Ze.isRetryDisabled=(0,y.DD)(),Ze[we]=(0,y.DD)(!0),Ze[Ee]=(0,y.DD)(!0),Ze[Ae]=(0,y.DD)(),Ze[_e]=(0,y.DD)(),Ze[ye]=(0,y.DD)(),Ze[ge]=lt,Ze.namePrefix=lt,Ze.samplingPercentage=(0,y.Lx)(function(e){return!isNaN(e)&&e>0&&e<=100},100),Ze[me]=lt,Ze[Pe]=lt,Ze[Q]=1e4,Ze[oe]=!1,Ze.httpXHROverride={isVal:function(e){return e&&e.sendPOST},v:lt},Ze[Ie]=(0,y.DD)(),Ze.transports=lt,Ze.retryCodes=lt,Ze.maxRetryCnt={isVal:A.EtT,v:10},Ze)),pt=((et={})[s.J.dataType]=Je,et[a.C.dataType]=function(e,t,n){Ye(e,t);var r=t[$e].message,i=t[$e].severityLevel,o=t[$e][ze]||{},s=t[$e][z]||{};Ge(t[F],o,s),(0,A.hXl)(n)||We(o,n);var c=new a.C(e,r,i,o,s),u=new x.B(a.C[V],c);return Xe(e,a.C[K],t,u)},et[c.h.dataType]=function(e,t,n){var r;Ye(e,t);var i=t[$e];(0,A.hXl)(i)||(0,A.hXl)(i[ze])||(0,A.hXl)(i[ze][L])?(0,A.hXl)(t[F])||(0,A.hXl)(t[F][L])||(r=t[F][L],delete t[F][L]):(r=i[ze][L],delete i[ze][L]);var o,s=t[$e];((t.ext||{}).trace||{})[B]&&(o=t.ext.trace[B]);var a=s.id||o,u=s[H],l=s.uri,d=s[ze]||{},h=s[z]||{};if((0,A.hXl)(s.refUri)||(d.refUri=s.refUri),(0,A.hXl)(s.pageType)||(d.pageType=s.pageType),(0,A.hXl)(s.isLoggedIn)||(d.isLoggedIn=s.isLoggedIn[G]()),!(0,A.hXl)(s[ze])){var f=s[ze];(0,A.zav)(f,function(e,t){d[e]=t})}Ge(t[F],d,h),(0,A.hXl)(n)||We(d,n);var p=new c.h(e,u,l,r,d,h,a),g=new x.B(c.h[V],p);return Xe(e,c.h[K],t,g)},et[u.H.dataType]=function(e,t,n){Ye(e,t);var r=t[$e],i=r[H],o=r.uri||r.url,s=r[ze]||{},a=r[z]||{};Ge(t[F],s,a),(0,A.hXl)(n)||We(s,n);var c=new u.H(e,i,o,void 0,s,a,r),l=new x.B(u.H[V],c);return Xe(e,u.H[K],t,l)},et[l.WJ.dataType]=function(e,t,n){Ye(e,t);var r=t[$e][z]||{},i=t[$e][ze]||{};Ge(t[F],i,r),(0,A.hXl)(n)||We(i,n);var o=t[$e],s=l.WJ.CreateFromInterface(e,o,i,r),a=new x.B(l.WJ[V],s);return Xe(e,l.WJ[K],t,a)},et[d.J.dataType]=function(e,t,n){Ye(e,t);var r=t[$e],i=r[ze]||{},o=r[z]||{};Ge(t[F],i,o),(0,A.hXl)(n)||We(i,n);var s=new d.J(e,r[H],r.average,r.sampleCount,r.min,r.max,r.stdDev,i,o),a=new x.B(d.J[V],s);return Xe(e,d.J[K],t,a)},et[h.A.dataType]=function(e,t,n){Ye(e,t);var r=t[$e][z]||{},i=t[$e][ze]||{};Ge(t[F],i,r),(0,A.hXl)(n)||We(i,n);var s=t[$e];if((0,A.hXl)(s))return(0,w.OG)(e,"Invalid input for dependency data"),null;var a=s[ze]&&s[ze][o.ym]?s[ze][o.ym]:"GET",c=new h.A(e,s.id,s.target,s[H],s[L],s.success,s.responseCode,a,s.type,s.correlationContext,i,r),u=new x.B(h.A[V],c);return Xe(e,h.A[K],t,u)},et),gt=function(e){function t(){var n,i,s,a,c,u,l,d=e.call(this)||this;d.priority=1001,d.identifier=f.BreezeChannelIdentifier;var h,y,O,M,N,D,x,L,q,H,B,$,z,V,K,G,W,Q,ee,se,ae,ce,ue,Be,je,$e,ze,Ve=0;return(0,r.A)(t,d,function(e,r){function f(t,r){var i=dt(t);if(!t||i+""!="200"&&""!==i){var o=(0,R.x)(i);o&&o[xe]&&o[xe]>o[Le]&&!V?e[Ne](r,o):e[Me](r,(0,I.HU)(t))}else n=0,e[De](r,0)}function Ke(e,t,n){4===e.readyState&&st(e.status,t,e.responseURL,n,(0,I.r4)(e),dt(e)||e.response)}function Ge(e){try{if(e){var t=e[Ue];return t&&t[j]?t:null}}catch(e){}return null}function We(t,n){return!(B||(t?t.baseData&&!t[qe]?(n&&(0,w.ZP)(n,1,70,"Cannot send telemetry without baseData and baseType"),1):(t[qe]||(t[qe]="EventData"),e[fe]?(r=t,e._sample.isSampledIn(r)?(t[o.tU]=e._sample[Fe],0):(n&&(0,w.ZP)(n,2,33,"Telemetry item was sampled out and not sent",{SampleRate:e._sample[Fe]}),1)):(n&&(0,w.ZP)(n,1,28,"Sender was not initialized"),1)):(n&&(0,w.ZP)(n,1,7,"Cannot send empty telemetry"),1)));var r}function Xe(e,n){var r=e.iKey||$,i=t.constructEnvelope(e,r,n,z);if(i){var s=!1;if(e[U]&&e[U][o.jp]&&((0,A.Iuo)(e[U][o.jp],function(e){try{e&&!1===e(i)&&(s=!0,(0,w.OG)(n,"Telemetry processor check returns false"))}catch(e){(0,w.ZP)(n,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,I.lL)(e),{exception:(0,A.mmD)(e)},!0)}}),delete e[U][o.jp]),!s)return i}else(0,w.ZP)(n,1,47,"Unable to create an AppInsights envelope")}function Ye(t){var n="",r=e[de]();try{var i=We(t,r),o=null;i&&(o=Xe(t,r)),o&&(n=c[Oe](o))}catch(e){}return n}function Qe(e){var t="";return e&&e[j]&&(t="["+e.join(",")+"]"),t}function Je(e){var t,n=tt();return(t={urlString:M})[F]=e,t.headers=n,t}function Ze(t,n,r,i){void 0===i&&(i=!0);var o=et(n),s=t&&t.sendPOST;return s&&o?(i&&e._buffer[re](n),s(o,function(t,r,i){return function(t,n,r,i){200===n&&t?e._onSuccess(t,t[j]):i&&e[Me](t,i)}(n,t,0,i)},!r)):null}function et(t){var n;if((0,A.cyL)(t)&&t[j]>0){var r=e[Ce].batchPayloads(t),i=tt();return(n={})[F]=r,n.urlString=M,n.headers=i,n.disableXhrSync=ae,n.disableFetchKeepAlive=!ce,n[Ue]=t,n}return null}function tt(){try{var e=l||{};return(0,m.Qu)(M)&&(e[v.a[6]]=v.a[7]),e}catch(e){}return null}function rt(t){var n=t?t[j]:0;return e[Ce].size()+n>D&&(y&&!y.isOnline()||e[le](!0,null,10),!0)}function st(t,r,i,o,s,a){var c=null;if(e._appId||(c=(0,R.x)(a))&&c.appId&&(e._appId=c.appId),(t<200||t>=300)&&0!==t){if((301===t||307===t||308===t)&&!at(i))return void e[Me](r,s);if(y&&!y.isOnline())return void(V||(gt(r,10),(0,w.ZP)(e[de](),2,40,". Offline - Response Code: ".concat(t,". Offline status: ").concat(!y.isOnline(),". Will retry to send ").concat(r.length," items."))));!V&&yt(t)?(gt(r),(0,w.ZP)(e[de](),2,40,". Response code "+t+". Will retry to send "+r[j]+" items.")):e[Me](r,s)}else at(i),206===t?(c||(c=(0,R.x)(a)),c&&!V?e[Ne](r,c):e[Me](r,s)):(n=0,e[De](r,o))}function at(e){return!(u>=10||(0,A.hXl)(e)||""===e||e===M||(M=e,++u,0))}function ct(e,t){if(!h)return Ze($e&&$e[be]([3],!0),e,t);h(e,!1)}function ht(e){try{if(e&&e[j])return(0,A.KgX)(e[0])}catch(e){}return null}function pt(t,n){var r=null;if((0,A.cyL)(t)){for(var i=t[j],o=0;o<t[j];o++)i+=t[o].item[j];return $e.getSyncFetchPayload()+i<=65e3?r=2:(0,b.Uf)()?r=3:(r=1,(0,w.ZP)(e[de](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender.")),Ze($e&&$e[be]([r],!0),t,n)}return null}function gt(t,r){if(void 0===r&&(r=1),t&&0!==t[j]){var o=e[Ce];o[ie](t),n++;for(var s=0,a=t;s<a.length;s++){var c=a[s];c.cnt=c.cnt||0,c.cnt++,o[X](c)}!function(e){var t;if(n<=1)t=10;else{var r=(Math.pow(2,n)-1)/2,o=Math.floor(Math.random()*r*10)+1;o*=e,t=Math.max(Math.min(o,3600),10)}var s=(0,A.f0d)()+1e3*t;i=s}(r),mt()}}function mt(){if(!a&&!s){var t=i?Math.max(0,i-(0,A.f0d)()):0,n=Math.max(K,t);a=(0,A.dRz)(function(){a=null,e[le](!0,null,1)},n)}}function vt(){a&&a.cancel(),a=null,i=null}function yt(e){return(0,A.hXl)(ze)?401===e||408===e||429===e||500===e||502===e||503===e||504===e:ze[j]&&ze.indexOf(e)>-1}function wt(){e[fe]=null,e[Ce]=null,e._appId=null,e._sample=null,l={},y=null,n=0,i=null,s=!1,a=null,c=null,u=0,Ve=0,h=null,O=null,M=null,N=null,D=0,x=!1,H=null,B=!1,$=null,z=lt,V=!1,G=null,Q=lt,ae=!1,ce=!1,je=!1,ue=null,Be=null,$e=null,(0,A.vF1)(e,"_senderConfig",{g:function(){return(0,I.CP)({},ft)}})}wt(),e.pause=function(){vt(),s=!0},e.resume=function(){s&&(s=!1,i=null,rt(),mt())},e.flush=function(t,n,r){if(void 0===t&&(t=!0),!s){vt();try{return e[le](t,null,r||1)}catch(t){(0,w.ZP)(e[de](),1,22,"flush failed, telemetry will not be collected: "+(0,I.lL)(t),{exception:(0,A.mmD)(t)})}}},e.onunloadFlush=function(){if(!s)if(x||se)try{return e[le](!0,ct,2)}catch(t){(0,w.ZP)(e[de](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+(0,I.lL)(t),{exception:(0,A.mmD)(t)})}else e.flush(!1)},e.addHeader=function(e,t){l[e]=t},e[he]=function(t,o,s,a){e.isInitialized()&&(0,w.ZP)(e[de](),1,28,"Sender is already initialized"),r[he](t,o,s,a);var v=e.identifier;c=new ot(o.logger),n=0,i=null,e[fe]=null,u=0;var P=e[de]();O=(0,S.Hm)((0,C.Z)("Sender"),o.evtNamespace&&o.evtNamespace()),y=(0,p.G)(O),e._addHook((0,_.a)(t,function(t){var n=t.cfg;n.storagePrefix&&(0,g.vh)(n.storagePrefix);var r=(0,E.i8)(null,n,o).getExtCfg(v,ft),i=r[pe];if(M&&i===M){var s=n[pe];s&&s!==i&&(r[pe]=s)}(0,A.$XS)(r[ge])&&(r[ge]=n[ge]),(0,A.vF1)(e,"_senderConfig",{g:function(){return r}}),N!==r[pe]&&(M=N=r[pe]),o.activeStatus()===T.f.PENDING?e.pause():o.activeStatus()===T.f.ACTIVE&&e.resume(),H&&H!==r[me]&&(0,A.Iuo)(H,function(e){delete l[e.header]}),D=r[ve],x=(!1===r[ye]||!1===r[we])&&(0,b.Uf)(),L=!1===r[ye]&&(0,b.Uf)(),q=!1===r[we]&&(0,b.Uf)(),se=r[Ie],ae=!!r[Ae],ze=r.retryCodes;var a=r[oe],c=!!r[Se]&&(!!a||(0,g.AN)()),u=r.namePrefix,p=c!==G||c&&Q!==u||c&&W!==a;if(e[Ce]){if(p)try{e._buffer=e._buffer[ne](P,r,c)}catch(t){(0,w.ZP)(e[de](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+(0,I.lL)(t),{exception:(0,A.mmD)(t)})}rt()}else e[Ce]=c?new it(P,r):new nt(P,r);Q=u,G=c,W=a,ce=!r[_e]&&(0,b.R7)(!0),je=!!r[Ee],e._sample=new ut(r.samplingPercentage,P),$=r[ge],(0,A.$XS)($)||function(e,t){var n=t.disableInstrumentationKeyValidation;return!((0,A.hXl)(n)||!n)||new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e)}($,n)||(0,w.ZP)(P,1,100,"Invalid Instrumentation key "+$),H=r[me],(0,A.KgX)(M)&&!(0,m.Qu)(M)&&H&&H[j]>0?(0,A.Iuo)(H,function(e){d.addHeader(e.header,e.value)}):H=null,ee=r[Te];var y=function(){var t;try{var n={xdrOnComplete:function(e,t,n){var r=Ge(n);if(r)return f(e,r)},fetchOnComplete:function(e,t,n,r){var i=Ge(r);if(i)return st(e.status,i,e.url,i[j],e.statusText,n||"")},xhrOnComplete:function(e,t,n){var r=Ge(n);if(r)return Ke(e,r,r[j])},beaconOnRetry:function(t,n,r){return function(t,n,r){var i=t&&t[Ue];if(je)Be&&Be(i,!0),(0,w.ZP)(e[de](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var o=[],s=0;s<i[j];s++){var a=i[s],c=[a];r(et(c),n)?e._onSuccess(c,c[j]):o[J](a)}o[j]>0&&(Be&&Be(o,!0),(0,w.ZP)(e[de](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}(t,n,r)}};return(t={})[Te]=ee,t.isOneDs=!1,t.disableCredentials=!1,t[Ae]=ae,t.disableBeacon=!q,t.disableBeaconSync=!L,t.senderOnCompleteCallBack=n,t}catch(e){}return null}();$e?$e.SetConfig(y):($e=new k.v)[he](y,P);var S=r.httpXHROverride,C=null,_=null,R=(0,I.jL)([3,1,2],r.transports);C=$e&&$e[be](R,!1);var O=$e&&$e.getFallbackInst();ue=function(e,t){return Ze(O,e,t)},Be=function(e,t){return Ze(O,e,t,!1)},C=se?S:C||S||O,e[fe]=function(e,t){return Ze(C,e,t)},ce&&(h=pt);var U=(0,I.jL)([3,1],r[ke]);ce||(U=U.filter(function(e){return 2!==e})),_=$e&&$e[be](U,!0),_=se?S:_||S,(se||r[ke]||!h)&&_&&(h=function(e,t){return Ze(_,e,t)}),h||(h=ue),B=r.disableTelemetry,z=r[Pe]||lt,V=r.isRetryDisabled,K=r[Re]}))},e.processTelemetry=function(t,n){var r,i=(n=e._getTelCtx(n))[de]();try{if(!We(t,i))return;var o=Xe(t,i);if(!o)return;var s=c[Oe](o),a=e[Ce];rt(s);var u=((r={})[Z]=s,r.cnt=0,r);a[X](u),mt()}catch(e){(0,w.ZP)(i,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+(0,I.lL)(e),{exception:(0,A.mmD)(e)})}e.processNext(t,n)},e.isCompletelyIdle=function(){return!s&&0===Ve&&0===e._buffer[Y]()},e.getOfflineListener=function(){return y},e._xhrReadyStateChange=function(e,t,n){if(!ht(t))return Ke(e,t,n)},e[le]=function(t,n,r){var i;if(void 0===t&&(t=!0),!s)try{var o=e[Ce];if(B)o[te]();else{if(o[Y]()>0){var a=o.getItems();!function(t,n){var r,i=(r="getNotifyMgr",e.core[r]?e.core[r]():e.core._notificationManager);if(i&&i[He])try{i[He](t,n)}catch(t){(0,w.ZP)(e[de](),1,74,"send request notification failed: "+(0,I.lL)(t),{exception:(0,A.mmD)(t)})}}(r||0,t),i=n?n.call(e,a,t):e[fe](a,t)}new Date}vt()}catch(t){var c=(0,b.L0)();(!c||c>9)&&(0,w.ZP)(e[de](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+(0,I.lL)(t),{exception:(0,A.mmD)(t)})}return i},e.getOfflineSupport=function(){var e;return(e={getUrl:function(){return M},createPayload:Je})[Oe]=Ye,e.batch=Qe,e.shouldProcess=function(e){return!!We(e)},e},e._doTeardown=function(t,n){e.onunloadFlush(),(0,P.K)(y,!1),wt()},e[Me]=function(t,n,r){if(!ht(t))return function(t,n){(0,w.ZP)(e[de](),2,26,"Failed to send telemetry.",{message:n}),e._buffer&&e._buffer[ie](t)}(t,n)},e[Ne]=function(t,n){if(!ht(t))return function(t,n){for(var r=[],i=[],o=0,s=n.errors.reverse();o<s.length;o++){var a=s[o],c=t.splice(a.index,1)[0];yt(a.statusCode)?i[J](c):r[J](c)}t[j]>0&&e[De](t,n[Le]),r[j]>0&&e[Me](r,(0,I.r4)(null,["partial success",n[Le],"of",n.itemsReceived].join(" "))),i[j]>0&&(gt(i),(0,w.ZP)(e[de](),2,40,"Partial success. Delivered: "+t[j]+", Failed: "+r[j]+". Will retry to send "+i[j]+" our of "+n[xe]+" items"))}(t,n)},e[De]=function(t,n){if(!ht(t))return function(t){e._buffer&&e._buffer[ie](t)}(t)},e._xdrOnLoad=function(e,t){if(!ht(t))return f(e,t)}}),d}return(0,i.qU)(t,e),t.constructEnvelope=function(e,t,n,r){var o;return o=t===e.iKey||(0,A.hXl)(t)?e:(0,i.Im)((0,i.Im)({},e),{iKey:t}),(pt[o.baseType]||Je)(n,o,r)},t}(O.s),mt=n(4484),vt=n(2774),yt=n(8205),wt="instrumentationKey",It="connectionString",At="instrumentationkey",St="endpointUrl",Ct="ingestionendpoint",_t="userOverrideEndpointUrl",Et=n(9762),Tt=void 0,bt=((ht={diagnosticLogInterval:(0,y.Lx)(function(e){return e&&e>0},1e4)})[It]=Tt,ht[St]=Tt,ht[wt]=Tt,ht.extensionConfig={},ht),kt=function(){function e(t){var n,i=new vt._;function s(e){e&&(e.baseData=e.baseData||{},e.baseType=e.baseType||"EventData"),i.track(e)}((0,A.hXl)(t)||(0,A.hXl)(t[wt])&&(0,A.hXl)(t[It]))&&(0,A.$8)("Invalid input configuration"),(0,r.A)(e,this,function(e){function r(){var e=(0,_.e)(t||{},bt);n=e.cfg,i.addUnloadHook((0,_.a)(e,function(){var e=n[It];if((0,A.$XS)(e)){var t=(0,yt.Rf)(function(t,r){(0,yt.Dv)(e,function(e){var r=e.value,i=n[wt];!e.rejected&&r&&(n[It]=r,i=(0,mt.H)(r)[At]||i),t(i)})}),r=(0,yt.Rf)(function(t,r){(0,yt.Dv)(e,function(e){var r=e.value,i=n[St];if(!e.rejected&&r){var s=(0,mt.H)(r)[Ct];i=s?s+o.wc:i}t(i)})});n[wt]=t,n[St]=n[_t]||r}if((0,A.KgX)(e)){var i=(0,mt.H)(e),s=i[Ct];n[St]=n[_t]?n[_t]:s+o.wc,n[wt]=i[At]||n[wt]}n[St]=n[_t]?n[_t]:n[St]})),i.initialize(n,[new gt])}(0,A.vF1)(e,"config",{g:function(){return n}}),r(),e.initialize=r,e.track=s,(0,I.o$)(e,i,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"])})}return e.__ieDyn=1,e}()},5931:e=>{var t=Object.prototype.toString,n=Array.isArray;e.exports=function(e){return"string"==typeof e||!n(e)&&function(e){return!!e&&"object"==typeof e}(e)&&"[object String]"==t.call(e)}},5951:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomUUID=function(){return crypto.randomUUID()},t.generateCodeVerifier=function(){const e=new Uint32Array(28);return crypto.getRandomValues(e),Array.from(e,i).join("")},t.generateCodeChallenge=async function(e){return function(e){let t="";const n=new Uint8Array(e),i=n.byteLength;for(let e=0;e<i;e++)t+=String.fromCharCode(n[e]);return(0,r.base64Encode)(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(await function(e){const t=(new TextEncoder).encode(e);return crypto.subtle.digest("SHA-256",t)}(e))};const r=n(2866);function i(e){return("0"+e.toString(16)).slice(-2)}},6111:e=>{var t=1/0,n=9007199254740991,r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=/^(?:0|[1-9]\d*)$/,c=parseInt;function u(e){return e!=e}var l,d,h=Object.prototype,f=h.hasOwnProperty,p=h.toString,g=h.propertyIsEnumerable,m=(l=Object.keys,d=Object,function(e){return l(d(e))}),v=Math.max;function y(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||a.test(e))&&e>-1&&e%1==0&&e<t}var w=Array.isArray;function I(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!function(e){var t=A(e)?p.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)}function A(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function S(e){return!!e&&"object"==typeof e}e.exports=function(e,n,a,l){var d;e=I(e)?e:(d=e)?function(e,t){return function(e,t){for(var n=-1,r=e?e.length:0,i=Array(r);++n<r;)i[n]=t(e[n]);return i}(t,function(t){return e[t]})}(d,function(e){return I(e)?function(e,t){var n=w(e)||function(e){return function(e){return S(e)&&I(e)}(e)&&f.call(e,"callee")&&(!g.call(e,"callee")||"[object Arguments]"==p.call(e))}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,i=!!r;for(var o in e)!t&&!f.call(e,o)||i&&("length"==o||y(o,r))||n.push(o);return n}(e):function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||h))return m(e);var t,n,r=[];for(var i in Object(e))f.call(e,i)&&"constructor"!=i&&r.push(i);return r}(e)}(d)):[],a=a&&!l?function(e){var n=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||S(e)&&"[object Symbol]"==p.call(e)}(e))return NaN;if(A(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=A(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=o.test(e);return n||s.test(e)?c(e.slice(2),n?2:8):i.test(e)?NaN:+e}(e))===t||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),a=n%1;return n==n?a?n-a:n:0}(a):0;var C=e.length;return a<0&&(a=v(C+a,0)),function(e){return"string"==typeof e||!w(e)&&S(e)&&"[object String]"==p.call(e)}(e)?a<=C&&e.indexOf(n,a)>-1:!!C&&function(e,t,n){if(t!=t)return function(e,t,n){for(var r=e.length,i=n+-1;++i<r;)if(t(e[i],i,e))return i;return-1}(e,u,n);for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,n,a)>-1}},6149:(e,t,n)=>{"use strict";n.d(t,{Ds:()=>j,El:()=>b,Fc:()=>$,Hm:()=>O,ML:()=>N,Q3:()=>D,So:()=>L,Wg:()=>H,Ym:()=>x,ee:()=>B,lQ:()=>F,mB:()=>M,oS:()=>V,sq:()=>z,vF:()=>K,zh:()=>U});var r=n(269),i=n(6182),o=n(4276),s=n(6492),a="on",c="attachEvent",u="addEventListener",l="detachEvent",d="removeEventListener",h="events",f="visibilitychange",p="pagehide",g="pageshow",m="unload",v="beforeunload",y=(0,o.Z)("aiEvtPageHide"),w=(0,o.Z)("aiEvtPageShow"),I=/\.[\.]+/g,A=/[\.]+$/,S=1,C=(0,o.T)("events"),_=/^([^.]*)(?:\.(.+)|)/;function E(e){return e&&e[i.W7]?e[i.W7](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,s.m5):e}function T(e,t){var n;if(t){var o=s.m5;(0,r.cyL)(t)?(o=s.m5,(0,r.Iuo)(t,function(e){(e=E(e))&&("."!==e[0]&&(e="."+e),o+=e)})):o=E(t),o&&("."!==o[0]&&(o="."+o),e=(e||s.m5)+o)}var a=_.exec(e||s.m5)||[];return(n={})[i.QM]=a[1],n.ns=(a[2]||s.m5).replace(I,".").replace(A,s.m5)[i.sY](".").sort().join("."),n}function b(e,t,n){var o=[],a=C.get(e,h,{},!1),c=T(t,n);return(0,r.zav)(a,function(e,t){(0,r.Iuo)(t,function(e){var t;c[i.QM]&&c[i.QM]!==e.evtName[i.QM]||c.ns&&c.ns!=c.ns||o[i.y5](((t={})[i.RS]=e.evtName[i.QM]+(e.evtName.ns?"."+e.evtName.ns:s.m5),t.handler=e[i.Yo],t))})}),o}function k(e,t,n){void 0===n&&(n=!0);var r=C.get(e,h,{},n),i=r[t];return i||(i=r[t]=[]),i}function P(e,t,n,r){e&&t&&t[i.QM]&&(e[d]?e[d](t[i.QM],n,r):e[l]&&e[l](a+t[i.QM],n))}function R(e,t,n,r){for(var o=t[i.oI];o--;){var s=t[o];s&&(n.ns&&n.ns!==s.evtName.ns||r&&!r(s)||(P(e,s.evtName,s[i.Yo],s.capture),t[i.Ic](o,1)))}}function O(e,t){return t?T("xx",(0,r.cyL)(t)?[e].concat(t):[e,t]).ns[i.sY]("."):e}function M(e,t,n,r,o){var s;void 0===o&&(o=!1);var l=!1;if(e)try{var d=T(t,r);if(l=function(e,t,n,r){var o=!1;return e&&t&&t[i.QM]&&n&&(e[u]?(e[u](t[i.QM],n,r),o=!0):e[c]&&(e[c](a+t[i.QM],n),o=!0)),o}(e,d,n,o),l&&C.accept(e)){var h=((s={guid:S++,evtName:d})[i.Yo]=n,s.capture=o,s);k(e,d.type)[i.y5](h)}}catch(e){}return l}function N(e,t,n,o,s){if(void 0===s&&(s=!1),e)try{var a=T(t,o),c=!1;!function(e,t,n){if(t[i.QM])R(e,k(e,t[i.QM]),t,n);else{var o=C.get(e,h,{});(0,r.zav)(o,function(r,i){R(e,i,t,n)}),0===(0,r.cGk)(o)[i.oI]&&C.kill(e,h)}}(e,a,function(e){return!((!a.ns||n)&&e[i.Yo]!==n||(c=!0,0))}),c||P(e,a,n,s)}catch(e){}}function D(e,t,n,r){return void 0===r&&(r=!1),M(e,t,n,null,r)}function x(e,t,n,r){void 0===r&&(r=!1),N(e,t,n,null,r)}function L(e,t,n){var i=!1,o=(0,r.zkX)();o&&(i=M(o,e,t,n),i=M(o.body,e,t,n)||i);var s=(0,r.YEm)();return s&&(i=M(s,e,t,n)||i),i}function U(e,t,n){var i=(0,r.zkX)();i&&(N(i,e,t,n),N(i.body,e,t,n));var o=(0,r.YEm)();o&&N(o,e,t,n)}function q(e,t,n,o){var s=!1;return t&&e&&e[i.oI]>0&&(0,r.Iuo)(e,function(e){e&&(n&&-1!==(0,r.rDm)(n,e)||(s=L(e,t,o)||s))}),s}function F(e,t,n,o){var s=!1;return t&&e&&(0,r.cyL)(e)&&!(s=q(e,t,n,o))&&n&&n[i.oI]>0&&(s=q(e,t,null,o)),s}function H(e,t,n){e&&(0,r.cyL)(e)&&(0,r.Iuo)(e,function(e){e&&U(e,t,n)})}function B(e,t,n){return F([v,m,p],e,t,n)}function j(e,t){H([v,m,p],e,t)}function $(e,t,n){var i=O(y,n),o=q([p],e,t,i);return t&&-1!==(0,r.rDm)(t,f)||(o=q([f],function(t){var n=(0,r.YEm)();e&&n&&"hidden"===n.visibilityState&&e(t)},t,i)||o),!o&&t&&(o=$(e,null,n)),o}function z(e,t){var n=O(y,t);H([p],e,n),H([f],null,n)}function V(e,t,n){var i=O(w,n),o=q([g],e,t,i);return!(o=q([f],function(t){var n=(0,r.YEm)();e&&n&&"visible"===n.visibilityState&&e(t)},t,i)||o)&&t&&(o=V(e,null,n)),o}function K(e,t){var n=O(w,t);H([g],e,n),H([f],null,n)}},6170:(e,t,n)=>{const r=n(3908),i=n(144),{safeRe:o,t:s}=n(9718);e.exports=(e,t)=>{if(e instanceof r)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){const r=t.includePrerelease?o[s.COERCERTLFULL]:o[s.COERCERTL];let i;for(;(i=r.exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&i.index+i[0].length===n.index+n[0].length||(n=i),r.lastIndex=i.index+i[1].length+i[2].length;r.lastIndex=-1}else n=e.match(t.includePrerelease?o[s.COERCEFULL]:o[s.COERCE]);if(null===n)return null;const a=n[2],c=n[3]||"0",u=n[4]||"0",l=t.includePrerelease&&n[5]?`-${n[5]}`:"",d=t.includePrerelease&&n[6]?`+${n[6]}`:"";return i(`${a}.${c}.${u}${l}${d}`,t)}},6182:(e,t,n)=>{"use strict";n.d(t,{$5:()=>O,$o:()=>H,AP:()=>b,Az:()=>oe,Bl:()=>F,Cd:()=>ce,DI:()=>M,Di:()=>x,FI:()=>P,HC:()=>G,Ic:()=>g,Ik:()=>B,JQ:()=>i,JR:()=>j,Ju:()=>w,K0:()=>m,L:()=>pe,M5:()=>L,NA:()=>Ae,OL:()=>r,O_:()=>ue,P5:()=>ye,QM:()=>ne,Qg:()=>Y,RF:()=>T,RS:()=>k,Rr:()=>Ie,Ru:()=>de,Uw:()=>h,Vq:()=>fe,W7:()=>ee,XM:()=>D,XW:()=>s,YH:()=>X,Yo:()=>re,Yq:()=>_,Zu:()=>ae,_w:()=>v,by:()=>U,c1:()=>ge,cV:()=>ie,cp:()=>he,do:()=>me,e4:()=>V,e_:()=>le,fA:()=>R,h0:()=>l,h3:()=>I,h4:()=>N,ih:()=>u,mE:()=>y,oI:()=>o,on:()=>c,pF:()=>E,pM:()=>$,re:()=>Z,s:()=>q,sY:()=>J,sl:()=>C,sx:()=>te,tI:()=>z,tX:()=>Q,tZ:()=>S,tn:()=>K,uR:()=>W,vR:()=>A,wJ:()=>se,wi:()=>we,x6:()=>d,y5:()=>p,y9:()=>f,yy:()=>ve,zs:()=>a});var r="toLowerCase",i="blkVal",o="length",s="rdOnly",a="notify",c="warnToConsole",u="throwInternal",l="setDf",d="watch",h="logger",f="apply",p="push",g="splice",m="hdlr",v="cancel",y="initialize",w="identifier",I="removeNotificationListener",A="addNotificationListener",S="isInitialized",C="instrumentationKey",_="INACTIVE",E="value",T="getNotifyMgr",b="getPlugin",k="name",P="iKey",R="time",O="processNext",M="getProcessTelContext",N="pollInternalLogs",D="enabled",x="stopPollingInternalLogs",L="unload",U="onComplete",q="version",F="loggingLevelConsole",H="createNew",B="teardown",j="messageId",$="message",z="isAsync",V="diagLog",K="_doTeardown",G="update",W="getNext",X="setNextPlugin",Y="protocol",Q="userAgent",J="split",Z="nodeType",ee="replace",te="logInternalMessage",ne="type",re="handler",ie="status",oe="getResponseHeader",se="getAllResponseHeaders",ae="isChildEvt",ce="data",ue="getCtx",le="setCtx",de="complete",he="itemsReceived",fe="urlString",pe="sendPOST",ge="headers",me="timeout",ve="setRequestHeader",ye="traceId",we="spanId",Ie="traceFlags",Ae="getAttribute"},6244:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sequencer=t.CachedPublicClientApplication=void 0;const r=n(8151),i=n(9020),o=n(1398),s=n(1619),a=n(3518),c=n(5541);class u{_clientId;_secretStorage;_accountAccess;_logger;_pca;_accounts=[];_sequencer=new l;_disposable;_secretStorageCachePlugin;isBrokerAvailable=!1;_onDidAccountsChangeEmitter=new o.EventEmitter;onDidAccountsChange=this._onDidAccountsChangeEmitter.event;_onDidRemoveLastAccountEmitter=new o.EventEmitter;onDidRemoveLastAccount=this._onDidRemoveLastAccountEmitter.event;constructor(e,t,n,s,u){this._clientId=e,this._secretStorage=t,this._accountAccess=n,this._logger=s,this._secretStorageCachePlugin=new a.SecretStorageCachePlugin(this._secretStorage,`pca:${this._clientId}`);const l=new c.MsalLoggerOptions(s,u);let d;if("win32"!==process.platform&&"darwin"!==process.platform)this._logger.info(`[${this._clientId}] Native Broker is only available on Windows and macOS`);else if("msal-no-broker"===o.workspace.getConfiguration("microsoft-authentication").get("implementation"))this._logger.info(`[${this._clientId}] Native Broker disabled via settings`);else{const e=new i.NativeBrokerPlugin;this.isBrokerAvailable=e.isBrokerAvailable,this._logger.info(`[${this._clientId}] Native Broker enabled: ${this.isBrokerAvailable}`),this.isBrokerAvailable&&(d={nativeBrokerPlugin:e})}this._pca=new r.PublicClientApplication({auth:{clientId:e},system:{loggerOptions:{correlationId:e,loggerCallback:(e,t,n)=>l.loggerCallback(e,t,n),logLevel:r.LogLevel.Trace,piiLoggingEnabled:!0}},broker:d,cache:{cachePlugin:this._secretStorageCachePlugin}}),this._disposable=o.Disposable.from(this._registerOnSecretStorageChanged(),this._onDidAccountsChangeEmitter,this._onDidRemoveLastAccountEmitter,this._secretStorageCachePlugin)}get accounts(){return this._accounts}get clientId(){return this._clientId}static async create(e,t,n,r,i){const o=new u(e,t,n,r,i);return await o.initialize(),o}async initialize(){await this._sequencer.queue(()=>this._update())}dispose(){this._disposable.dispose()}async acquireTokenSilent(e){this._logger.debug(`[acquireTokenSilent] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}] [${e.account.username}] starting...`);let t=await this._sequencer.queue(()=>this._pca.acquireTokenSilent(e));this._logger.debug(`[acquireTokenSilent] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}] [${e.account.username}] got result`);const n=t.idTokenClaims.exp;if(n){if(new Date(1e3*(n-300))<new Date){this._logger.debug(`[acquireTokenSilent] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}] [${e.account.username}] id token is expired or about to expire. Forcing refresh...`);const n=this.isBrokerAvailable?{...e,claims:e.claims??'{ "id_token": {}}'}:{...e,forceRefresh:!0};t=await this._sequencer.queue(()=>this._pca.acquireTokenSilent(n)),this._logger.debug(`[acquireTokenSilent] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}] [${e.account.username}] got forced result`)}const r=t.idTokenClaims.exp;if(r&&new Date(1e3*(r-300))<new Date&&(this._logger.error(`[acquireTokenSilent] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}] [${e.account.username}] id token is still expired.`),this.isBrokerAvailable)){this._logger.error(`[acquireTokenSilent] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}] [${e.account.username}] forcing refresh with different claims...`);const n={...e,claims:e.claims??'{ "access_token": {}}'};t=await this._sequencer.queue(()=>this._pca.acquireTokenSilent(n)),this._logger.debug(`[acquireTokenSilent] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}] [${e.account.username}] got forced result with different claims`);const r=t.idTokenClaims.exp;r&&new Date(1e3*(r-300))<new Date&&this._logger.error(`[acquireTokenSilent] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}] [${e.account.username}] id token is still expired.`)}}return t.account?!t.fromCache&&this._verifyIfUsingBroker(t)&&(this._logger.debug(`[acquireTokenSilent] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}] [${e.account.username}] firing event due to change`),this._onDidAccountsChangeEmitter.fire({added:[],changed:[t.account],deleted:[]})):this._logger.error(`[acquireTokenSilent] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}] [${e.account.username}] no account found in result`),t}async acquireTokenInteractive(e){return this._logger.debug(`[acquireTokenInteractive] [${this._clientId}] [${e.authority}] [${e.scopes?.join(" ")}] loopbackClientOverride: ${e.loopbackClient?"true":"false"}`),await o.window.withProgress({location:o.ProgressLocation.Notification,cancellable:!0,title:o.l10n.t("Signing in to Microsoft...")},(t,n)=>this._sequencer.queue(async()=>{try{const t=await(0,s.raceCancellationAndTimeoutError)(this._pca.acquireTokenInteractive(e),n,3e5);return this.isBrokerAvailable&&await this._accountAccess.setAllowedAccess(t.account,!0),await this._update(),t}catch(t){throw this._logger.error(`[acquireTokenInteractive] [${this._clientId}] [${e.authority}] [${e.scopes?.join(" ")}] error: ${t}`),t}}))}async acquireTokenByRefreshToken(e){this._logger.debug(`[acquireTokenByRefreshToken] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}]`);const t=await this._sequencer.queue(async()=>{const t=await this._pca.acquireTokenByRefreshToken(e);return await this._update(),t});return t&&this.isBrokerAvailable&&t.account&&await this._accountAccess.setAllowedAccess(t.account,!0),t}removeAccount(e){return this.isBrokerAvailable?this._accountAccess.setAllowedAccess(e,!1):this._sequencer.queue(()=>this._pca.getTokenCache().removeAccount(e))}_registerOnSecretStorageChanged(){return this.isBrokerAvailable?this._accountAccess.onDidAccountAccessChange(()=>this._sequencer.queue(()=>this._update())):this._secretStorageCachePlugin.onDidChange(()=>this._sequencer.queue(()=>this._update()))}_lastSeen=new Map;_verifyIfUsingBroker(e){if(!e.fromNativeBroker)return!0;let t=e.account.nativeAccountId;t||(this._logger.error(`[verifyIfUsingBroker] [${this._clientId}] [${e.account.username}] no nativeAccountId found. Using homeAccountId instead.`),t=e.account.homeAccountId);const n=this._lastSeen.get(t),r=e.account.idTokenClaims.iat;return n?n!==r&&(this._lastSeen.set(t,r),!0):(this._lastSeen.set(t,r),!0)}async _update(){const e=this._accounts;this._logger.debug(`[update] [${this._clientId}] CachedPublicClientApplication update before: ${e.length}`),this._pca.clearCache();let t=await this._pca.getAllAccounts();this.isBrokerAvailable&&(t=t.filter(e=>this._accountAccess.isAllowedAccess(e))),this._accounts=t,this._logger.debug(`[update] [${this._clientId}] CachedPublicClientApplication update after: ${t.length}`);const n=new Set(e.map(e=>e.homeAccountId)),r=new Set(t.map(e=>e.homeAccountId)),i=t.filter(e=>!n.has(e.homeAccountId)),o=e.filter(e=>!r.has(e.homeAccountId));(i.length>0||o.length>0)&&(this._onDidAccountsChangeEmitter.fire({added:i,changed:[],deleted:o}),this._logger.debug(`[update] [${this._clientId}] CachedPublicClientApplication accounts changed. added: ${i.length}, deleted: ${o.length}`),t.length||(this._logger.debug(`[update] [${this._clientId}] CachedPublicClientApplication final account deleted. Firing event.`),this._onDidRemoveLastAccountEmitter.fire())),this._logger.debug(`[update] [${this._clientId}] CachedPublicClientApplication update complete`)}}t.CachedPublicClientApplication=u;class l{current=Promise.resolve(null);queue(e){return this.current=this.current.then(()=>e(),()=>e())}}t.Sequencer=l},6254:(e,t,n)=>{const r=n(3908);e.exports=(e,t)=>new r(e,t).minor},6348:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default="00000000-0000-0000-0000-000000000000"},6492:(e,t,n)=>{"use strict";n.d(t,{Bw:()=>u,Ev:()=>w,Fk:()=>A,HP:()=>r,Hr:()=>c,LZ:()=>o,QW:()=>S,Vj:()=>y,Vo:()=>h,Yd:()=>a,Yp:()=>p,dI:()=>g,eT:()=>s,fc:()=>f,jy:()=>l,kI:()=>I,l0:()=>m,m5:()=>i,qT:()=>d,s4:()=>v,xW:()=>C});var r=void 0,i="",o="channels",s="core",a="createPerfMgr",c="disabled",u="extensionConfig",l="extensions",d="processTelemetry",h="priority",f="eventsSent",p="eventsDiscarded",g="eventsSendRequest",m="perfEvent",v="offlineEventsStored",y="offlineBatchSent",w="offlineBatchDrop",I="getPerfMgr",A="domain",S="path",C="Not dynamic - "},6535:(e,t,n)=>{"use strict";n.d(t,{Si:()=>v,VN:()=>m,Z1:()=>g});var r=n(269),i=n(6182),o=n(7292),s=n(6492),a=4294967296,c=4294967295,u=123456789,l=987654321,d=!1,h=u,f=l;function p(){try{var e=2147483647&(0,r.f0d)();(t=(Math.random()*a^e)+e)<0&&(t>>>=0),h=u+t&c,f=l-t&c,d=!0}catch(e){}var t}function g(e){return e>0?Math.floor(m()/c*(e+1))>>>0:0}function m(e){var t=0,n=(0,o.MY)()||(0,o.iN)();return n&&n.getRandomValues&&(t=n.getRandomValues(new Uint32Array(1))[0]&c),0===t&&(0,o.lT)()&&(d||p(),t=function(){var e=((f=36969*(65535&f)+(f>>16)&c)<<16)+(65535&(h=18e3*(65535&h)+(h>>16)&c))>>>0&c;return e>>>=0}()&c),0===t&&(t=Math.floor(a*Math.random()|0)),e||(t>>>=0),t}function v(e){void 0===e&&(e=22);for(var t=m()>>>0,n=0,r=s.m5;r[i.oI]<e;)n++,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===n&&(t=(m()<<2&4294967295|3&t)>>>0,n=0);return r}},6548:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTelemetryReporter=void 0,t.BaseTelemetryReporter=class{constructor(e,t,n){this.telemetrySender=e,this.vscodeAPI=t,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,n),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,t,n,r){r?this.telemetrySender.sendEventData(e,{properties:t,measurements:n}):this.telemetryLogger.logUsage(e,{properties:t,measurements:n})}sendTelemetryEvent(e,t,n){this.internalSendTelemetryEvent(e,t,n,!1)}sendRawTelemetryEvent(e,t,n){const r={...t};for(const e of Object.keys(r??{})){const t=r[e];"string"==typeof e&&void 0!==t&&(r[e]=new this.vscodeAPI.TelemetryTrustedValue("string"==typeof t?t:t.value))}this.sendTelemetryEvent(e,r,n)}sendDangerousTelemetryEvent(e,t,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,t,n,!0)}internalSendTelemetryErrorEvent(e,t,n,r){r?this.telemetrySender.sendEventData(e,{properties:t,measurements:n}):this.telemetryLogger.logError(e,{properties:t,measurements:n})}sendTelemetryErrorEvent(e,t,n){this.internalSendTelemetryErrorEvent(e,t,n,!1)}sendDangerousTelemetryErrorEvent(e,t,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,t,n,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}}},6585:e=>{var t=1e3,n=60*t,r=60*n,i=24*r,o=7*i;function s(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,a){a=a||{};var c,u,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(s){var a=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*o;case"days":case"day":case"d":return a*i;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===l&&isFinite(e))return a.long?(c=e,(u=Math.abs(c))>=i?s(c,u,i,"day"):u>=r?s(c,u,r,"hour"):u>=n?s(c,u,n,"minute"):u>=t?s(c,u,t,"second"):c+" ms"):function(e){var o=Math.abs(e);return o>=i?Math.round(e/i)+"d":o>=r?Math.round(e/r)+"h":o>=n?Math.round(e/n)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},6780:(e,t,n)=>{const r=n(8311);e.exports=(e,t,n)=>(e=new r(e,n),t=new r(t,n),e.intersects(t,n))},6874:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},6928:e=>{"use strict";e.exports=require("path")},6953:(e,t,n)=>{const r=n(144);e.exports=(e,t)=>{const n=r(e,t);return n?n.version:null}},6982:e=>{"use strict";e.exports=require("crypto")},7016:e=>{"use strict";e.exports=require("url")},7019:(e,t,n)=>{const r=n(1977),i=n(4623),o={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},s={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};e.exports=function(e,t){if(!e||!t)return;const n=t.asymmetricKeyType;if(!n)return;const a=o[n];if(!a)throw new Error(`Unknown key type "${n}".`);if(!a.includes(e))throw new Error(`"alg" parameter for "${n}" key type must be one of: ${a.join(", ")}.`);if(r)switch(n){case"ec":const n=t.asymmetricKeyDetails.namedCurve,r=s[e];if(n!==r)throw new Error(`"alg" parameter "${e}" requires curve "${r}".`);break;case"rsa-pss":if(i){const n=parseInt(e.slice(-3),10),{hashAlgorithm:r,mgf1HashAlgorithm:i,saltLength:o}=t.asymmetricKeyDetails;if(r!==`sha${n}`||i!==r)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}.`);if(void 0!==o&&o>n>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}.`)}}}},7059:(e,t,n)=>{const r=n(560);e.exports=(e,t,n)=>r(e,t,n)<0},7075:(e,t,n)=>{const r=n(3908),i=n(3904),{ANY:o}=i,s=n(8311),a=n(7638),c=n(5580),u=n(7059),l=n(5200),d=n(4089);e.exports=(e,t,n,h)=>{let f,p,g,m,v;switch(e=new r(e,h),t=new s(t,h),n){case">":f=c,p=l,g=u,m=">",v=">=";break;case"<":f=u,p=d,g=c,m="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,h))return!1;for(let n=0;n<t.set.length;++n){const r=t.set[n];let s=null,a=null;if(r.forEach(e=>{e.semver===o&&(e=new i(">=0.0.0")),s=s||e,a=a||e,f(e.semver,s.semver,h)?s=e:g(e.semver,a.semver,h)&&(a=e)}),s.operator===m||s.operator===v)return!1;if((!a.operator||a.operator===m)&&p(e,a.semver))return!1;if(a.operator===v&&g(e,a.semver))return!1}return!0}},7083:e=>{var t=1/0,n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,a=Object.prototype.toString;function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return function(e,u){var l;if("function"!=typeof u)throw new TypeError("Expected a function");return e=function(e){var u=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==a.call(e)}(e))return NaN;if(c(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=c(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var u=i.test(e);return u||o.test(e)?s(e.slice(2),u?2:8):r.test(e)?NaN:+e}(e))===t||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),l=u%1;return u==u?l?u-l:u:0}(e),function(){return--e>0&&(l=u.apply(this,arguments)),e<=1&&(u=void 0),l}}(2,e)}},7247:e=>{"use strict";e.exports=require("./msal-node-runtime")},7260:(e,t,n)=>{var r=n(5747);e.exports=function(e,t){t=t||{};var n=r.decode(e,t);if(!n)return null;var i=n.payload;if("string"==typeof i)try{var o=JSON.parse(i);null!==o&&"object"==typeof o&&(i=o)}catch(e){}return!0===t.complete?{header:n.header,payload:i,signature:n.signature}:i}},7272:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},7292:(e,t,n)=>{"use strict";n.d(t,{$Z:()=>F,Iu:()=>H,L0:()=>N,MY:()=>P,PV:()=>L,R7:()=>x,U5:()=>T,Uf:()=>D,Z:()=>b,cU:()=>_,g$:()=>E,hm:()=>k,iN:()=>R,lT:()=>M,lV:()=>O,xk:()=>U});var r=n(5664),i=n(269),o=n(6182),s=n(3673),a=n(6492),c="documentMode",u="location",l="console",d="JSON",h="crypto",f="msCrypto",p="ReactNative",g="msie",m="trident/",v="XMLHttpRequest",y=null,w=null,I=!1,A=null,S=null;function C(e,t){var n=!1;if(e){try{if(!(n=t in e)){var o=e[r.vR];o&&(n=t in o)}}catch(e){}if(!n)try{var s=new e;n=!(0,i.b07)(s[t])}catch(e){}}return n}function _(e){I=e}function E(e){if(e&&I){var t=(0,i.zS2)("__mockLocation");if(t)return t}return typeof location===r._1&&location?location:(0,i.zS2)(u)}function T(){return typeof console!==r.bA?console:(0,i.zS2)(l)}function b(){return Boolean(typeof JSON===r._1&&JSON||null!==(0,i.zS2)(d))}function k(){return b()?JSON||(0,i.zS2)(d):null}function P(){return(0,i.zS2)(h)}function R(){return(0,i.zS2)(f)}function O(){var e=(0,i.w3n)();return!(!e||!e.product)&&e.product===p}function M(){var e=(0,i.w3n)();if(e&&(e[o.tX]!==w||null===y)){var t=((w=e[o.tX])||a.m5)[o.OL]();y=(0,s.Ju)(t,g)||(0,s.Ju)(t,m)}return y}function N(e){if(void 0===e&&(e=null),!e){var t=(0,i.w3n)()||{};e=t?(t.userAgent||a.m5)[o.OL]():a.m5}var n=(e||a.m5)[o.OL]();if((0,s.Ju)(n,g)){var r=(0,i.YEm)()||{};return Math.max(parseInt(n[o.sY](g)[1]),r[c]||0)}if((0,s.Ju)(n,m)){var u=parseInt(n[o.sY](m)[1]);if(u)return u+4}return null}function D(e){return null!==S&&!1!==e||(S=(0,i.w9M)()&&Boolean((0,i.w3n)().sendBeacon)),S}function x(e){var t=!1;try{t=!!(0,i.zS2)("fetch");var n=(0,i.zS2)("Request");t&&e&&n&&(t=C(n,"keepalive"))}catch(e){}return t}function L(){return null===A&&(A=typeof XDomainRequest!==r.bA)&&U()&&(A=A&&!C((0,i.zS2)(v),"withCredentials")),A}function U(){var e=!1;try{e=!!(0,i.zS2)(v)}catch(e){}return e}function q(e,t){if(e)for(var n=0;n<e[o.oI];n++){var r=e[n];if(r[o.RS]&&r[o.RS]===t)return r}return{}}function F(e){var t=(0,i.YEm)();return t&&e?q(t.querySelectorAll("meta"),e).content:null}function H(e){var t,n=(0,i.FJj)();if(n){var r=n.getEntriesByType("navigation")||[];t=q((r[o.oI]>0?r[0]:{}).serverTiming,e).description}return t}},7358:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});var r=function(e,t){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=t}},7374:(e,t,n)=>{"use strict";n.d(t,{eL:()=>i,iD:()=>s,uG:()=>o});var r=n(4282),i=(0,r.H)({LocalStorage:0,SessionStorage:1}),o=(0,r.H)({AI:0,AI_AND_W3C:1,W3C:2}),s=(0,r.H)({Normal:1,Critical:2})},7414:(e,t,n)=>{const r=n(144);e.exports=(e,t)=>{const n=r(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}},7599:(e,t,n)=>{var r=n(2861).Buffer,i=n(8948),o=n(8789),s=n(2203),a=n(2851),c=n(9023),u=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function l(e){var t=e.split(".",1)[0];return function(e){if(function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e))return e;try{return JSON.parse(e)}catch(e){return}}(r.from(t,"base64").toString("binary"))}function d(e){return e.split(".")[2]}function h(e){return u.test(e)&&!!l(e)}function f(e,t,n){if(!t){var r=new Error("Missing algorithm parameter for jws.verify");throw r.code="MISSING_ALGORITHM",r}var i=d(e=a(e)),s=function(e){return e.split(".",2).join(".")}(e);return o(t).verify(s,i,n)}function p(e,t){if(t=t||{},!h(e=a(e)))return null;var n=l(e);if(!n)return null;var i=function(e,t){t=t||"utf8";var n=e.split(".")[1];return r.from(n,"base64").toString(t)}(e);return("JWT"===n.typ||t.json)&&(i=JSON.parse(i,t.encoding)),{header:n,payload:i,signature:d(e)}}function g(e){var t=(e=e||{}).secret||e.publicKey||e.key,n=new i(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=n,this.signature=new i(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}c.inherits(g,s),g.prototype.verify=function(){try{var e=f(this.signature.buffer,this.algorithm,this.key.buffer),t=p(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},g.decode=p,g.isValid=h,g.verify=f,e.exports=g},7631:(e,t,n)=>{const r=n(8311);e.exports=(e,t)=>new r(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "))},7638:(e,t,n)=>{const r=n(8311);e.exports=(e,t,n)=>{try{t=new r(t,n)}catch(e){return!1}return t.test(e)}},7651:(e,t,n)=>{const r=n(855),i=n(4977),o=n(7019),s=n(5747),a=n(6111),c=n(7914),u=n(8928),l=n(3639),d=n(9001),h=n(5931),f=n(7083),{KeyObject:p,createSecretKey:g,createPrivateKey:m}=n(6982),v=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];i&&v.splice(3,0,"PS256","PS384","PS512");const y={expiresIn:{isValid:function(e){return u(e)||h(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return u(e)||h(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return h(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:a.bind(null,v),message:'"algorithm" must be a valid string enum value'},header:{isValid:d,message:'"header" must be an object'},encoding:{isValid:h,message:'"encoding" must be a string'},issuer:{isValid:h,message:'"issuer" must be a string'},subject:{isValid:h,message:'"subject" must be a string'},jwtid:{isValid:h,message:'"jwtid" must be a string'},noTimestamp:{isValid:c,message:'"noTimestamp" must be a boolean'},keyid:{isValid:h,message:'"keyid" must be a string'},mutatePayload:{isValid:c,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:c,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:c,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},w={iat:{isValid:l,message:'"iat" should be a number of seconds'},exp:{isValid:l,message:'"exp" should be a number of seconds'},nbf:{isValid:l,message:'"nbf" should be a number of seconds'}};function I(e,t,n,r){if(!d(n))throw new Error('Expected "'+r+'" to be a plain object.');Object.keys(n).forEach(function(i){const o=e[i];if(o){if(!o.isValid(n[i]))throw new Error(o.message)}else if(!t)throw new Error('"'+i+'" is not allowed in "'+r+'"')})}const A={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},S=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];e.exports=function(e,t,n,i){"function"==typeof n?(i=n,n={}):n=n||{};const a="object"==typeof e&&!Buffer.isBuffer(e),c=Object.assign({alg:n.algorithm||"HS256",typ:a?"JWT":void 0,kid:n.keyid},n.header);function u(e){if(i)return i(e);throw e}if(!t&&"none"!==n.algorithm)return u(new Error("secretOrPrivateKey must have a value"));if(null!=t&&!(t instanceof p))try{t=m(t)}catch(e){try{t=g("string"==typeof t?Buffer.from(t):t)}catch(e){return u(new Error("secretOrPrivateKey is not valid key material"))}}if(c.alg.startsWith("HS")&&"secret"!==t.type)return u(new Error(`secretOrPrivateKey must be a symmetric key when using ${c.alg}`));if(/^(?:RS|PS|ES)/.test(c.alg)){if("private"!==t.type)return u(new Error(`secretOrPrivateKey must be an asymmetric key when using ${c.alg}`));if(!n.allowInsecureKeySizes&&!c.alg.startsWith("ES")&&void 0!==t.asymmetricKeyDetails&&t.asymmetricKeyDetails.modulusLength<2048)return u(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`))}if(void 0===e)return u(new Error("payload is required"));if(a){try{!function(e){I(w,!0,e,"payload")}(e)}catch(e){return u(e)}n.mutatePayload||(e=Object.assign({},e))}else{const t=S.filter(function(e){return void 0!==n[e]});if(t.length>0)return u(new Error("invalid "+t.join(",")+" option for "+typeof e+" payload"))}if(void 0!==e.exp&&void 0!==n.expiresIn)return u(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(void 0!==e.nbf&&void 0!==n.notBefore)return u(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{!function(e){I(y,!1,e,"options")}(n)}catch(e){return u(e)}if(!n.allowInvalidAsymmetricKeyTypes)try{o(c.alg,t)}catch(e){return u(e)}const l=e.iat||Math.floor(Date.now()/1e3);if(n.noTimestamp?delete e.iat:a&&(e.iat=l),void 0!==n.notBefore){try{e.nbf=r(n.notBefore,l)}catch(e){return u(e)}if(void 0===e.nbf)return u(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(void 0!==n.expiresIn&&"object"==typeof e){try{e.exp=r(n.expiresIn,l)}catch(e){return u(e)}if(void 0===e.exp)return u(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(A).forEach(function(t){const r=A[t];if(void 0!==n[t]){if(void 0!==e[r])return u(new Error('Bad "options.'+t+'" option. The payload already has an "'+r+'" property.'));e[r]=n[t]}});const d=n.encoding||"utf8";if("function"!=typeof i){let r=s.sign({header:c,payload:e,secret:t,encoding:d});if(!n.allowInsecureKeySizes&&/^(?:RS|PS)/.test(c.alg)&&r.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`);return r}i=i&&f(i),s.createSign({header:c,privateKey:t,payload:e,encoding:d}).once("error",i).once("done",function(e){if(!n.allowInsecureKeySizes&&/^(?:RS|PS)/.test(c.alg)&&e.length<256)return i(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`));i(null,e)})}},7773:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.activate=async function(e,t){e.globalState.update("msalMigration",!1);const n=new h.UriEventHandler;e.subscriptions.push(n);const r=new d.BetterTokenStorage("microsoft.login.keylist",e),i=new l.AzureActiveDirectoryService(f.default,e,n,r,t,u.Environment.AzureCloud);await i.initialize(),e.subscriptions.push(c.authentication.registerAuthenticationProvider("microsoft","Microsoft",{onDidChangeSessions:i.onDidChangeSessions,getSessions:(e,t)=>i.getSessions(e,t),createSession:async(e,n)=>{try{return t.sendTelemetryEvent("login",{scopes:JSON.stringify(e.map(e=>e.replace(/[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/i,"{guid}")))}),await i.createSession(e,n)}catch(e){throw t.sendTelemetryEvent("loginFailed"),e}},removeSession:async e=>{try{t.sendTelemetryEvent("logout"),await i.removeSessionById(e)}catch(e){t.sendTelemetryEvent("logoutFailed")}}},{supportsMultipleAccounts:!0,supportedAuthorizationServers:[c.Uri.parse("https://login.microsoftonline.com/*"),c.Uri.parse("https://login.microsoftonline.com/*/v2.0")]}));let o=await p(e,t,n,r);e.subscriptions.push(c.workspace.onDidChangeConfiguration(async i=>{i.affectsConfiguration("microsoft-sovereign-cloud")&&(o?.dispose(),o=await p(e,t,n,r))}))},t.deactivate=function(){};const c=s(n(1398)),u=n(8197),l=n(8447),d=n(2410),h=n(3683),f=a(n(8377));async function p(e,t,n,r){const i=c.workspace.getConfiguration("microsoft-sovereign-cloud").get("environment");let o;if(!i)return;if("custom"===i){const e=c.workspace.getConfiguration("microsoft-sovereign-cloud").get("customEnvironment");if(!e)return void(await c.window.showErrorMessage(c.l10n.t("You must also specify a custom environment in order to use the custom environment auth provider."),c.l10n.t("Open settings"))&&await c.commands.executeCommand("workbench.action.openSettingsJson","microsoft-sovereign-cloud.customEnvironment"));try{u.Environment.add(e)}catch(e){return void(await c.window.showErrorMessage(c.l10n.t("Error validating custom environment setting: {0}",e.message),c.l10n.t("Open settings"))&&await c.commands.executeCommand("workbench.action.openSettings","microsoft-sovereign-cloud.customEnvironment"))}o=e.name}else o=i;const s=u.Environment.get(o);if(!s)return void await c.window.showErrorMessage(c.l10n.t("The environment `{0}` is not a valid environment.",o),c.l10n.t("Open settings"));const a=new l.AzureActiveDirectoryService(c.window.createOutputChannel(c.l10n.t("Microsoft Sovereign Cloud Authentication"),{log:!0}),e,n,r,t,s);await a.initialize();const d=c.authentication.registerAuthenticationProvider("microsoft-sovereign-cloud",o,{onDidChangeSessions:a.onDidChangeSessions,getSessions:e=>a.getSessions(e),createSession:async e=>{try{return t.sendTelemetryEvent("loginMicrosoftSovereignCloud",{scopes:JSON.stringify(e.map(e=>e.replace(/[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/i,"{guid}")))}),await a.createSession(e)}catch(e){throw t.sendTelemetryEvent("loginMicrosoftSovereignCloudFailed"),e}},removeSession:async e=>{try{t.sendTelemetryEvent("logoutMicrosoftSovereignCloud"),await a.removeSessionById(e)}catch(e){t.sendTelemetryEvent("logoutMicrosoftSovereignCloudFailed")}}},{supportsMultipleAccounts:!0});return e.subscriptions.push(d),d}},7847:(e,t,n)=>{"use strict";n.d(t,{i:()=>r,x:()=>i});var r=500,i="Microsoft_ApplicationInsights_BypassAjaxInstrumentation"},7867:(e,t,n)=>{"use strict";n.d(t,{$:()=>l,M:()=>d});var r,i=n(269),o=n(6182),s=n(6492),a=[s.fc,s.Yp,s.dI,s.l0],c=null;function u(e,t){return function(){var n=arguments,r=l(t);if(r){var i=r.listener;i&&i[e]&&i[e][o.y9](i,n)}}}function l(e){var t,n=c;return n||!0===e.disableDbgExt||(n=c||((t=(0,i.zS2)("Microsoft"))&&(c=t.ApplicationInsights),c)),n?n.ChromeDbgExt:null}function d(e){if(!r){r={};for(var t=0;t<a[o.oI];t++)r[a[t]]=u(a[t],e)}return r}},7914:e=>{var t=Object.prototype.toString;e.exports=function(e){return!0===e||!1===e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Boolean]"==t.call(e)}},7952:(e,t,n)=>{"use strict";n.d(t,{G:()=>c});var r=n(6149),i=n(269),o=n(4276),s=n(5130);function a(e,t){(0,r.ML)(e,null,null,t)}function c(e){var t=(0,i.YEm)(),n=(0,i.w3n)(),c=!1,u=[],l=1;!n||(0,i.hXl)(n.onLine)||n.onLine||(l=2);var d=0,h=m(),f=(0,r.Hm)((0,o.Z)("OfflineListener"),e);try{if(g((0,i.zkX)())&&(c=!0),t){var p=t.body||t;p.ononline&&g(p)&&(c=!0)}}catch(e){c=!1}function g(e){var t=!1;return e&&(t=(0,r.mB)(e,"online",y,f))&&(0,r.mB)(e,"offline",w,f),t}function m(){return 2!==d&&2!==l}function v(){var e=m();h!==e&&(h=e,(0,i.Iuo)(u,function(e){var t={isOnline:h,rState:l,uState:d};try{e(t)}catch(e){}}))}function y(){l=1,v()}function w(){l=2,v()}return{isOnline:function(){return h},isListening:function(){return c},unload:function(){var e=(0,i.zkX)();if(e&&c){if(a(e,f),t){var n=t.body||t;(0,i.b07)(n.ononline)||a(n,f)}c=!1}},addListener:function(e){return u[s.y5](e),{rm:function(){var t=u.indexOf(e);return t>-1?u.splice(t,1):void 0}}},setOnlineState:function(e){d=e,v()}}}},7975:(e,t,n)=>{"use strict";n.d(t,{HQ:()=>g,Rr:()=>u,Vj:()=>p,Vk:()=>d,Vt:()=>h,_T:()=>m,lq:()=>c,pJ:()=>l,qW:()=>v,xP:()=>f,zx:()=>a});var r=n(269),i=n(3775),o=n(7292),s=n(5130);function a(e,t,n){var i=t[s.oI],o=c(e,t);if(o[s.oI]!==i){for(var a=0,u=o;void 0!==n[u];)a++,u=(0,r.P0f)(o,0,147)+v(a);o=u}return o}function c(e,t){var n;return t&&(t=(0,r.EHq)((0,r.oJg)(t)))[s.oI]>150&&(n=(0,r.P0f)(t,0,150),(0,i.ZP)(e,2,57,"name is too long.  It has been truncated to 150 characters.",{name:t},!0)),n||t}function u(e,t,n){var o;return void 0===n&&(n=1024),t&&(n=n||1024,(t=(0,r.EHq)((0,r.oJg)(t)))[s.oI]>n&&(o=(0,r.P0f)(t,0,n),(0,i.ZP)(e,2,61,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),o||t}function l(e,t){return m(e,t,2048,66)}function d(e,t){var n;return t&&t[s.oI]>32768&&(n=(0,r.P0f)(t,0,32768),(0,i.ZP)(e,2,56,"message is too long, it has been truncated to 32768 characters.",{message:t},!0)),n||t}function h(e,t){var n;if(t){var o=""+t;o[s.oI]>32768&&(n=(0,r.P0f)(o,0,32768),(0,i.ZP)(e,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:t},!0))}return n||t}function f(e,t){if(t){var n={};(0,r.zav)(t,function(t,c){if((0,r.Gvm)(c)&&(0,o.Z)())try{c=(0,o.hm)()[s.Jj](c)}catch(t){(0,i.ZP)(e,2,49,"custom property is not valid",{exception:t},!0)}c=u(e,c,8192),t=a(e,t,n),n[t]=c}),t=n}return t}function p(e,t){if(t){var n={};(0,r.zav)(t,function(t,r){t=a(e,t,n),n[t]=r}),t=n}return t}function g(e,t){return t?m(e,t,128,69)[s.xE]():t}function m(e,t,n,o){var a;return t&&(t=(0,r.EHq)((0,r.oJg)(t)))[s.oI]>n&&(a=(0,r.P0f)(t,0,n),(0,i.ZP)(e,2,o,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),a||t}function v(e){var t="00"+e;return(0,r.hKY)(t,t[s.oI]-3)}},8016:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REDIRECT_URI=void 0,t.isSupportedClient=function(e){return n.includes(e.scheme)||/(?:^|\.)vscode\.dev$/.test(e.authority)||/(?:^|\.)github\.dev$/.test(e.authority)||/^localhost:\d+$/.test(e.authority)||/^127\.0\.0\.1:\d+$/.test(e.authority)},t.DEFAULT_REDIRECT_URI="https://vscode.dev/redirect";const n=["vscode","vscode-insiders","vscode-wsl","vscode-exploration"]},8151:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AuthError:()=>j,AuthErrorCodes:()=>r,AuthErrorMessage:()=>B,AzureCloudInstance:()=>Nn,ClientApplication:()=>ns,ClientAssertion:()=>Qo,ClientAuthError:()=>Le,ClientAuthErrorCodes:()=>i,ClientAuthErrorMessage:()=>xe,ClientConfigurationError:()=>vt,ClientConfigurationErrorCodes:()=>o,ClientConfigurationErrorMessage:()=>mt,ClientCredentialClient:()=>ss,ConfidentialClientApplication:()=>cs,CryptoProvider:()=>jo,DeviceCodeClient:()=>is,DistributedCachePlugin:()=>Us,InteractionRequiredAuthError:()=>Pi,InteractionRequiredAuthErrorCodes:()=>a,InteractionRequiredAuthErrorMessage:()=>ki,LogLevel:()=>On,Logger:()=>Mn,ManagedIdentityApplication:()=>Ls,ManagedIdentitySourceNames:()=>Jt,OnBehalfOfClient:()=>as,PromptValue:()=>w,ProtocolMode:()=>ze,PublicClientApplication:()=>os,ResponseMode:()=>I,ServerError:()=>Rn,TokenCache:()=>Xo,TokenCacheContext:()=>Ni,UsernamePasswordClient:()=>es,internals:()=>s,version:()=>Zo});var r={};n.r(r),n.d(r,{postRequestFailed:()=>F,unexpectedError:()=>q});var i={};n.r(i),n.d(i,{authTimeNotFound:()=>ne,authorizationCodeMissingFromServerResponse:()=>Ee,bindingKeyNotRemoved:()=>Te,cannotAppendScopeSet:()=>ue,cannotRemoveEmptyScope:()=>ce,clientInfoDecodingError:()=>z,clientInfoEmptyError:()=>V,deviceCodeExpired:()=>he,deviceCodePollingCancelled:()=>de,deviceCodeUnknownError:()=>fe,emptyInputScopeSet:()=>le,endSessionEndpointNotSupported:()=>be,endpointResolutionError:()=>W,hashNotDeserialized:()=>Q,invalidAssertion:()=>Ie,invalidCacheEnvironment:()=>me,invalidCacheRecord:()=>ge,invalidClientCredential:()=>Ae,invalidState:()=>J,keyIdMissing:()=>ke,maxAgeTranspired:()=>re,methodNotImplemented:()=>Me,missingTenantIdError:()=>Oe,multipleMatchingAccounts:()=>oe,multipleMatchingAppMetadata:()=>se,multipleMatchingTokens:()=>ie,nestedAppAuthBridgeDisabled:()=>Ne,networkError:()=>X,noAccountFound:()=>ve,noAccountInSilentRequest:()=>pe,noCryptoObject:()=>ye,noNetworkConnectivity:()=>Pe,nonceMismatch:()=>te,nullOrEmptyToken:()=>G,openIdConfigError:()=>Y,requestCannotBeMade:()=>ae,stateMismatch:()=>Z,stateNotFound:()=>ee,tokenClaimsCnfRequiredForSignedJwt:()=>_e,tokenParsingError:()=>K,tokenRefreshRequired:()=>Se,unexpectedCredentialType:()=>we,userCanceled:()=>Re,userTimeoutReached:()=>Ce});var o={};n.r(o),n.d(o,{authorityMismatch:()=>ht,authorityUriInsecure:()=>We,cannotAllowPlatformBroker:()=>dt,cannotSetOIDCOptions:()=>lt,claimsRequestParsingError:()=>Ge,emptyInputScopesError:()=>Qe,invalidAuthenticationHeader:()=>ut,invalidAuthorityMetadata:()=>it,invalidAuthorizePostBodyParameters:()=>pt,invalidClaims:()=>Je,invalidCloudDiscoveryMetadata:()=>rt,invalidCodeChallengeMethod:()=>tt,invalidRequestMethodForEAR:()=>ft,logoutRequestEmpty:()=>et,missingNonceAuthenticationHeader:()=>ct,missingSshJwk:()=>st,missingSshKid:()=>at,pkceParamsMissing:()=>nt,redirectUriEmpty:()=>Ke,tokenRequestEmpty:()=>Ze,untrustedAuthority:()=>ot,urlEmptyError:()=>Ye,urlParseError:()=>Xe});var s={};n.r(s),n.d(s,{Deserializer:()=>Ft,Serializer:()=>c});var a={};n.r(a),n.d(a,{badToken:()=>_i,consentRequired:()=>Si,interactionRequired:()=>Ai,loginRequired:()=>Ci,nativeAccountUnavailable:()=>yi,noTokensFound:()=>vi,refreshTokenExpired:()=>wi,uxNotAllowed:()=>Ii});class c{static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){const t={};return Object.keys(e).map(function(n){const r=e[n];t[n]={home_account_id:r.homeAccountId,environment:r.environment,realm:r.realm,local_account_id:r.localAccountId,username:r.username,authority_type:r.authorityType,name:r.name,client_info:r.clientInfo,last_modification_time:r.lastModificationTime,last_modification_app:r.lastModificationApp,tenantProfiles:r.tenantProfiles?.map(e=>JSON.stringify(e))}}),t}static serializeIdTokens(e){const t={};return Object.keys(e).map(function(n){const r=e[n];t[n]={home_account_id:r.homeAccountId,environment:r.environment,credential_type:r.credentialType,client_id:r.clientId,secret:r.secret,realm:r.realm}}),t}static serializeAccessTokens(e){const t={};return Object.keys(e).map(function(n){const r=e[n];t[n]={home_account_id:r.homeAccountId,environment:r.environment,credential_type:r.credentialType,client_id:r.clientId,secret:r.secret,realm:r.realm,target:r.target,cached_at:r.cachedAt,expires_on:r.expiresOn,extended_expires_on:r.extendedExpiresOn,refresh_on:r.refreshOn,key_id:r.keyId,token_type:r.tokenType,requestedClaims:r.requestedClaims,requestedClaimsHash:r.requestedClaimsHash,userAssertionHash:r.userAssertionHash}}),t}static serializeRefreshTokens(e){const t={};return Object.keys(e).map(function(n){const r=e[n];t[n]={home_account_id:r.homeAccountId,environment:r.environment,credential_type:r.credentialType,client_id:r.clientId,secret:r.secret,family_id:r.familyId,target:r.target,realm:r.realm}}),t}static serializeAppMetadata(e){const t={};return Object.keys(e).map(function(n){const r=e[n];t[n]={client_id:r.clientId,environment:r.environment,family_id:r.familyId}}),t}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}}const u={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},l=[u.OPENID_SCOPE,u.PROFILE_SCOPE,u.OFFLINE_ACCESS_SCOPE],d=[...l,u.EMAIL_SCOPE],h="Content-Type",f="Retry-After",p="X-AnchorMailbox",g="x-ms-request-id",m="x-ms-httpver",v={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},y="access_token",w={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},I={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},A="Generic",S={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},C="appmetadata",_="1",E="authority-metadata",T="config",b="cache",k="network",P="hardcoded_values",R={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},O={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},M="throttling",N="0",D="2",x="3",L="4",U="base64",q="unexpected_error",F="post_request_failed",H={[q]:"Unexpected error in authentication.",[F]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},B={unexpectedError:{code:q,desc:H[q]},postRequestFailed:{code:F,desc:H[F]}};class j extends Error{constructor(e,t,n){super(t?`${e}: ${t}`:e),Object.setPrototypeOf(this,j.prototype),this.errorCode=e||u.EMPTY_STRING,this.errorMessage=t||u.EMPTY_STRING,this.subError=n||u.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function $(e,t){return new j(e,t?`${H[e]} ${t}`:H[e])}const z="client_info_decoding_error",V="client_info_empty_error",K="token_parsing_error",G="null_or_empty_token",W="endpoints_resolution_error",X="network_error",Y="openid_config_error",Q="hash_not_deserialized",J="invalid_state",Z="state_mismatch",ee="state_not_found",te="nonce_mismatch",ne="auth_time_not_found",re="max_age_transpired",ie="multiple_matching_tokens",oe="multiple_matching_accounts",se="multiple_matching_appMetadata",ae="request_cannot_be_made",ce="cannot_remove_empty_scope",ue="cannot_append_scopeset",le="empty_input_scopeset",de="device_code_polling_cancelled",he="device_code_expired",fe="device_code_unknown_error",pe="no_account_in_silent_request",ge="invalid_cache_record",me="invalid_cache_environment",ve="no_account_found",ye="no_crypto_object",we="unexpected_credential_type",Ie="invalid_assertion",Ae="invalid_client_credential",Se="token_refresh_required",Ce="user_timeout_reached",_e="token_claims_cnf_required_for_signedjwt",Ee="authorization_code_missing_from_server_response",Te="binding_key_not_removed",be="end_session_endpoint_not_supported",ke="key_id_missing",Pe="no_network_connectivity",Re="user_canceled",Oe="missing_tenant_id_error",Me="method_not_implemented",Ne="nested_app_auth_bridge_disabled",De={[z]:"The client info could not be parsed/decoded correctly",[V]:"The client info was empty",[K]:"Token cannot be parsed",[G]:"The token is null or empty",[W]:"Endpoints cannot be resolved",[X]:"Network request failed",[Y]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Q]:"The hash parameters could not be deserialized",[J]:"State was not the expected format",[Z]:"State mismatch error",[ee]:"State not found",[te]:"Nonce mismatch error",[ne]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[re]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[ie]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[oe]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[se]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[ae]:"Token request cannot be made without authorization code or refresh token.",[ce]:"Cannot remove null or empty scope from ScopeSet",[ue]:"Cannot append ScopeSet",[le]:"Empty input ScopeSet cannot be processed",[de]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[he]:"Device code is expired.",[fe]:"Device code stopped polling for unknown reasons.",[pe]:"Please pass an account object, silent flow is not supported without account information",[ge]:"Cache record object was null or undefined.",[me]:"Invalid environment when attempting to create cache entry",[ve]:"No account found in cache for given key.",[ye]:"No crypto object detected.",[we]:"Unexpected credential type.",[Ie]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[Ae]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Se]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Ce]:"User defined timeout for device code polling reached",[_e]:"Cannot generate a POP jwt if the token_claims are not populated",[Ee]:"Server response does not contain an authorization code to proceed",[Te]:"Could not remove the credential's binding key from storage.",[be]:"The provided authority does not support logout",[ke]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Pe]:"No network connectivity. Check your internet connection.",[Re]:"User cancelled the flow.",[Oe]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Me]:"This method has not been implemented",[Ne]:"The nested app auth bridge is disabled"},xe={clientInfoDecodingError:{code:z,desc:De[z]},clientInfoEmptyError:{code:V,desc:De[V]},tokenParsingError:{code:K,desc:De[K]},nullOrEmptyToken:{code:G,desc:De[G]},endpointResolutionError:{code:W,desc:De[W]},networkError:{code:X,desc:De[X]},unableToGetOpenidConfigError:{code:Y,desc:De[Y]},hashNotDeserialized:{code:Q,desc:De[Q]},invalidStateError:{code:J,desc:De[J]},stateMismatchError:{code:Z,desc:De[Z]},stateNotFoundError:{code:ee,desc:De[ee]},nonceMismatchError:{code:te,desc:De[te]},authTimeNotFoundError:{code:ne,desc:De[ne]},maxAgeTranspired:{code:re,desc:De[re]},multipleMatchingTokens:{code:ie,desc:De[ie]},multipleMatchingAccounts:{code:oe,desc:De[oe]},multipleMatchingAppMetadata:{code:se,desc:De[se]},tokenRequestCannotBeMade:{code:ae,desc:De[ae]},removeEmptyScopeError:{code:ce,desc:De[ce]},appendScopeSetError:{code:ue,desc:De[ue]},emptyInputScopeSetError:{code:le,desc:De[le]},DeviceCodePollingCancelled:{code:de,desc:De[de]},DeviceCodeExpired:{code:he,desc:De[he]},DeviceCodeUnknownError:{code:fe,desc:De[fe]},NoAccountInSilentRequest:{code:pe,desc:De[pe]},invalidCacheRecord:{code:ge,desc:De[ge]},invalidCacheEnvironment:{code:me,desc:De[me]},noAccountFound:{code:ve,desc:De[ve]},noCryptoObj:{code:ye,desc:De[ye]},unexpectedCredentialType:{code:we,desc:De[we]},invalidAssertion:{code:Ie,desc:De[Ie]},invalidClientCredential:{code:Ae,desc:De[Ae]},tokenRefreshRequired:{code:Se,desc:De[Se]},userTimeoutReached:{code:Ce,desc:De[Ce]},tokenClaimsRequired:{code:_e,desc:De[_e]},noAuthorizationCodeFromServer:{code:Ee,desc:De[Ee]},bindingKeyNotRemovedError:{code:Te,desc:De[Te]},logoutNotSupported:{code:be,desc:De[be]},keyIdMissing:{code:ke,desc:De[ke]},noNetworkConnectivity:{code:Pe,desc:De[Pe]},userCanceledError:{code:Re,desc:De[Re]},missingTenantIdError:{code:Oe,desc:De[Oe]},nestedAppAuthBridgeDisabled:{code:Ne,desc:De[Ne]}};class Le extends j{constructor(e,t){super(e,t?`${De[e]}: ${t}`:De[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,Le.prototype)}}function Ue(e,t){return new Le(e,t)}function qe(e,t){if(!e)throw Ue(V);try{const n=t(e);return JSON.parse(n)}catch(e){throw Ue(z)}}function Fe(e){if(!e)throw Ue(z);const t=e.split(".",2);return{uid:t[0],utid:t.length<2?u.EMPTY_STRING:t[1]}}function He(e,t){return!!e&&!!t&&e===t.split(".")[1]}function Be(e,t,n,r){if(r){const{oid:t,sub:n,tid:i,name:o,tfp:s,acr:a,preferred_username:c,upn:u,login_hint:l}=r,d=i||s||a||"";return{tenantId:d,localAccountId:t||n||"",name:o,username:c||u||"",loginHint:l,isHomeTenant:He(d,e)}}return{tenantId:n,localAccountId:t,username:"",isHomeTenant:He(n,e)}}function je(e,t,n,r){let i=e;if(t){const{isHomeTenant:n,...r}=t;i={...e,...r}}if(n){const{isHomeTenant:t,...o}=Be(e.homeAccountId,e.localAccountId,e.tenantId,n);return i={...i,...o,idTokenClaims:n,idToken:r},i}return i}function $e(e){return e&&(e.tid||e.tfp||e.acr)||null}const ze={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};class Ve{getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,loginHint:this.loginHint,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e])),dataBoundary:this.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,t,n){const r=new Ve;let i;1===t.authorityType?r.authorityType="ADFS":t.protocolMode===ze.OIDC?r.authorityType=A:r.authorityType="MSSTS",e.clientInfo&&n&&(i=qe(e.clientInfo,n),i.xms_tdbr&&(r.dataBoundary="EU"===i.xms_tdbr?"EU":"None")),r.clientInfo=e.clientInfo,r.homeAccountId=e.homeAccountId,r.nativeAccountId=e.nativeAccountId;const o=e.environment||t&&t.getPreferredCache();if(!o)throw Ue(me);r.environment=o,r.realm=i?.utid||$e(e.idTokenClaims)||"",r.localAccountId=i?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";const s=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,a=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(r.username=s||a||"",r.loginHint=e.idTokenClaims?.login_hint,r.name=e.idTokenClaims?.name||"",r.cloudGraphHostName=e.cloudGraphHostName,r.msGraphHost=e.msGraphHost,e.tenantProfiles)r.tenantProfiles=e.tenantProfiles;else{const t=Be(e.homeAccountId,r.localAccountId,r.realm,e.idTokenClaims);r.tenantProfiles=[t]}return r}static createFromAccountInfo(e,t,n){const r=new Ve;return r.authorityType=e.authorityType||A,r.homeAccountId=e.homeAccountId,r.localAccountId=e.localAccountId,r.nativeAccountId=e.nativeAccountId,r.realm=e.tenantId,r.environment=e.environment,r.username=e.username,r.name=e.name,r.loginHint=e.loginHint,r.cloudGraphHostName=t,r.msGraphHost=n,r.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),r.dataBoundary=e.dataBoundary,r}static generateHomeAccountId(e,t,n,r,i){if(1!==t&&2!==t){if(e)try{const t=qe(e,r.base64Decode);if(t.uid&&t.utid)return`${t.uid}.${t.utid}`}catch(e){}n.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType")}static accountInfoIsEqual(e,t,n){if(!e||!t)return!1;let r=!0;if(n){const n=e.idTokenClaims||{},i=t.idTokenClaims||{};r=n.iat===i.iat&&n.nonce===i.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.loginHint===t.loginHint&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&r}}const Ke="redirect_uri_empty",Ge="claims_request_parsing_error",We="authority_uri_insecure",Xe="url_parse_error",Ye="empty_url_error",Qe="empty_input_scopes_error",Je="invalid_claims",Ze="token_request_empty",et="logout_request_empty",tt="invalid_code_challenge_method",nt="pkce_params_missing",rt="invalid_cloud_discovery_metadata",it="invalid_authority_metadata",ot="untrusted_authority",st="missing_ssh_jwk",at="missing_ssh_kid",ct="missing_nonce_authentication_header",ut="invalid_authentication_header",lt="cannot_set_OIDCOptions",dt="cannot_allow_platform_broker",ht="authority_mismatch",ft="invalid_request_method_for_EAR",pt="invalid_authorize_post_body_parameters",gt={[Ke]:"A redirect URI is required for all calls, and none has been set.",[Ge]:"Could not parse the given claims request object.",[We]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Xe]:"URL could not be parsed into appropriate segments.",[Ye]:"URL was empty or null.",[Qe]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Je]:"Given claims parameter must be a stringified JSON object.",[Ze]:"Token request was empty and not found in cache.",[et]:"The logout request was null or undefined.",[tt]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[nt]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[rt]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[it]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[ot]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[st]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[at]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[ct]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[ut]:"Invalid authentication header provided",[lt]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[dt]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[ht]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[pt]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[ft]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."},mt={redirectUriNotSet:{code:Ke,desc:gt[Ke]},claimsRequestParsingError:{code:Ge,desc:gt[Ge]},authorityUriInsecure:{code:We,desc:gt[We]},urlParseError:{code:Xe,desc:gt[Xe]},urlEmptyError:{code:Ye,desc:gt[Ye]},emptyScopesError:{code:Qe,desc:gt[Qe]},invalidClaimsRequest:{code:Je,desc:gt[Je]},tokenRequestEmptyError:{code:Ze,desc:gt[Ze]},logoutRequestEmptyError:{code:et,desc:gt[et]},invalidCodeChallengeMethod:{code:tt,desc:gt[tt]},invalidCodeChallengeParams:{code:nt,desc:gt[nt]},invalidCloudDiscoveryMetadata:{code:rt,desc:gt[rt]},invalidAuthorityMetadata:{code:it,desc:gt[it]},untrustedAuthority:{code:ot,desc:gt[ot]},missingSshJwk:{code:st,desc:gt[st]},missingSshKid:{code:at,desc:gt[at]},missingNonceAuthenticationHeader:{code:ct,desc:gt[ct]},invalidAuthenticationHeader:{code:ut,desc:gt[ut]},cannotSetOIDCOptions:{code:lt,desc:gt[lt]},cannotAllowPlatformBroker:{code:dt,desc:gt[dt]},authorityMismatch:{code:ht,desc:gt[ht]},invalidAuthorizePostBodyParameters:{code:pt,desc:gt[pt]},invalidRequestMethodForEAR:{code:ft,desc:gt[ft]}};class vt extends j{constructor(e){super(e,gt[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,vt.prototype)}}function yt(e){return new vt(e)}class wt{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return 0===Object.keys(t).length}catch(e){}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},n=e.split("&"),r=e=>decodeURIComponent(e.replace(/\+/g," "));return n.forEach(e=>{if(e.trim()){const[n,i]=e.split(/=(.+)/g,2);n&&i&&(t[r(n)]=r(i))}}),t}static trimArrayEntries(e){return e.map(e=>e.trim())}static removeEmptyStringsFromArray(e){return e.filter(e=>!!e)}static jsonParseHelper(e){try{return JSON.parse(e)}catch(e){return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}class It{constructor(e){const t=e?wt.trimArrayEntries([...e]):[],n=t?wt.removeEmptyStringsFromArray(t):[];if(!n||!n.length)throw yt(Qe);this.scopes=new Set,n.forEach(e=>this.scopes.add(e))}static fromString(e){const t=(e||u.EMPTY_STRING).split(" ");return new It(t)}static createSearchScopes(e){const t=e&&e.length>0?e:[...l],n=new It(t);return n.containsOnlyOIDCScopes()?n.removeScope(u.OFFLINE_ACCESS_SCOPE):n.removeOIDCScopes(),n}containsScope(e){const t=this.printScopesLowerCase().split(" "),n=new It(t);return!!e&&n.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&this.scopes.size>=e.scopes.size&&e.asArray().every(e=>this.containsScope(e))}containsOnlyOIDCScopes(){let e=0;return d.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(e=>this.appendScope(e))}catch(e){throw Ue(ue)}}removeScope(e){if(!e)throw Ue(ce);this.scopes.delete(e.trim())}removeOIDCScopes(){d.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw Ue(le);const t=new Set;return e.scopes.forEach(e=>t.add(e.toLowerCase())),this.scopes.forEach(e=>t.add(e.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw Ue(le);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),n=e.getScopeCount(),r=this.getScopeCount();return t.size<r+n}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):u.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function At(e,t){const n=function(e){if(!e)throw Ue(G);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);if(!t||t.length<4)throw Ue(K);return t[2]}(e);try{const e=t(n);return JSON.parse(e)}catch(e){throw Ue(K)}}function St(e,t){if(0===t||Date.now()-3e5>e+t)throw Ue(re)}const Ct="@azure/msal-common",_t="15.13.0";function Et(e){if(!e||e.indexOf("=")<0)return null;try{const t=function(e){return e.startsWith("#/")?e.substring(2):e.startsWith("#")||e.startsWith("?")?e.substring(1):e}(e),n=Object.fromEntries(new URLSearchParams(t));if(n.code||n.ear_jwe||n.error||n.error_description||n.state)return n}catch(e){throw Ue(Q)}return null}function Tt(e,t=!0,n){const r=new Array;return e.forEach((e,i)=>{!t&&n&&i in n?r.push(`${i}=${e}`):r.push(`${i}=${encodeURIComponent(e)}`)}),r.join("&")}class bt{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw yt(Ye);e.includes("#")||(this._urlString=bt.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return wt.endsWith(t,"?")?t=t.slice(0,-1):wt.endsWith(t,"?/")&&(t=t.slice(0,-2)),wt.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch(e){throw yt(Xe)}if(!e.HostNameAndPort||!e.PathSegments)throw yt(Xe);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw yt(We)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return bt.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),n=t.PathSegments;return!e||0===n.length||n[0]!==v.COMMON&&n[0]!==v.ORGANIZATIONS||(n[0]=e),bt.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw yt(Xe);const n={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let r=n.AbsolutePath.split("/");return r=r.filter(e=>e&&e.length>0),n.PathSegments=r,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(t);if(!n)throw yt(Xe);return n[2]}static getAbsoluteUrl(e,t){if(e[0]===u.FORWARD_SLASH){const n=new bt(t).getUrlComponents();return n.Protocol+"//"+n.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new bt(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Et(e)}}const kt={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},Pt={metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},Rt=new Set;function Ot(e,t,n,r){if(r?.trace(`getAliasesFromMetadata called with source: ${n}`),e&&t){const i=Mt(t,e);if(i)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${n}, returning aliases`),i.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${n}`)}return null}function Mt(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r.aliases.includes(t))return r}return null}Pt.metadata.forEach(e=>{e.aliases.forEach(e=>{Rt.add(e)})});const Nt="cache_quota_exceeded",Dt="cache_error_unknown",xt={[Nt]:"Exceeded cache storage capacity.",[Dt]:"Unexpected error occurred when using cache storage."};class Lt extends j{constructor(e,t){const n=t||(xt[e]?xt[e]:xt[Dt]);super(`${e}: ${n}`),Object.setPrototypeOf(this,Lt.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}}class Ut{constructor(e,t,n,r,i){this.clientId=e,this.cryptoImpl=t,this.commonLogger=n.clone(Ct,_t),this.staticAuthorityOptions=i,this.performanceClient=r}getAllAccounts(e,t){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,t),t,e)}getAccountInfoFilteredBy(e,t){if(0===Object.keys(e).length||Object.values(e).every(e=>!e))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const n=this.getAllAccounts(e,t);return n.length>1?n.sort(e=>e.idTokenClaims?-1:1)[0]:1===n.length?n[0]:null}getBaseAccountInfo(e,t){const n=this.getAccountsFilteredBy(e,t);return n.length>0?n[0].getAccountInfo():null}buildTenantProfiles(e,t,n){return e.flatMap(e=>this.getTenantProfilesFromAccountEntity(e,t,n?.tenantId,n))}getTenantedAccountInfoByFilter(e,t,n,r,i){let o,s=null;if(i&&!this.tenantProfileMatchesFilter(n,i))return null;const a=this.getIdToken(e,r,t,n.tenantId);return a&&(o=At(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(o,i))?null:(s=je(e,n,o,a?.secret),s)}getTenantProfilesFromAccountEntity(e,t,n,r){const i=e.getAccountInfo();let o=i.tenantProfiles||new Map;const s=this.getTokenKeys();if(n){const e=o.get(n);if(!e)return[];o=new Map([[n,e]])}const a=[];return o.forEach(e=>{const n=this.getTenantedAccountInfoByFilter(i,s,e,t,r);n&&a.push(n)}),a}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||void 0!==t.isHomeTenant&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){if(t){if(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId))return!1;if(t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint))return!1;if(t.username&&!this.matchUsername(e.preferred_username,t.username))return!1;if(t.name&&!this.matchName(e,t.name))return!1;if(t.sid&&!this.matchSid(e,t.sid))return!1}return!0}async saveCacheRecord(e,t,n){if(!e)throw Ue(ge);try{e.account&&await this.setAccount(e.account,t),e.idToken&&!1!==n?.idToken&&await this.setIdTokenCredential(e.idToken,t),e.accessToken&&!1!==n?.accessToken&&await this.saveAccessToken(e.accessToken,t),e.refreshToken&&!1!==n?.refreshToken&&await this.setRefreshTokenCredential(e.refreshToken,t),e.appMetadata&&this.setAppMetadata(e.appMetadata,t)}catch(e){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),e instanceof j?e:function(e){return e instanceof Error?"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name||e.message.includes("exceeded the quota")?new Lt(Nt):new Lt(e.name,e.message):new Lt(Dt)}(e)}}async saveAccessToken(e,t){const n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},r=this.getTokenKeys(),i=It.fromString(e.target);r.accessToken.forEach(e=>{if(!this.accessTokenKeyMatchesFilter(e,n,!1))return;const r=this.getAccessTokenCredential(e,t);r&&this.credentialMatchesFilter(r,n)&&It.fromString(r.target).intersectingScopeSets(i)&&this.removeAccessToken(e,t)}),await this.setAccessTokenCredential(e,t)}getAccountsFilteredBy(e,t){const n=this.getAccountKeys(),r=[];return n.forEach(n=>{const i=this.getAccount(n,t);if(!i)return;if(e.homeAccountId&&!this.matchHomeAccountId(i,e.homeAccountId))return;if(e.username&&!this.matchUsername(i.username,e.username))return;if(e.environment&&!this.matchEnvironment(i,e.environment))return;if(e.realm&&!this.matchRealm(i,e.realm))return;if(e.nativeAccountId&&!this.matchNativeAccountId(i,e.nativeAccountId))return;if(e.authorityType&&!this.matchAuthorityType(i,e.authorityType))return;const o={localAccountId:e?.localAccountId,name:e?.name},s=i.tenantProfiles?.filter(e=>this.tenantProfileMatchesFilter(e,o));s&&0===s.length||r.push(i)}),r}credentialMatchesFilter(e,t){if(t.clientId&&!this.matchClientId(e,t.clientId))return!1;if(t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash))return!1;if("string"==typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId))return!1;if(t.environment&&!this.matchEnvironment(e,t.environment))return!1;if(t.realm&&!this.matchRealm(e,t.realm))return!1;if(t.credentialType&&!this.matchCredentialType(e,t.credentialType))return!1;if(t.familyId&&!this.matchFamilyId(e,t.familyId))return!1;if(t.target&&!this.matchTarget(e,t.target))return!1;if((t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash)return!1;if(e.credentialType===S.ACCESS_TOKEN_WITH_AUTH_SCHEME){if(t.tokenType&&!this.matchTokenType(e,t.tokenType))return!1;if(t.tokenType===O.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId))return!1}return!0}getAppMetadataFilteredBy(e){const t=this.getKeys(),n={};return t.forEach(t=>{if(!this.isAppMetadata(t))return;const r=this.getAppMetadata(t);r&&(e.environment&&!this.matchEnvironment(r,e.environment)||e.clientId&&!this.matchClientId(r,e.clientId)||(n[t]=r))}),n}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let n=null;return t.forEach(t=>{if(!this.isAuthorityMetadata(t)||-1===t.indexOf(this.clientId))return;const r=this.getAuthorityMetadata(t);r&&-1!==r.aliases.indexOf(e)&&(n=r)}),n}removeAllAccounts(e){this.getAllAccounts({},e).forEach(t=>{this.removeAccount(t,e)})}removeAccount(e,t){this.removeAccountContext(e,t),this.getAccountKeys().filter(t=>t.includes(e.homeAccountId)&&t.includes(e.environment)).forEach(e=>{this.removeItem(e,t),this.performanceClient.incrementFields({accountsRemoved:1},t)})}removeAccountContext(e,t){const n=this.getTokenKeys(),r=t=>t.includes(e.homeAccountId)&&t.includes(e.environment);n.idToken.filter(r).forEach(e=>{this.removeIdToken(e,t)}),n.accessToken.filter(r).forEach(e=>{this.removeAccessToken(e,t)}),n.refreshToken.filter(r).forEach(e=>{this.removeRefreshToken(e,t)})}removeAccessToken(e,t){const n=this.getAccessTokenCredential(e,t);if(this.removeItem(e,t),this.performanceClient.incrementFields({accessTokensRemoved:1},t),!n||n.credentialType.toLowerCase()!==S.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||n.tokenType!==O.POP)return;const r=n.keyId;r&&this.cryptoImpl.removeTokenBindingKey(r).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${r}`,t),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},t)})}removeAppMetadata(e){return this.getKeys().forEach(t=>{this.isAppMetadata(t)&&this.removeItem(t,e)}),!0}getIdToken(e,t,n,r,i){this.commonLogger.trace("CacheManager - getIdToken called");const o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:S.ID_TOKEN,clientId:this.clientId,realm:r},s=this.getIdTokensByFilter(o,t,n),a=s.size;if(a<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(a>1){let n=s;if(!r){const t=new Map;s.forEach((n,r)=>{n.realm===e.tenantId&&t.set(r,n)});const r=t.size;if(r<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),s.values().next().value;if(1===r)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),t.values().next().value;n=t}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),n.forEach((e,n)=>{this.removeIdToken(n,t)}),i&&t&&i.addFields({multiMatchedID:s.size},t),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),s.values().next().value}getIdTokensByFilter(e,t,n){const r=n&&n.idToken||this.getTokenKeys().idToken,i=new Map;return r.forEach(n=>{if(!this.idTokenKeyMatchesFilter(n,{clientId:this.clientId,...e}))return;const r=this.getIdTokenCredential(n,t);r&&this.credentialMatchesFilter(r,e)&&i.set(n,r)}),i}idTokenKeyMatchesFilter(e,t){const n=e.toLowerCase();return!(t.clientId&&-1===n.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===n.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e,t){this.removeItem(e,t)}removeRefreshToken(e,t){this.removeItem(e,t)}getAccessToken(e,t,n,r){const i=t.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",i);const o=It.createSearchScopes(t.scopes),s=t.authenticationScheme||O.BEARER,a=s&&s.toLowerCase()!==O.BEARER.toLowerCase()?S.ACCESS_TOKEN_WITH_AUTH_SCHEME:S.ACCESS_TOKEN,c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:a,clientId:this.clientId,realm:r||e.tenantId,target:o,tokenType:s,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},u=n&&n.accessToken||this.getTokenKeys().accessToken,l=[];u.forEach(e=>{if(this.accessTokenKeyMatchesFilter(e,c,!0)){const t=this.getAccessTokenCredential(e,i);t&&this.credentialMatchesFilter(t,c)&&l.push(t)}});const d=l.length;return d<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",i),null):d>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",i),l.forEach(e=>{this.removeAccessToken(this.generateCredentialKey(e),i)}),this.performanceClient.addFields({multiMatchedAT:l.length},i),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",i),l[0])}accessTokenKeyMatchesFilter(e,t,n){const r=e.toLowerCase();if(t.clientId&&-1===r.indexOf(t.clientId.toLowerCase()))return!1;if(t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))return!1;if(t.realm&&-1===r.indexOf(t.realm.toLowerCase()))return!1;if(t.requestedClaimsHash&&-1===r.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){const e=t.target.asArray();for(let t=0;t<e.length;t++){if(n&&!r.includes(e[t].toLowerCase()))return!1;if(!n&&r.includes(e[t].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,t){const n=this.getTokenKeys(),r=[];return n.accessToken.forEach(n=>{if(!this.accessTokenKeyMatchesFilter(n,e,!0))return;const i=this.getAccessTokenCredential(n,t);i&&this.credentialMatchesFilter(i,e)&&r.push(i)}),r}getRefreshToken(e,t,n,r,i){this.commonLogger.trace("CacheManager - getRefreshToken called");const o=t?_:void 0,s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:S.REFRESH_TOKEN,clientId:this.clientId,familyId:o},a=r&&r.refreshToken||this.getTokenKeys().refreshToken,c=[];a.forEach(e=>{if(this.refreshTokenKeyMatchesFilter(e,s)){const t=this.getRefreshTokenCredential(e,n);t&&this.credentialMatchesFilter(t,s)&&c.push(t)}});const u=c.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&i&&n&&i.addFields({multiMatchedRT:u},n),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),c[0])}refreshTokenKeyMatchesFilter(e,t){const n=e.toLowerCase();return!(t.familyId&&-1===n.indexOf(t.familyId.toLowerCase())||!t.familyId&&t.clientId&&-1===n.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===n.indexOf(t.homeAccountId.toLowerCase()))}readAppMetadataFromCache(e){const t={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(t),r=Object.keys(n).map(e=>n[e]),i=r.length;if(i<1)return null;if(i>1)throw Ue(se);return r[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!(!t||t.familyId!==_)}matchHomeAccountId(e,t){return!("string"!=typeof e.homeAccountId||t!==e.homeAccountId)}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return!(t.toLowerCase()!==e.name?.toLowerCase())}matchUsername(e,t){return!(!e||"string"!=typeof e||t?.toLowerCase()!==e.toLowerCase())}matchUserAssertionHash(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const n=function(e,t){let n;const r=e.canonicalAuthority;if(r){const i=new bt(r).getUrlComponents().HostNameAndPort;n=Ot(i,e.cloudDiscoveryMetadata?.metadata,T,t)||Ot(i,Pt.metadata,P,t)||e.knownAuthorities}return n||[]}(this.staticAuthorityOptions,this.commonLogger);if(n.includes(t)&&n.includes(e.environment))return!0}const n=this.getAuthorityMetadataByAlias(t);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!(!e.clientId||t!==e.clientId)}matchFamilyId(e,t){return!(!e.familyId||t!==e.familyId)}matchRealm(e,t){return!(e.realm?.toLowerCase()!==t.toLowerCase())}matchNativeAccountId(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!(!e.authorityType||t.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,t){return!(e.credentialType!==S.ACCESS_TOKEN&&e.credentialType!==S.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)&&It.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!(!e.tokenType||e.tokenType!==t)}matchKeyId(e,t){return!(!e.keyId||e.keyId!==t)}isAppMetadata(e){return-1!==e.indexOf(C)}isAuthorityMetadata(e){return-1!==e.indexOf(E)}generateAuthorityMetadataCacheKey(e){return`${E}-${this.clientId}-${e}`}static toObject(e,t){for(const n in t)e[n]=t[n];return e}}class qt extends Ut{async setAccount(){throw Ue(Me)}getAccount(){throw Ue(Me)}async setIdTokenCredential(){throw Ue(Me)}getIdTokenCredential(){throw Ue(Me)}async setAccessTokenCredential(){throw Ue(Me)}getAccessTokenCredential(){throw Ue(Me)}async setRefreshTokenCredential(){throw Ue(Me)}getRefreshTokenCredential(){throw Ue(Me)}setAppMetadata(){throw Ue(Me)}getAppMetadata(){throw Ue(Me)}setServerTelemetry(){throw Ue(Me)}getServerTelemetry(){throw Ue(Me)}setAuthorityMetadata(){throw Ue(Me)}getAuthorityMetadata(){throw Ue(Me)}getAuthorityMetadataKeys(){throw Ue(Me)}setThrottlingCache(){throw Ue(Me)}getThrottlingCache(){throw Ue(Me)}removeItem(){throw Ue(Me)}getKeys(){throw Ue(Me)}getAccountKeys(){throw Ue(Me)}getTokenKeys(){throw Ue(Me)}generateCredentialKey(){throw Ue(Me)}generateAccountKey(){throw Ue(Me)}}class Ft{static deserializeJSONBlob(e){return e?JSON.parse(e):{}}static deserializeAccounts(e){const t={};return e&&Object.keys(e).map(function(n){const r=e[n],i={homeAccountId:r.home_account_id,environment:r.environment,realm:r.realm,localAccountId:r.local_account_id,username:r.username,authorityType:r.authority_type,name:r.name,clientInfo:r.client_info,lastModificationTime:r.last_modification_time,lastModificationApp:r.last_modification_app,tenantProfiles:r.tenantProfiles?.map(e=>JSON.parse(e)),lastUpdatedAt:Date.now().toString()},o=new Ve;Ut.toObject(o,i),t[n]=o}),t}static deserializeIdTokens(e){const t={};return e&&Object.keys(e).map(function(n){const r=e[n],i={homeAccountId:r.home_account_id,environment:r.environment,credentialType:r.credential_type,clientId:r.client_id,secret:r.secret,realm:r.realm,lastUpdatedAt:Date.now().toString()};t[n]=i}),t}static deserializeAccessTokens(e){const t={};return e&&Object.keys(e).map(function(n){const r=e[n],i={homeAccountId:r.home_account_id,environment:r.environment,credentialType:r.credential_type,clientId:r.client_id,secret:r.secret,realm:r.realm,target:r.target,cachedAt:r.cached_at,expiresOn:r.expires_on,extendedExpiresOn:r.extended_expires_on,refreshOn:r.refresh_on,keyId:r.key_id,tokenType:r.token_type,requestedClaims:r.requestedClaims,requestedClaimsHash:r.requestedClaimsHash,userAssertionHash:r.userAssertionHash,lastUpdatedAt:Date.now().toString()};t[n]=i}),t}static deserializeRefreshTokens(e){const t={};return e&&Object.keys(e).map(function(n){const r=e[n],i={homeAccountId:r.home_account_id,environment:r.environment,credentialType:r.credential_type,clientId:r.client_id,secret:r.secret,familyId:r.family_id,target:r.target,realm:r.realm,lastUpdatedAt:Date.now().toString()};t[n]=i}),t}static deserializeAppMetadata(e){const t={};return e&&Object.keys(e).map(function(n){const r=e[n];t[n]={clientId:r.client_id,environment:r.environment,familyId:r.family_id}}),t}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}}const Ht="https://login.microsoftonline.com/managed_identity/",Bt="Metadata",jt="secret",$t="api-version",zt="resource",Vt="AZURE_POD_IDENTITY_AUTHORITY_HOST",Kt="IDENTITY_ENDPOINT",Gt="IDENTITY_HEADER",Wt="IDENTITY_SERVER_THUMBPRINT",Xt="IMDS_ENDPOINT",Yt="MSI_ENDPOINT",Qt="MSI_SECRET",Jt={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",MACHINE_LEARNING:"MachineLearning",SERVICE_FABRIC:"ServiceFabric"},Zt="system-assigned",en="user-assigned-client-id",tn="user-assigned-resource-id",nn="user-assigned-object-id",rn="get",on="post",sn=200,an=299,cn=500,un="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",ln="msal.js.node",dn="urn:ietf:params:oauth:client-assertion-type:jwt-bearer",hn="authorization_pending",fn="x5c",pn="aud",gn="exp",mn="iss",vn="sub",yn="nbf",wn="jti";class In{constructor(e,t){this.cacheOutcome=N,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||u.EMPTY_STRING,this.wrapperVer=e.wrapperVer||u.EMPTY_STRING,this.telemetryCacheKey=R.CACHE_KEY+"-"+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${R.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&t.push(`broker_error=${n}`);const r=t.join(R.VALUE_SEPARATOR),i=[e,this.getRegionDiscoveryFields()].join(R.VALUE_SEPARATOR);return[R.SCHEMA_VERSION,i,r].join(R.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=In.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*t).join(R.VALUE_SEPARATOR),r=e.errors.slice(0,t).join(R.VALUE_SEPARATOR),i=e.errors.length,o=[i,t<i?R.OVERFLOW_TRUE:R.OVERFLOW_FALSE].join(R.VALUE_SEPARATOR);return[R.SCHEMA_VERSION,e.cacheHits,n,r,o].join(R.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=R.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof j?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(R.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=In.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const n={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}}static maxErrorsToSend(e){let t,n=0,r=0;const i=e.errors.length;for(t=0;t<i;t++){const i=e.failedRequests[2*t]||u.EMPTY_STRING,o=e.failedRequests[2*t+1]||u.EMPTY_STRING,s=e.errors[t]||u.EMPTY_STRING;if(r+=i.toString().length+o.toString().length+s.length+3,!(r<R.MAX_LAST_HEADER_BYTES))break;n+=1}return n}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||u.EMPTY_STRING),e.push(this.regionSource||u.EMPTY_STRING),e.push(this.regionOutcome||u.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return function(e){const{skus:t,libraryName:n,libraryVersion:r,extensionName:i,extensionVersion:o}=e,s=new Map([[0,[n,r]],[2,[i,o]]]);let a=[];if(t?.length){if(a=t.split(","),a.length<4)return t}else a=Array.from({length:4},()=>"|");return s.forEach((e,t)=>{2===e.length&&e[0]?.length&&e[1]?.length&&function(e){const{skuArr:t,index:n,skuName:r,skuVersion:i}=e;n>=t.length||(t[n]=[r,i].join("|"))}({skuArr:a,index:t,skuName:e[0],skuVersion:e[1]})}),a.join(",")}(e)}}const An="client_id",Sn="redirect_uri",Cn="token_type",_n="req_cnf",En="return_spa_code",Tn="x-client-xtra-sku",bn="brk_client_id",kn="brk_redirect_uri",Pn="instance_aware";class Rn extends j{constructor(e,t,n,r,i){super(e,t,n),this.name="ServerError",this.errorNo=r,this.status=i,Object.setPrototypeOf(this,Rn.prototype)}}var On;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(On||(On={}));class Mn{constructor(e,t,n){this.level=On.Info;const r=e||Mn.createDefaultLoggerOptions();this.localCallback=r.loggerCallback||(()=>{}),this.piiLoggingEnabled=r.piiLoggingEnabled||!1,this.level="number"==typeof r.logLevel?r.logLevel:On.Info,this.correlationId=r.correlationId||u.EMPTY_STRING,this.packageName=t||u.EMPTY_STRING,this.packageVersion=n||u.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:On.Info}}clone(e,t,n){return new Mn({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const n=`[${(new Date).toUTCString()}] : [${t.correlationId||this.correlationId||""}] : ${this.packageName}@${this.packageVersion} : ${On[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,n,t.containsPii||!1)}executeCallback(e,t,n){this.localCallback&&this.localCallback(e,t,n)}error(e,t){this.logMessage(e,{logLevel:On.Error,containsPii:!1,correlationId:t||u.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:On.Error,containsPii:!0,correlationId:t||u.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:On.Warning,containsPii:!1,correlationId:t||u.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:On.Warning,containsPii:!0,correlationId:t||u.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:On.Info,containsPii:!1,correlationId:t||u.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:On.Info,containsPii:!0,correlationId:t||u.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:On.Verbose,containsPii:!1,correlationId:t||u.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:On.Verbose,containsPii:!0,correlationId:t||u.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:On.Trace,containsPii:!1,correlationId:t||u.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:On.Trace,containsPii:!0,correlationId:t||u.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const Nn={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"},Dn="networkClientSendPostRequestAsync",xn="refreshTokenClientExecutePostToTokenEndpoint",Ln="authorizationCodeClientExecutePostToTokenEndpoint",Un="refreshTokenClientExecuteTokenRequest",qn="refreshTokenClientAcquireToken",Fn="refreshTokenClientAcquireTokenWithCachedRefreshToken",Hn="refreshTokenClientAcquireTokenByRefreshToken",Bn="refreshTokenClientCreateTokenRequestBody",jn="silentFlowClientAcquireCachedToken",$n="silentFlowClientGenerateResultFromCacheRecord",zn="updateTokenEndpointAuthority",Vn="authClientAcquireToken",Kn="authClientExecuteTokenRequest",Gn="authClientCreateTokenRequestBody",Wn="popTokenGenerateCnf",Xn="popTokenGenerateKid",Yn="handleServerTokenResponse",Qn="authorityFactoryCreateDiscoveredInstance",Jn="authorityResolveEndpointsAsync",Zn="authorityGetCloudDiscoveryMetadataFromNetwork",er="authorityUpdateCloudDiscoveryMetadata",tr="authorityGetEndpointMetadataFromNetwork",nr="authorityUpdateEndpointMetadata",rr="authorityUpdateMetadataWithRegionalInformation",ir="regionDiscoveryDetectRegion",or="regionDiscoveryGetRegionFromIMDS",sr="regionDiscoveryGetCurrentVersion",ar="cacheManagerGetRefreshToken",cr=(new Map([["acquireTokenByCode","ATByCode"],["acquireTokenByRefreshToken","ATByRT"],["acquireTokenSilent","ATS"],["acquireTokenSilentAsync","ATSAsync"],["acquireTokenPopup","ATPopup"],["acquireTokenRedirect","ATRedirect"],["cryptoOptsGetPublicKeyThumbprint","CryptoGetPKThumb"],["cryptoOptsSignJwt","CryptoSignJwt"],["silentCacheClientAcquireToken","SltCacheClientAT"],["silentIframeClientAcquireToken","SltIframeClientAT"],["silentRefreshClientAcquireToken","SltRClientAT"],["ssoSilent","SsoSlt"],["standardInteractionClientGetDiscoveredAuthority","StdIntClientGetDiscAuth"],["fetchAccountIdWithNativeBroker","FetchAccIdWithNtvBroker"],["nativeInteractionClientAcquireToken","NtvIntClientAT"],["baseClientCreateTokenRequestHeaders","BaseClientCreateTReqHead"],[Dn,"NetClientSendPost"],[xn,"RTClientExecPost"],[Ln,"AuthCodeClientExecPost"],["brokerHandshake","BrokerHandshake"],["acquireTokenByRefreshTokenInBroker","ATByRTInBroker"],["acquireTokenByBroker","ATByBroker"],[Un,"RTClientExecTReq"],[qn,"RTClientAT"],[Fn,"RTClientATWithCachedRT"],[Hn,"RTClientATByRT"],[Bn,"RTClientCreateTReqBody"],["acquireTokenFromCache","ATFromCache"],[jn,"SltFlowClientATCached"],[$n,"SltFlowClientGenResFromCache"],["acquireTokenBySilentIframe","ATBySltIframe"],["initializeBaseRequest","InitBaseReq"],["initializeSilentRequest","InitSltReq"],["initializeClientApplication","InitClientApplication"],["initializeCache","InitCache"],["importExistingCache","importCache"],["setUserData","setUserData"],["localStorageUpdated","localStorageUpdated"],["silentIframeClientTokenHelper","SIClientTHelper"],["silentHandlerInitiateAuthRequest","SHandlerInitAuthReq"],["silentHandlerMonitorIframeForHash","SltHandlerMonitorIframeForHash"],["silentHandlerLoadFrame","SHandlerLoadFrame"],["silentHandlerLoadFrameSync","SHandlerLoadFrameSync"],["standardInteractionClientCreateAuthCodeClient","StdIntClientCreateAuthCodeClient"],["standardInteractionClientGetClientConfiguration","StdIntClientGetClientConf"],["standardInteractionClientInitializeAuthorizationRequest","StdIntClientInitAuthReq"],["getAuthCodeUrl","GetAuthCodeUrl"],["handleCodeResponseFromServer","HandleCodeResFromServer"],["handleCodeResponse","HandleCodeResp"],["handleResponseEar","HandleRespEar"],["handleResponseCode","HandleRespCode"],["handleResponsePlatformBroker","HandleRespPlatBroker"],[zn,"UpdTEndpointAuth"],[Vn,"AuthClientAT"],[Kn,"AuthClientExecTReq"],[Gn,"AuthClientCreateTReqBody"],[Wn,"PopTGenCnf"],[Xn,"PopTGenKid"],[Yn,"HandleServerTRes"],["deserializeResponse","DeserializeRes"],[Qn,"AuthFactCreateDiscInst"],[Jn,"AuthResolveEndpointsAsync"],["authorityResolveEndpointsFromLocalSources","AuthResolveEndpointsFromLocal"],[Zn,"AuthGetCDMetaFromNet"],[er,"AuthUpdCDMeta"],[tr,"AuthUpdCDMetaFromNet"],[nr,"AuthUpdEndpointMeta"],[rr,"AuthUpdMetaWithRegInfo"],[ir,"RegDiscDetectReg"],[or,"RegDiscGetRegFromIMDS"],[sr,"RegDiscGetCurrentVer"],["acquireTokenByCodeAsync","ATByCodeAsync"],["getEndpointMetadataFromNetwork","GetEndpointMetaFromNet"],["getCloudDiscoveryMetadataFromNetworkMeasurement","GetCDMetaFromNet"],["handleRedirectPromise","HandleRedirectPromise"],["handleNativeRedirectPromise","HandleNtvRedirectPromise"],["updateCloudDiscoveryMetadataMeasurement","UpdateCDMeta"],["usernamePasswordClientAcquireToken","UserPassClientAT"],["nativeMessageHandlerHandshake","NtvMsgHandlerHandshake"],["nativeGenerateAuthResult","NtvGenAuthRes"],["removeHiddenIframe","RemoveHiddenIframe"],["clearTokensAndKeysWithClaims","ClearTAndKeysWithClaims"],[ar,"CacheManagerGetRT"],["generatePkceCodes","GenPkceCodes"],["generateCodeVerifier","GenCodeVerifier"],["generateCodeChallengeFromVerifier","GenCodeChallengeFromVerifier"],["sha256Digest","Sha256Digest"],["getRandomValues","GetRandomValues"],["generateHKDF","genHKDF"],["generateBaseKey","genBaseKey"],["base64Decode","b64Decode"],["urlEncodeArr","urlEncArr"],["encrypt","encrypt"],["decrypt","decrypt"],["generateEarKey","genEarKey"],["decryptEarResponse","decryptEarResp"]]),1),ur=(new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT","unencryptedCacheCount","encryptedCacheExpiredCount","oldAccountCount","oldAccessCount","oldIdCount","oldRefreshCount","currAccountCount","currAccessCount","currIdCount","currRefreshCount","expiredCacheRemovedCount","upgradedCacheCount"]),(e,t,n,r,i)=>(...o)=>{n.trace(`Executing function ${t}`);const s=r?.startMeasurement(t,i);if(i){const e=t+"CallCount";r?.incrementFields({[e]:1},i)}return r?.setPreQueueTime(t,i),e(...o).then(e=>(n.trace(`Returning result from ${t}`),s?.end({success:!0}),e)).catch(e=>{n.trace(`Error occurred in ${t}`);try{n.trace(JSON.stringify(e))}catch(e){n.trace("Unable to print error message.")}throw s?.end({success:!1},e),e})});class lr{constructor(e,t,n,r){this.networkInterface=e,this.logger=t,this.performanceClient=n,this.correlationId=r}async detectRegion(e,t){this.performanceClient?.addQueueMeasurement(ir,this.correlationId);let n=e;if(n)t.region_source="3";else{const e=lr.IMDS_OPTIONS;try{const r=await ur(this.getRegionFromIMDS.bind(this),or,this.logger,this.performanceClient,this.correlationId)(u.IMDS_VERSION,e);if(200===r.status&&(n=r.body,t.region_source="4"),400===r.status){const r=await ur(this.getCurrentVersion.bind(this),sr,this.logger,this.performanceClient,this.correlationId)(e);if(!r)return t.region_source="1",null;const i=await ur(this.getRegionFromIMDS.bind(this),or,this.logger,this.performanceClient,this.correlationId)(r,e);200===i.status&&(n=i.body,t.region_source="4")}}catch(e){return t.region_source="1",null}}return n||(t.region_source="1"),n||null}async getRegionFromIMDS(e,t){return this.performanceClient?.addQueueMeasurement(or,this.correlationId),this.networkInterface.sendGetRequestAsync(`${u.IMDS_ENDPOINT}?api-version=${e}&format=text`,t,u.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(sr,this.correlationId);try{const t=await this.networkInterface.sendGetRequestAsync(`${u.IMDS_ENDPOINT}?format=json`,e);return 400===t.status&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0?t.body["newest-versions"][0]:null}catch(e){return null}}}function dr(){return Math.round((new Date).getTime()/1e3)}function hr(e){return e?new Date(1e3*Number(e)):new Date}function fr(e,t){const n=Number(e)||0;return dr()+t>n}function pr(e,t){return new Promise(n=>setTimeout(()=>n(t),e))}function gr(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")}function mr(e){return!!e&&gr(e)&&e.hasOwnProperty("realm")&&e.hasOwnProperty("target")&&(e.credentialType===S.ACCESS_TOKEN||e.credentialType===S.ACCESS_TOKEN_WITH_AUTH_SCHEME)}function vr(e){return!!e&&gr(e)&&e.hasOwnProperty("realm")&&e.credentialType===S.ID_TOKEN}function yr(e){return!!e&&gr(e)&&e.credentialType===S.REFRESH_TOKEN}function wr(e,t){return!!t&&0===e.indexOf(C)&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("environment")}function Ir(){return dr()+86400}function Ar(e,t,n){e.authorization_endpoint=t.authorization_endpoint,e.token_endpoint=t.token_endpoint,e.end_session_endpoint=t.end_session_endpoint,e.issuer=t.issuer,e.endpointsFromNetwork=n,e.jwks_uri=t.jwks_uri}function Sr(e,t,n){e.aliases=t.aliases,e.preferred_cache=t.preferred_cache,e.preferred_network=t.preferred_network,e.aliasesFromNetwork=n}function Cr(e){return e.expiresAt<=dr()}lr.IMDS_OPTIONS={headers:{Metadata:"true"}};class _r{constructor(e,t,n,r,i,o,s,a){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=n,this.authorityOptions=r,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=s,this.correlationId=o,this.managedIdentity=a||!1,this.regionDiscovery=new lr(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(u.CIAM_AUTH_URL))return 3;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case u.ADFS:return 1;case u.DSTS:return 2}return 0}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new bt(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Ue(W)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Ue(W)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Ue(W)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Ue(be);return this.replacePath(this.metadata.end_session_endpoint)}throw Ue(W)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Ue(W)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Ue(W)}canReplaceTenant(e){return 1===e.PathSegments.length&&!_r.reservedTenantDomains.has(e.PathSegments[0])&&0===this.getAuthorityType(e)&&this.protocolMode!==ze.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const n=new bt(this.metadata.canonical_authority).getUrlComponents(),r=n.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((e,i)=>{let o=r[i];if(0===i&&this.canReplaceTenant(n)){const e=new bt(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];o!==e&&(this.logger.verbose(`Replacing tenant domain name ${o} with id ${e}`),o=e)}e!==o&&(t=t.replace(`/${o}/`,`/${e}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||1===this.authorityType||this.protocolMode===ze.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(Jn,this.correlationId);const e=this.getCurrentMetadataEntity(),t=await ur(this.updateCloudDiscoveryMetadata.bind(this),er,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const n=await ur(this.updateEndpointMetadata.bind(this),nr,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:n}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:n},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Ir(),jwks_uri:""}),e}updateCachedMetadata(e,t,n){t!==b&&n?.source!==b&&(e.expiresAt=Ir(),e.canonical_authority=this.canonicalAuthority);const r=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(r,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(nr,this.correlationId);const t=this.updateEndpointMetadataFromLocalSources(e);if(t)return t.source===P&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata&&(Ar(e,await ur(this.updateMetadataWithRegionalInformation.bind(this),rr,this.logger,this.performanceClient,this.correlationId)(t.metadata),!1),e.canonical_authority=this.canonicalAuthority),t.source;let n=await ur(this.getEndpointMetadataFromNetwork.bind(this),tr,this.logger,this.performanceClient,this.correlationId)();if(n)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(n=await ur(this.updateMetadataWithRegionalInformation.bind(this),rr,this.logger,this.performanceClient,this.correlationId)(n)),Ar(e,n,!0),k;throw Ue(Y,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),Ar(e,t,!1),{source:T};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const t=this.getEndpointMetadataFromHardcodedValues();if(t)return Ar(e,t,!1),{source:P,metadata:t};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const n=Cr(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:b}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new bt(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(e){throw yt(it)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(tr,this.correlationId);const e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{const n=await this.networkInterface.sendGetRequestAsync(t,e),r=function(e){return e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("jwks_uri")}(n.body);return r?n.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(e){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${e}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in kt?kt[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(rr,this.correlationId);const t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==u.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome="2",this.regionDiscoveryMetadata.region_used=t,_r.replaceWithRegionalInformation(e,t);const n=await ur(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),ir,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(n)return this.regionDiscoveryMetadata.region_outcome="4",this.regionDiscoveryMetadata.region_used=n,_r.replaceWithRegionalInformation(e,n);this.regionDiscoveryMetadata.region_outcome="5"}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(er,this.correlationId);const t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;const n=await ur(this.getCloudDiscoveryMetadataFromNetwork.bind(this),Zn,this.logger,this.performanceClient,this.correlationId)();if(n)return Sr(e,n,!0),k;throw yt(ot)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||u.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||u.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||u.NOT_APPLICABLE}`);const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),Sr(e,t,!1),T;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const t=(n=this.hostnameAndPort,Mt(Pt.metadata,n));if(t)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),Sr(e,t,!1),P;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}var n;const r=Cr(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),b):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(3===this.authorityType)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),_r.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=Mt(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),e)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),e;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(e){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),yt(rt)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),_r.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Zn,this.correlationId);const e=`${u.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={};let n=null;try{const r=await this.networkInterface.sendGetRequestAsync(e,t);let i,o;if(function(e){return e.hasOwnProperty("tenant_discovery_endpoint")&&e.hasOwnProperty("metadata")}(r.body))i=r.body,o=i.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${i.tenant_discovery_endpoint}`);else{if(!function(e){return e.hasOwnProperty("error")&&e.hasOwnProperty("error_description")}(r.body))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${r.status}`),i=r.body,i.error===u.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${i.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${i.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),o=[]}this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=Mt(o,this.hostnameAndPort)}catch(e){if(e instanceof j)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.\nError: ${e.errorCode}\nError Description: ${e.errorMessage}`);else{const t=e;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ${t.name}\nError Description: ${t.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=_r.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(e=>e&&bt.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let n;if(t&&t.azureCloudInstance!==Nn.None){const e=t.tenant?t.tenant:u.DEFAULT_COMMON_TENANT;n=`${t.azureCloudInstance}/${e}/`}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return u.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Ue(W)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Rt.has(e)}static isPublicCloudAuthority(e){return u.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,n){const r=new bt(e);r.validateAsUri();const i=r.getUrlComponents();let o=`${t}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(o=`${t}.${u.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const s=bt.constructAuthorityUriFromObject({...r.getUrlComponents(),HostNameAndPort:o}).urlString;return n?`${s}?${n}`:s}static replaceWithRegionalInformation(e,t){const n={...e};return n.authorization_endpoint=_r.buildRegionalAuthorityString(n.authorization_endpoint,t),n.token_endpoint=_r.buildRegionalAuthorityString(n.token_endpoint,t),n.end_session_endpoint&&(n.end_session_endpoint=_r.buildRegionalAuthorityString(n.end_session_endpoint,t)),n}static transformCIAMAuthority(e){let t=e;const n=new bt(e).getUrlComponents();return 0===n.PathSegments.length&&n.HostNameAndPort.endsWith(u.CIAM_AUTH_URL)&&(t=`${t}${n.HostNameAndPort.split(".")[0]}${u.AAD_TENANT_DOMAIN_SUFFIX}`),t}}function Er(e){return e.endsWith(u.FORWARD_SLASH)?e:`${e}${u.FORWARD_SLASH}`}_r.reservedTenantDomains=new Set(["{tenant}","{tenantid}",v.COMMON,v.CONSUMERS,v.ORGANIZATIONS]);const Tr={createNewGuid:()=>{throw Ue(Me)},base64Decode:()=>{throw Ue(Me)},base64Encode:()=>{throw Ue(Me)},base64UrlEncode:()=>{throw Ue(Me)},encodeKid:()=>{throw Ue(Me)},async getPublicKeyThumbprint(){throw Ue(Me)},async removeTokenBindingKey(){throw Ue(Me)},async clearKeystore(){throw Ue(Me)},async signJwt(){throw Ue(Me)},async hashString(){throw Ue(Me)}};class br{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class kr{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:cr,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new br}}startPerformanceMeasurement(){return new br}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const Pr={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},Rr={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:On.Info,correlationId:u.EMPTY_STRING},Or={claimsBasedCachingEnabled:!1},Mr={async sendGetRequestAsync(){throw Ue(Me)},async sendPostRequestAsync(){throw Ue(Me)}},Nr={sku:u.SKU,version:_t,cpu:u.EMPTY_STRING,os:u.EMPTY_STRING},Dr={clientSecret:u.EMPTY_STRING,clientAssertion:void 0},xr={azureCloudInstance:Nn.None,tenant:`${u.DEFAULT_COMMON_TENANT}`},Lr={application:{appName:"",appVersion:""}};function Ur(e){return e.authOptions.authority.options.protocolMode===ze.OIDC}const qr="home_account_id",Fr="UPN";function Hr(e,t,n){if(!t)return;const r=e.get(An);r&&e.has(bn)&&n?.addFields({embeddedClientId:r,embeddedRedirectUri:e.get(Sn)},t)}function Br(e,t){e.set("response_type",t)}function jr(e,t,n=!0,r=l){!n||r.includes("openid")||t.includes("openid")||r.push("openid");const i=n?[...t||[],...r]:t||[],o=new It(i);e.set("scope",o.printScopes())}function $r(e,t){e.set(An,t)}function zr(e,t){e.set(Sn,t)}function Vr(e,t){e.set("login_hint",t)}function Kr(e,t){e.set(p,`UPN:${t}`)}function Gr(e,t){e.set(p,`Oid:${t.uid}@${t.utid}`)}function Wr(e,t){e.set("sid",t)}function Xr(e,t,n){const r=function(e,t){let n;if(e)try{n=JSON.parse(e)}catch(e){throw yt(Je)}else n={};return t&&t.length>0&&(n.hasOwnProperty(y)||(n[y]={}),n[y].xms_cc={values:t}),JSON.stringify(n)}(t,n);try{JSON.parse(r)}catch(e){throw yt(Je)}e.set("claims",r)}function Yr(e,t){e.set("client-request-id",t)}function Qr(e,t){e.set("x-client-SKU",t.sku),e.set("x-client-VER",t.version),t.os&&e.set("x-client-OS",t.os),t.cpu&&e.set("x-client-CPU",t.cpu)}function Jr(e,t){t?.appName&&e.set("x-app-name",t.appName),t?.appVersion&&e.set("x-app-ver",t.appVersion)}function Zr(e,t){t&&e.set("state",t)}function ei(e,t){e.set("client_secret",t)}function ti(e,t){t&&e.set("client_assertion",t)}function ni(e,t){t&&e.set("client_assertion_type",t)}function ri(e,t){e.set("grant_type",t)}function ii(e){e.set("client_info","1")}function oi(e){e.has(Pn)||e.set(Pn,"true")}function si(e,t){Object.entries(t).forEach(([t,n])=>{!e.has(t)&&n&&e.set(t,n)})}function ai(e,t){t&&(e.set(Cn,O.POP),e.set(_n,t))}function ci(e,t){t&&(e.set(Cn,O.SSH),e.set(_n,t))}function ui(e,t){e.set("x-client-current-telemetry",t.generateCurrentRequestHeaderValue()),e.set("x-client-last-telemetry",t.generateLastRequestHeaderValue())}function li(e){e.set("x-ms-lib-capability","retry-after, h429")}function di(e,t,n){e.has(bn)||e.set(bn,t),e.has(kn)||e.set(kn,n)}async function hi(e,t,n,r,i,o,s){s?.addQueueMeasurement(Qn,o);const a=_r.transformCIAMAuthority(Er(e)),c=new _r(a,t,n,r,i,o,s);try{return await ur(c.resolveEndpointsAsync.bind(c),Jn,i,s,o)(),c}catch(e){throw Ue(W)}}function fi(e,t,n){return{clientId:e,authority:t.authority,scopes:t.scopes,homeAccountIdentifier:n,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid,embeddedClientId:t.embeddedClientId||t.tokenBodyParameters?.clientId}}class pi{static generateThrottlingStorageKey(e){return`${M}.${JSON.stringify(e)}`}static preProcess(e,t,n){const r=pi.generateThrottlingStorageKey(t),i=e.getThrottlingCache(r);if(i){if(i.throttleTime<Date.now())return void e.removeItem(r,n);throw new Rn(i.errorCodes?.join(" ")||u.EMPTY_STRING,i.errorMessage,i.subError)}}static postProcess(e,t,n,r){if(pi.checkResponseStatus(n)||pi.checkResponseForRetryAfter(n)){const i={throttleTime:pi.calculateThrottleTime(parseInt(n.headers[f])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(pi.generateThrottlingStorageKey(t),i,r)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&e.headers.hasOwnProperty(f)&&(e.status<200||e.status>=300)}static calculateThrottleTime(e){const t=e<=0?0:e,n=Date.now()/1e3;return Math.floor(1e3*Math.min(n+(t||60),n+3600))}static removeThrottle(e,t,n,r){const i=fi(t,n,r),o=this.generateThrottlingStorageKey(i);e.removeItem(o,n.correlationId)}}class gi extends j{constructor(e,t,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,gi.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=n}}class mi{constructor(e,t){this.config=function({authOptions:e,systemOptions:t,loggerOptions:n,cacheOptions:r,storageInterface:i,networkInterface:o,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:u,serverTelemetryManager:l,persistencePlugin:d,serializableCache:h}){const f={...Rr,...n};return{authOptions:(p=e,{clientCapabilities:[],azureCloudOptions:xr,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...p}),systemOptions:{...Pr,...t},loggerOptions:f,cacheOptions:{...Or,...r},storageInterface:i||new qt(e.clientId,Tr,new Mn(f),new kr),networkInterface:o||Mr,cryptoInterface:s||Tr,clientCredentials:a||Dr,libraryInfo:{...Nr,...c},telemetry:{...Lr,...u},serverTelemetryManager:l||null,persistencePlugin:d||null,serializableCache:h||null};var p}(e),this.logger=new Mn(this.config.loggerOptions,Ct,_t),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[h]=u.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case qr:try{const n=Fe(e.credential);t[p]=`Oid:${n.uid}@${n.utid}`}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case Fr:t[p]=`UPN: ${e.credential}`}return t}async executePostToTokenEndpoint(e,t,n,r,i,o){o&&this.performanceClient?.addQueueMeasurement(o,i);const s=await this.sendPostRequest(r,e,{body:t,headers:n},i);return this.config.serverTelemetryManager&&s.status<500&&429!==s.status&&this.config.serverTelemetryManager.clearTelemetryCache(),s}async sendPostRequest(e,t,n,r){let i;pi.preProcess(this.cacheManager,e,r);try{i=await ur(this.networkClient.sendPostRequestAsync.bind(this.networkClient),Dn,this.logger,this.performanceClient,r)(t,n);const e=i.headers||{};this.performanceClient?.addFields({refreshTokenSize:i.body.refresh_token?.length||0,httpVerToken:e[m]||"",requestId:e[g]||""},r)}catch(e){if(e instanceof gi){const t=e.responseHeaders;throw t&&this.performanceClient?.addFields({httpVerToken:t[m]||"",requestId:t[g]||"",contentTypeHeader:t[h]||void 0,contentLengthHeader:t["Content-Length"]||void 0,httpStatus:e.httpStatus},r),e.error}throw e instanceof j?e:Ue(X)}return pi.postProcess(this.cacheManager,e,i,r),i}async updateAuthority(e,t){this.performanceClient?.addQueueMeasurement(zn,t);const n=`https://${e}/${this.authority.tenant}/`,r=await hi(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=r}createTokenQueryParameters(e){const t=new Map;return e.embeddedClientId&&di(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&si(t,e.tokenQueryParameters),Yr(t,e.correlationId),Hr(t,e.correlationId,this.performanceClient),Tt(t)}}const vi="no_tokens_found",yi="native_account_unavailable",wi="refresh_token_expired",Ii="ux_not_allowed",Ai="interaction_required",Si="consent_required",Ci="login_required",_i="bad_token",Ei=[Ai,Si,Ci,_i,Ii],Ti=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],bi={[vi]:"No refresh token found in the cache. Please sign-in.",[yi]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[wi]:"Refresh token has expired.",[_i]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[Ii]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},ki={noTokensFoundError:{code:vi,desc:bi[vi]},native_account_unavailable:{code:yi,desc:bi[yi]},bad_token:{code:_i,desc:bi[_i]}};class Pi extends j{constructor(e,t,n,r,i,o,s,a){super(e,t,n),Object.setPrototypeOf(this,Pi.prototype),this.timestamp=r||u.EMPTY_STRING,this.traceId=i||u.EMPTY_STRING,this.correlationId=o||u.EMPTY_STRING,this.claims=s||u.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=a}}function Ri(e){return new Pi(e,bi[e])}class Oi{static setRequestState(e,t,n){const r=Oi.generateLibraryState(e,n);return t?`${r}${u.RESOURCE_DELIM}${t}`:r}static generateLibraryState(e,t){if(!e)throw Ue(ye);const n={id:e.createNewGuid()};t&&(n.meta=t);const r=JSON.stringify(n);return e.base64Encode(r)}static parseRequestState(e,t){if(!e)throw Ue(ye);if(!t)throw Ue(J);try{const n=t.split(u.RESOURCE_DELIM),r=n[0],i=n.length>1?n.slice(1).join(u.RESOURCE_DELIM):u.EMPTY_STRING,o=e.base64Decode(r),s=JSON.parse(o);return{userRequestState:i||u.EMPTY_STRING,libraryState:s}}catch(e){throw Ue(J)}}}class Mi{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){this.performanceClient?.addQueueMeasurement(Wn,e.correlationId);const n=await ur(this.generateKid.bind(this),Wn,t,this.performanceClient,e.correlationId)(e),r=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:r}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(Xn,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:"sw"}}async signPopToken(e,t,n){return this.signPayload(e,t,n)}async signPayload(e,t,n,r){const{resourceRequestMethod:i,resourceRequestUri:o,shrClaims:s,shrNonce:a,shrOptions:c}=n,u=o?new bt(o):void 0,l=u?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:dr(),m:i?.toUpperCase(),u:l?.HostNameAndPort,nonce:a||this.cryptoUtils.createNewGuid(),p:l?.AbsolutePath,q:l?.QueryString?[[],l.QueryString]:void 0,client_claims:s||void 0,...r},t,c,n.correlationId)}}class Ni{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class Di{constructor(e,t,n,r,i,o,s){this.clientId=e,this.cacheStorage=t,this.cryptoObj=n,this.logger=r,this.serializableCache=i,this.persistencePlugin=o,this.performanceClient=s}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){const n=`Error(s): ${e.error_codes||u.NOT_AVAILABLE} - Timestamp: ${e.timestamp||u.NOT_AVAILABLE} - Description: ${e.error_description||u.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||u.NOT_AVAILABLE} - Trace ID: ${e.trace_id||u.NOT_AVAILABLE}`,r=e.error_codes?.length?e.error_codes[0]:void 0,i=new Rn(e.error,n,e.suberror,r,e.status);if(t&&e.status&&e.status>=500&&e.status<=599)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n${i}`);if(t&&e.status&&e.status>=400&&e.status<=499)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n${i}`);if(function(e,t,n){const r=!!e&&Ei.indexOf(e)>-1,i=!!n&&Ti.indexOf(n)>-1,o=!!t&&Ei.some(e=>t.indexOf(e)>-1);return r||o||i}(e.error,e.error_description,e.suberror))throw new Pi(e.error,e.error_description,e.suberror,e.timestamp||u.EMPTY_STRING,e.trace_id||u.EMPTY_STRING,e.correlation_id||u.EMPTY_STRING,e.claims||u.EMPTY_STRING,r);throw i}}async handleServerTokenResponse(e,t,n,r,i,o,s,a,c){let l,d;if(this.performanceClient?.addQueueMeasurement(Yn,e.correlation_id),e.id_token){if(l=At(e.id_token||u.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&l.nonce!==i.nonce)throw Ue(te);if(r.maxAge||0===r.maxAge){const e=l.auth_time;if(!e)throw Ue(ne);St(e,r.maxAge)}}this.homeAccountIdentifier=Ve.generateHomeAccountId(e.client_info||u.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,l),i&&i.state&&(d=Oi.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||r.sshKid||void 0;const h=this.generateCacheRecord(e,t,n,r,l,o,i);let f;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),f=new Ni(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(f)),s&&!a&&h.account){const e=this.cacheStorage.generateAccountKey(h.account.getAccountInfo());if(!this.cacheStorage.getAccount(e,r.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await Di.generateAuthenticationResult(this.cryptoObj,t,h,!1,r,l,d,void 0,c)}await this.cacheStorage.saveCacheRecord(h,r.correlationId,r.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&f&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(f))}return Di.generateAuthenticationResult(this.cryptoObj,t,h,!1,r,l,d,e,c)}generateCacheRecord(e,t,n,r,i,o,s){const a=t.getPreferredCache();if(!a)throw Ue(me);const c=$e(i);let u,l;var d,h,f,p,g;e.id_token&&i&&(d=this.homeAccountIdentifier,h=a,f=e.id_token,p=this.clientId,g=c||"",u={credentialType:S.ID_TOKEN,homeAccountId:d,environment:h,clientId:p,secret:f,realm:g,lastUpdatedAt:Date.now().toString()},l=function(e,t,n,r,i,o,s,a,c,u,l,d){d?.verbose("setCachedAccount called");const h=e.getAccountKeys().find(e=>e.startsWith(n));let f=null;h&&(f=e.getAccount(h,i));const p=f||Ve.createAccount({homeAccountId:n,idTokenClaims:o,clientInfo:s,environment:a,cloudGraphHostName:u?.cloud_graph_host_name,msGraphHost:u?.msgraph_host,nativeAccountId:void 0},t,r),g=p.tenantProfiles||[],m=c||p.realm;if(m&&!g.find(e=>e.tenantId===m)){const e=Be(n,p.localAccountId,m,o);g.push(e)}return p.tenantProfiles=g,p}(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,r.correlationId,i,e.client_info,a,c,s,0,this.logger));let m=null;if(e.access_token){const i=e.scope?It.fromString(e.scope):new It(r.scopes||[]),s=("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,u=("string"==typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,l=("string"==typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,d=n+s,h=d+u,f=l&&l>0?n+l:void 0;m=function(e,t,n,r,i,o,s,a,c,u,l,d,h,f,p){const g={homeAccountId:e,credentialType:S.ACCESS_TOKEN,secret:n,cachedAt:dr().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:t,clientId:r,realm:i,target:o,tokenType:l||O.BEARER,lastUpdatedAt:Date.now().toString()};if(d&&(g.userAssertionHash=d),u&&(g.refreshOn=u.toString()),f&&(g.requestedClaims=f,g.requestedClaimsHash=p),g.tokenType?.toLowerCase()!==O.BEARER.toLowerCase())switch(g.credentialType=S.ACCESS_TOKEN_WITH_AUTH_SCHEME,g.tokenType){case O.POP:const e=At(n,c);if(!e?.cnf?.kid)throw Ue(_e);g.keyId=e.cnf.kid;break;case O.SSH:g.keyId=h}return g}(this.homeAccountIdentifier,a,e.access_token,this.clientId,c||t.tenant||"",i.printScopes(),d,h,this.cryptoObj.base64Decode,f,e.token_type,o,e.key_id,r.claims,r.requestedClaimsHash)}let v=null;if(e.refresh_token){let t;e.refresh_token_expires_in&&(t=n+("string"==typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)),v=function(e,t,n,r,i,o,s){const a={credentialType:S.REFRESH_TOKEN,homeAccountId:e,environment:t,clientId:r,secret:n,lastUpdatedAt:Date.now().toString()};return o&&(a.userAssertionHash=o),i&&(a.familyId=i),s&&(a.expiresOn=s.toString()),a}(this.homeAccountIdentifier,a,e.refresh_token,this.clientId,e.foci,o,t)}let y=null;return e.foci&&(y={clientId:this.clientId,environment:a,familyId:e.foci}),{account:l,idToken:u,accessToken:m,refreshToken:v,appMetadata:y}}static async generateAuthenticationResult(e,t,n,r,i,o,s,a,c){let l,d,h=u.EMPTY_STRING,f=[],p=null,g=u.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType!==O.POP||i.popKid)h=n.accessToken.secret;else{const t=new Mi(e),{secret:r,keyId:o}=n.accessToken;if(!o)throw Ue(ke);h=await t.signPopToken(r,o,i)}f=It.fromString(n.accessToken.target).asArray(),p=hr(n.accessToken.expiresOn),l=hr(n.accessToken.extendedExpiresOn),n.accessToken.refreshOn&&(d=hr(n.accessToken.refreshOn))}n.appMetadata&&(g=n.appMetadata.familyId===_?_:"");const m=o?.oid||o?.sub||"",v=o?.tid||"";a?.spa_accountid&&n.account&&(n.account.nativeAccountId=a?.spa_accountid);const y=n.account?je(n.account.getAccountInfo(),void 0,o,n.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:m,tenantId:v,scopes:f,account:y,idToken:n?.idToken?.secret||"",idTokenClaims:o||{},accessToken:h,fromCache:r,expiresOn:p,extExpiresOn:l,refreshOn:d,correlationId:i.correlationId,requestId:c||u.EMPTY_STRING,familyId:g,tokenType:n.accessToken?.tokenType||u.EMPTY_STRING,state:s?s.userRequestState:u.EMPTY_STRING,cloudGraphHostName:n.account?.cloudGraphHostName||u.EMPTY_STRING,msGraphHost:n.account?.msGraphHost||u.EMPTY_STRING,code:a?.spa_code,fromNativeBroker:!1}}}async function xi(e,t,n){return"string"==typeof e?e:e({clientId:t,tokenEndpoint:n})}class Li extends mi{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,t){if(this.performanceClient?.addQueueMeasurement(Vn,e.correlationId),!e.code)throw Ue(ae);const n=dr(),r=await ur(this.executeTokenRequest.bind(this),Kn,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=r.headers?.[g],o=new Di(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return o.validateTokenResponse(r.body),ur(o.handleServerTokenResponse.bind(o),Yn,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,n,e,t,void 0,void 0,void 0,i)}getLogoutUri(e){if(!e)throw yt(et);const t=this.createLogoutUrlQueryString(e);return bt.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(Kn,t.correlationId);const n=this.createTokenQueryParameters(t),r=bt.appendQueryString(e.tokenEndpoint,n),i=await ur(this.createTokenRequestBody.bind(this),Gn,this.logger,this.performanceClient,t.correlationId)(t);let o;if(t.clientInfo)try{const e=qe(t.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${e.uid}.${e.utid}`,type:qr}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}const s=this.createTokenRequestHeaders(o||t.ccsCredential),a=fi(this.config.authOptions.clientId,t);return ur(this.executePostToTokenEndpoint.bind(this),Ln,this.logger,this.performanceClient,t.correlationId)(r,i,s,a,t.correlationId,Ln)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Gn,e.correlationId);const t=new Map;if($r(t,e.embeddedClientId||e.tokenBodyParameters?.[An]||this.config.authOptions.clientId),this.includeRedirectUri)zr(t,e.redirectUri);else if(!e.redirectUri)throw yt(Ke);if(jr(t,e.scopes,!0,this.oidcDefaultScopes),function(e,t){e.set("code",t)}(t,e.code),Qr(t,this.config.libraryInfo),Jr(t,this.config.telemetry.application),li(t),this.serverTelemetryManager&&!Ur(this.config)&&ui(t,this.serverTelemetryManager),e.codeVerifier&&function(e,t){e.set("code_verifier",t)}(t,e.codeVerifier),this.config.clientCredentials.clientSecret&&ei(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const n=this.config.clientCredentials.clientAssertion;ti(t,await xi(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),ni(t,n.assertionType)}if(ri(t,"authorization_code"),ii(t),e.authenticationScheme===O.POP){const n=new Mi(this.cryptoUtils,this.performanceClient);let r;r=e.popKid?this.cryptoUtils.encodeKid(e.popKid):(await ur(n.generateCnf.bind(n),Wn,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,ai(t,r)}else if(e.authenticationScheme===O.SSH){if(!e.sshJwk)throw yt(st);ci(t,e.sshJwk)}let n;if((!wt.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Xr(t,e.claims,this.config.authOptions.clientCapabilities),e.clientInfo)try{const t=qe(e.clientInfo,this.cryptoUtils.base64Decode);n={credential:`${t.uid}.${t.utid}`,type:qr}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}else n=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case qr:try{Gr(t,Fe(n.credential))}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case Fr:Kr(t,n.credential)}return e.embeddedClientId&&di(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&si(t,e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[En]||si(t,{[En]:"1"}),Hr(t,e.correlationId,this.performanceClient),Tt(t)}createLogoutUrlQueryString(e){const t=new Map;return e.postLogoutRedirectUri&&function(e,t){e.set("post_logout_redirect_uri",t)}(t,e.postLogoutRedirectUri),e.correlationId&&Yr(t,e.correlationId),e.idTokenHint&&function(e,t){e.set("id_token_hint",t)}(t,e.idTokenHint),e.state&&Zr(t,e.state),e.logoutHint&&function(e,t){e.set("logout_hint",t)}(t,e.logoutHint),e.extraQueryParameters&&si(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&oi(t),Tt(t,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}class Ui extends mi{constructor(e,t){super(e,t)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(qn,e.correlationId);const t=dr(),n=await ur(this.executeTokenRequest.bind(this),Un,this.logger,this.performanceClient,e.correlationId)(e,this.authority),r=n.headers?.[g],i=new Di(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(n.body),ur(i.handleServerTokenResponse.bind(i),Yn,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,r)}async acquireTokenByRefreshToken(e){if(!e)throw yt(Ze);if(this.performanceClient?.addQueueMeasurement(Hn,e.correlationId),!e.account)throw Ue(pe);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await ur(this.acquireTokenWithCachedRefreshToken.bind(this),Fn,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(t){const n=t instanceof Pi&&t.errorCode===vi,r=t instanceof Rn&&"invalid_grant"===t.errorCode&&"client_mismatch"===t.subError;if(n||r)return ur(this.acquireTokenWithCachedRefreshToken.bind(this),Fn,this.logger,this.performanceClient,e.correlationId)(e,!1);throw t}return ur(this.acquireTokenWithCachedRefreshToken.bind(this),Fn,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){this.performanceClient?.addQueueMeasurement(Fn,e.correlationId);const n=(r=this.cacheManager.getRefreshToken.bind(this.cacheManager),i=ar,o=this.logger,s=this.performanceClient,a=e.correlationId,(...e)=>{o.trace(`Executing function ${i}`);const t=s?.startMeasurement(i,a);if(a){const e=i+"CallCount";s?.incrementFields({[e]:1},a)}try{const n=r(...e);return t?.end({success:!0}),o.trace(`Returning result from ${i}`),n}catch(e){o.trace(`Error occurred in ${i}`);try{o.trace(JSON.stringify(e))}catch(e){o.trace("Unable to print error message.")}throw t?.end({success:!1},e),e}})(e.account,t,e.correlationId,void 0,this.performanceClient);var r,i,o,s,a;if(!n)throw Ri(vi);if(n.expiresOn&&fr(n.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),Ri(wi);const c={...e,refreshToken:n.secret,authenticationScheme:e.authenticationScheme||O.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:qr}};try{return await ur(this.acquireToken.bind(this),qn,this.logger,this.performanceClient,e.correlationId)(c)}catch(t){if(t instanceof Pi&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),t.subError===_i)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const t=this.cacheManager.generateCredentialKey(n);this.cacheManager.removeRefreshToken(t,e.correlationId)}throw t}}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(Un,e.correlationId);const n=this.createTokenQueryParameters(e),r=bt.appendQueryString(t.tokenEndpoint,n),i=await ur(this.createTokenRequestBody.bind(this),Bn,this.logger,this.performanceClient,e.correlationId)(e),o=this.createTokenRequestHeaders(e.ccsCredential),s=fi(this.config.authOptions.clientId,e);return ur(this.executePostToTokenEndpoint.bind(this),xn,this.logger,this.performanceClient,e.correlationId)(r,i,o,s,e.correlationId,xn)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Bn,e.correlationId);const t=new Map;if($r(t,e.embeddedClientId||e.tokenBodyParameters?.[An]||this.config.authOptions.clientId),e.redirectUri&&zr(t,e.redirectUri),jr(t,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),ri(t,"refresh_token"),ii(t),Qr(t,this.config.libraryInfo),Jr(t,this.config.telemetry.application),li(t),this.serverTelemetryManager&&!Ur(this.config)&&ui(t,this.serverTelemetryManager),function(e,t){e.set("refresh_token",t)}(t,e.refreshToken),this.config.clientCredentials.clientSecret&&ei(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const n=this.config.clientCredentials.clientAssertion;ti(t,await xi(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),ni(t,n.assertionType)}if(e.authenticationScheme===O.POP){const n=new Mi(this.cryptoUtils,this.performanceClient);let r;r=e.popKid?this.cryptoUtils.encodeKid(e.popKid):(await ur(n.generateCnf.bind(n),Wn,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,ai(t,r)}else if(e.authenticationScheme===O.SSH){if(!e.sshJwk)throw yt(st);ci(t,e.sshJwk)}if((!wt.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Xr(t,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case qr:try{Gr(t,Fe(e.ccsCredential.credential))}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case Fr:Kr(t,e.ccsCredential.credential)}return e.embeddedClientId&&di(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&si(t,e.tokenBodyParameters),Hr(t,e.correlationId,this.performanceClient),Tt(t)}}class qi extends mi{constructor(e,t){super(e,t)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(jn,e.correlationId);let t=N;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!wt.isEmptyObj(e.claims))throw this.setCacheOutcome("1",e.correlationId),Ue(Se);if(!e.account)throw Ue(pe);const n=e.account.tenantId||function(e){const t=new bt(e).getUrlComponents(),n=t.PathSegments.slice(-1)[0]?.toLowerCase();switch(n){case v.COMMON:case v.ORGANIZATIONS:case v.CONSUMERS:return;default:return n}}(e.authority),r=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,r,n);if(!i)throw this.setCacheOutcome(D,e.correlationId),Ue(Se);if(o=i.cachedAt,Number(o)>dr()||fr(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(x,e.correlationId),Ue(Se);var o;i.refreshOn&&fr(i.refreshOn,0)&&(t=L);const s=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,r,n,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await ur(this.generateResultFromCacheRecord.bind(this),$n,this.logger,this.performanceClient,e.correlationId)(a,e),t]}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==N&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,t){let n;if(this.performanceClient?.addQueueMeasurement($n,t.correlationId),e.idToken&&(n=At(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){const e=n?.auth_time;if(!e)throw Ue(ne);St(e,t.maxAge)}return Di.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,n)}}class Fi{static getNetworkResponse(e,t,n){return{headers:e,body:t,status:n}}static urlToHttpOptions(e){const t={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return""!==e.port&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),t}}var Hi=n(8611),Bi=n(5692);class ji{constructor(e,t){this.proxyUrl=e||"",this.customAgentOptions=t||{}}async sendGetRequestAsync(e,t,n){return this.proxyUrl?$i(e,this.proxyUrl,rn,t,this.customAgentOptions,n):zi(e,rn,t,this.customAgentOptions,n)}async sendPostRequestAsync(e,t){return this.proxyUrl?$i(e,this.proxyUrl,on,t,this.customAgentOptions):zi(e,on,t,this.customAgentOptions)}}const $i=(e,t,n,r,i,o)=>{const s=new URL(e),a=new URL(t),c=r?.headers||{},u={host:a.hostname,port:a.port,method:"CONNECT",path:s.hostname,headers:c};i&&Object.keys(i).length&&(u.agent=new Hi.Agent(i));let l="";if(n===on){const e=r?.body||"";l=`Content-Type: application/x-www-form-urlencoded\r\nContent-Length: ${e.length}\r\n\r\n${e}`}else o&&(u.timeout=o);const d=`${n.toUpperCase()} ${s.href} HTTP/1.1\r\nHost: ${s.host}\r\nConnection: close\r\n`+l+"\r\n";return new Promise((e,t)=>{const n=Hi.request(u);o&&n.on("timeout",()=>{n.destroy(),t(new Error("Request time out"))}),n.end(),n.on("connect",(r,i)=>{const o=r?.statusCode||cn;(o<sn||o>an)&&(n.destroy(),i.destroy(),t(new Error(`Error connecting to proxy. Http status code: ${r.statusCode}. Http status message: ${r?.statusMessage||"Unknown"}`))),i.write(d);const s=[];i.on("data",e=>{s.push(e)}),i.on("end",()=>{const t=Buffer.concat([...s]).toString().split("\r\n"),r=parseInt(t[0].split(" ")[1]),i=t[0].split(" ").slice(2).join(" "),o=t[t.length-1],a=t.slice(1,t.length-2),c=new Map;a.forEach(e=>{const t=e.split(new RegExp(/:\s(.*)/s)),n=t[0];let r=t[1];try{const e=JSON.parse(r);e&&"object"==typeof e&&(r=e)}catch(e){}c.set(n,r)});const u=Object.fromEntries(c),l=Fi.getNetworkResponse(u,Vi(r,i,u,o),r);(r<200||r>299)&&l.body.error!==hn&&n.destroy(),e(l)}),i.on("error",e=>{n.destroy(),i.destroy(),t(new Error(e.toString()))})}),n.on("error",e=>{n.destroy(),t(new Error(e.toString()))})})},zi=(e,t,n,r,i)=>{const o=t===on,s=n?.body||"",a=new URL(e),c={method:t,headers:n?.headers||{},...Fi.urlToHttpOptions(a)};return r&&Object.keys(r).length&&(c.agent=new Bi.Agent(r)),o?c.headers={...c.headers,"Content-Length":s.length}:i&&(c.timeout=i),new Promise((e,t)=>{let n;n="http:"===c.protocol?Hi.request(c):Bi.request(c),o&&n.write(s),i&&n.on("timeout",()=>{n.destroy(),t(new Error("Request time out"))}),n.end(),n.on("response",t=>{const r=t.headers,i=t.statusCode,o=t.statusMessage,s=[];t.on("data",e=>{s.push(e)}),t.on("end",()=>{const t=Buffer.concat([...s]).toString(),a=r,c=Fi.getNetworkResponse(a,Vi(i,o,a,t),i);(i<200||i>299)&&c.body.error!==hn&&n.destroy(),e(c)})}),n.on("error",e=>{n.destroy(),t(new Error(e.toString()))})})},Vi=(e,t,n,r)=>{let i;try{i=JSON.parse(r)}catch(r){let o,s;e>=400&&e<=499?(o="client_error",s="A client"):e>=500&&e<=599?(o="server_error",s="A server"):(o="unknown_error",s="An unknown"),i={error:o,error_description:`${s} error occured.\nHttp status code: ${e}\nHttp status message: ${t||"Unknown"}\nHeaders: ${JSON.stringify(n)}`}}return i},Ki="invalid_file_extension",Gi="invalid_file_path",Wi="invalid_managed_identity_id_type",Xi="invalid_secret",Yi="missing_client_id",Qi="network_unavailable",Ji="platform_not_supported",Zi="unable_to_create_azure_arc",eo="unable_to_create_cloud_shell",to="unable_to_create_source",no="unable_to_read_secret_file",ro="user_assigned_not_available_at_runtime",io="www_authenticate_header_missing",oo="www_authenticate_header_unsupported_format",so={[Vt]:"azure_pod_identity_authority_host_url_malformed",[Kt]:"identity_endpoint_url_malformed",[Xt]:"imds_endpoint_url_malformed",[Yt]:"msi_endpoint_url_malformed"},ao={[Ki]:"The file path in the WWW-Authenticate header does not contain a .key file.",[Gi]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[Wi]:"More than one ManagedIdentityIdType was provided.",[Xi]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[Ji]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",[Yi]:"A ManagedIdentityId id was not provided.",[so.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${Vt}' environment variable is malformed.`,[so.IDENTITY_ENDPOINT]:`The Managed Identity's '${Kt}' environment variable is malformed.`,[so.IMDS_ENDPOINT]:`The Managed Identity's '${Xt}' environment variable is malformed.`,[so.MSI_ENDPOINT]:`The Managed Identity's '${Yt}' environment variable is malformed.`,[Qi]:"Authentication unavailable. The request to the managed identity endpoint timed out.",[Zi]:"Azure Arc Managed Identities can only be system assigned.",[eo]:"Cloud Shell Managed Identities can only be system assigned.",[to]:"Unable to create a Managed Identity source based on environment variables.",[no]:"Unable to read the secret file.",[ro]:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[io]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[oo]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."};class co extends j{constructor(e){super(e,ao[e]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,co.prototype)}}function uo(e){return new co(e)}class lo{get id(){return this._id}set id(e){this._id=e}get idType(){return this._idType}set idType(e){this._idType=e}constructor(e){const t=e?.userAssignedClientId,n=e?.userAssignedResourceId,r=e?.userAssignedObjectId;if(t){if(n||r)throw uo(Wi);this.id=t,this.idType=en}else if(n){if(t||r)throw uo(Wi);this.id=n,this.idType=tn}else if(r){if(t||n)throw uo(Wi);this.id=r,this.idType=nn}else this.id="system_assigned_managed_identity",this.idType=Zt}}const ho="invalid_loopback_server_address_type",fo="Loopback server address is not type string. This is unexpected.",po="unable_to_load_redirectUrl",go="Loopback server callback was invoked without a url. This is unexpected.",mo="no_auth_code_in_response",vo="No auth code found in the server response. Please check your network trace to determine what happened.",yo="no_loopback_server_exists",wo="No loopback server exists yet.",Io="loopback_server_already_exists",Ao="Loopback server already exists. Cannot create another.",So="loopback_server_timeout",Co="Timed out waiting for auth code listener to be registered.",_o="state_not_found",Eo="State not found. Please verify that the request originated from msal.",To="thumbprint_missing_from_client_certificate",bo="Client certificate does not contain a SHA-1 or SHA-256 thumbprint.",ko="redirect_uri_not_supported",Po="RedirectUri is not supported in this scenario. Please remove redirectUri from the request.";class Ro extends j{constructor(e,t){super(e,t),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new Ro(ho,`${fo}`)}static createUnableToLoadRedirectUrlError(){return new Ro(po,`${go}`)}static createNoAuthCodeInResponseError(){return new Ro(mo,`${vo}`)}static createNoLoopbackServerExistsError(){return new Ro(yo,`${wo}`)}static createLoopbackServerAlreadyExistsError(){return new Ro(Io,`${Ao}`)}static createLoopbackServerTimeoutError(){return new Ro(So,`${Co}`)}static createStateNotFoundError(){return new Ro(_o,Eo)}static createThumbprintMissingError(){return new Ro(To,bo)}static createRedirectUriNotSupportedError(){return new Ro(ko,Po)}}const Oo={clientId:u.EMPTY_STRING,authority:u.DEFAULT_AUTHORITY,clientSecret:u.EMPTY_STRING,clientAssertion:u.EMPTY_STRING,clientCertificate:{thumbprint:u.EMPTY_STRING,thumbprintSha256:u.EMPTY_STRING,privateKey:u.EMPTY_STRING,x5c:u.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:u.EMPTY_STRING,authorityMetadata:u.EMPTY_STRING,clientCapabilities:[],protocolMode:ze.AAD,azureCloudOptions:{azureCloudInstance:Nn.None,tenant:u.EMPTY_STRING},skipAuthorityMetadataCache:!1,encodeExtraQueryParams:!1},Mo={claimsBasedCachingEnabled:!1},No={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:On.Info},Do={loggerOptions:No,networkClient:new ji,proxyUrl:u.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},xo={application:{appName:u.EMPTY_STRING,appVersion:u.EMPTY_STRING}};var Lo=n(2107);class Uo{generateGuid(){return(0,Lo.v4)()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}}class qo{static base64Encode(e,t){return Buffer.from(e,t).toString(U)}static base64EncodeUrl(e,t){return qo.base64Encode(e,t).replace(/=/g,u.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,U).toString("utf8")}static base64DecodeUrl(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");for(;t.length%4;)t+="=";return qo.base64Decode(t)}}var Fo=n(6982);class Ho{sha256(e){return Fo.createHash("sha256").update(e).digest()}}class Bo{constructor(){this.hashUtils=new Ho}async generatePkceCodes(){const e=this.generateCodeVerifier();return{verifier:e,challenge:this.generateCodeChallengeFromVerifier(e)}}generateCodeVerifier(){const e=[];for(;e.length<=32;){const t=Fo.randomBytes(1)[0];if(t>=198)continue;const n=t%66;e.push(un[n])}const t=e.join(u.EMPTY_STRING);return qo.base64EncodeUrl(t)}generateCodeChallengeFromVerifier(e){return qo.base64EncodeUrl(this.hashUtils.sha256(e).toString(U),U)}}class jo{constructor(){this.pkceGenerator=new Bo,this.guidGenerator=new Uo,this.hashUtils=new Ho}base64UrlEncode(){throw new Error("Method not implemented.")}encodeKid(){throw new Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return qo.base64Encode(e)}base64Decode(e){return qo.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return qo.base64EncodeUrl(this.hashUtils.sha256(e).toString(U),U)}}class $o extends Ut{constructor(e,t,n,r){super(t,n,e,new kr,r),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach(e=>e.call(null))}cacheToInMemoryCache(e){const t={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(const n in e){const r=e[n];if("object"==typeof r)if(r instanceof Ve)t.accounts[n]=r;else if(vr(r))t.idTokens[n]=r;else if(mr(r))t.accessTokens[n]=r;else if(yr(r))t.refreshTokens[n]=r;else{if(!wr(n,r))continue;t.appMetadata[n]=r}}return t}inMemoryCacheToCache(e){let t=this.getCache();return t={...t,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},t}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");const t=this.inMemoryCacheToCache(e);this.setCache(t),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,t){this.logger.tracePii(`Item key: ${e}`);const n=this.getCache();n[e]=t,this.setCache(n)}generateCredentialKey(e){return function(e){const t=e.credentialType===S.REFRESH_TOKEN&&e.familyId||e.clientId,n=e.tokenType&&e.tokenType.toLowerCase()!==O.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[e.homeAccountId,e.environment,e.credentialType,t,e.realm||"",e.target||"",e.requestedClaimsHash||"",n].join("-").toLowerCase()}(e)}generateAccountKey(e){return function(e){const t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment,t||e.tenantId||""].join("-").toLowerCase()}(e)}getAccountKeys(){const e=this.getInMemoryCache();return Object.keys(e.accounts)}getTokenKeys(){const e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){return this.getItem(e)?Object.assign(new Ve,this.getItem(e)):null}async setAccount(e){const t=this.generateAccountKey(e.getAccountInfo());this.setItem(t,e)}getIdTokenCredential(e){const t=this.getItem(e);return vr(t)?t:null}async setIdTokenCredential(e){const t=this.generateCredentialKey(e);this.setItem(t,e)}getAccessTokenCredential(e){const t=this.getItem(e);return mr(t)?t:null}async setAccessTokenCredential(e){const t=this.generateCredentialKey(e);this.setItem(t,e)}getRefreshTokenCredential(e){const t=this.getItem(e);return yr(t)?t:null}async setRefreshTokenCredential(e){const t=this.generateCredentialKey(e);this.setItem(t,e)}getAppMetadata(e){const t=this.getItem(e);return wr(e,t)?t:null}setAppMetadata(e){const t=function({environment:e,clientId:t}){return[C,e,t].join("-").toLowerCase()}(e);this.setItem(t,e)}getServerTelemetry(e){const t=this.getItem(e);return t&&function(e,t){const n=0===e.indexOf(R.CACHE_KEY);let r=!0;return t&&(r=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),n&&r}(e,t)?t:null}setServerTelemetry(e,t){this.setItem(e,t)}getAuthorityMetadata(e){const t=this.getItem(e);return t&&function(e,t){return!!t&&0===e.indexOf(E)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri")}(e,t)?t:null}getAuthorityMetadataKeys(){return this.getKeys().filter(e=>this.isAuthorityMetadata(e))}setAuthorityMetadata(e,t){this.setItem(e,t)}getThrottlingCache(e){const t=this.getItem(e);return t&&function(e,t){let n=!1;e&&(n=0===e.indexOf(M));let r=!0;return t&&(r=t.hasOwnProperty("throttleTime")),n&&r}(e,t)?t:null}setThrottlingCache(e,t){this.setItem(e,t)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let t=!1;const n=this.getCache();return n[e]&&(delete n[e],t=!0),t&&(this.setCache(n),this.emitChange()),t}removeOutdatedAccount(e){this.removeItem(e)}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");const e=this.getCache();return[...Object.keys(e)]}clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(e=>{this.removeItem(e)}),this.emitChange()}static generateInMemoryCache(e){return Ft.deserializeAllCache(Ft.deserializeJSONBlob(e))}static generateJsonCache(e){return c.serializeAllCache(e)}updateCredentialCacheKey(e,t){const n=this.generateCredentialKey(t);if(e!==n){const r=this.getItem(e);if(r)return this.removeItem(e),this.setItem(n,r),this.logger.verbose(`Updated an outdated ${t.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${t.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}}const zo={},Vo={},Ko={},Go={},Wo={};class Xo{constructor(e,t,n){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),n&&(this.persistence=n),this.logger=t}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=c.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");const e=Ft.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(e)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}getCacheSnapshot(){const e=$o.generateInMemoryCache(this.cacheSnapshot);return this.storage.inMemoryCacheToCache(e)}async getAllAccounts(e=(new jo).createNewGuid()){let t;this.logger.trace("getAllAccounts called");try{return this.persistence&&(t=new Ni(this,!1),await this.persistence.beforeCacheAccess(t)),this.storage.getAllAccounts({},e)}finally{this.persistence&&t&&await this.persistence.afterCacheAccess(t)}}async getAccountByHomeId(e){const t=await this.getAllAccounts();return e&&t&&t.length&&t.filter(t=>t.homeAccountId===e)[0]||null}async getAccountByLocalId(e){const t=await this.getAllAccounts();return e&&t&&t.length&&t.filter(t=>t.localAccountId===e)[0]||null}async removeAccount(e,t){let n;this.logger.trace("removeAccount called");try{this.persistence&&(n=new Ni(this,!0),await this.persistence.beforeCacheAccess(n)),this.storage.removeAccount(e,t||(new Uo).generateGuid())}finally{this.persistence&&n&&await this.persistence.afterCacheAccess(n)}}async overwriteCache(){if(!this.persistence)return void this.logger.info("No persistence layer specified, cache cannot be overwritten");this.logger.info("Overwriting in-memory cache with persistent cache"),this.storage.clear();const e=new Ni(this,!1);await this.persistence.beforeCacheAccess(e);const t=this.getCacheSnapshot();this.storage.setCache(t),await this.persistence.afterCacheAccess(e)}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,t){this.logger.trace("Merging in-memory cache with cache snapshot");const n=this.mergeRemovals(e,t);return this.mergeUpdates(n,t)}mergeUpdates(e,t){return Object.keys(t).forEach(n=>{const r=t[n];if(e.hasOwnProperty(n)){const t=null!==r,i="object"==typeof r,o=!Array.isArray(r),s=void 0!==e[n]&&null!==e[n];t&&i&&o&&s?this.mergeUpdates(e[n],r):e[n]=r}else null!==r&&(e[n]=r)}),e}mergeRemovals(e,t){this.logger.trace("Remove updated entries in cache");const n=e.Account?this.mergeRemovalsDict(e.Account,t.Account):e.Account,r=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,t.AccessToken):e.AccessToken,i=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,t.RefreshToken):e.RefreshToken,o=e.IdToken?this.mergeRemovalsDict(e.IdToken,t.IdToken):e.IdToken,s=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,t.AppMetadata):e.AppMetadata;return{...e,Account:n,AccessToken:r,RefreshToken:i,IdToken:o,AppMetadata:s}}mergeRemovalsDict(e,t){const n={...e};return Object.keys(e).forEach(e=>{t&&t.hasOwnProperty(e)||delete n[e]}),n}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...zo,...e.Account},IdToken:{...Vo,...e.IdToken},AccessToken:{...Ko,...e.AccessToken},RefreshToken:{...Go,...e.RefreshToken},AppMetadata:{...Wo,...e.AppMetadata}}}}var Yo=n(4040);class Qo{static fromAssertion(e){const t=new Qo;return t.jwt=e,t}static fromCertificate(e,t,n){const r=new Qo;return r.privateKey=t,r.thumbprint=e,r.useSha256=!1,n&&(r.publicCertificate=this.parseCertificate(n)),r}static fromCertificateWithSha256Thumbprint(e,t,n){const r=new Qo;return r.privateKey=t,r.thumbprint=e,r.useSha256=!0,n&&(r.publicCertificate=this.parseCertificate(n)),r}getJwt(e,t,n){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&t===this.issuer&&n===this.jwtAudience?this.jwt:this.createJwt(e,t,n);if(this.jwt)return this.jwt;throw Ue(Ie)}createJwt(e,t,n){this.issuer=t,this.jwtAudience=n;const r=dr();this.expirationTime=r+600;const i={alg:this.useSha256?"PS256":"RS256"},o=this.useSha256?"x5t#S256":"x5t";Object.assign(i,{[o]:qo.base64EncodeUrl(this.thumbprint,"hex")}),this.publicCertificate&&Object.assign(i,{[fn]:this.publicCertificate});const s={[pn]:this.jwtAudience,[gn]:this.expirationTime,[mn]:this.issuer,[vn]:this.issuer,[yn]:r,[wn]:e.createNewGuid()};return this.jwt=Yo.sign(s,this.privateKey,{header:i}),this.jwt}isExpired(){return this.expirationTime<dr()}static parseCertificate(e){const t=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,n=[];let r;for(;null!==(r=t.exec(e));)n.push(r[1].replace(/\r*\n/g,u.EMPTY_STRING));return n}}const Jo="@azure/msal-node",Zo="3.8.0";class es extends mi{constructor(e){super(e)}async acquireToken(e){this.logger.info("in acquireToken call in username-password client");const t=dr(),n=await this.executeTokenRequest(this.authority,e),r=new Di(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return r.validateTokenResponse(n.body),r.handleServerTokenResponse(n.body,this.authority,t,e)}async executeTokenRequest(e,t){const n=this.createTokenQueryParameters(t),r=bt.appendQueryString(e.tokenEndpoint,n),i=await this.createTokenRequestBody(t),o=this.createTokenRequestHeaders({credential:t.username,type:Fr}),s={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return this.executePostToTokenEndpoint(r,i,o,s,t.correlationId)}async createTokenRequestBody(e){const t=new Map;$r(t,this.config.authOptions.clientId),function(e,t){e.set("username",t)}(t,e.username),function(e,t){e.set("password",t)}(t,e.password),jr(t,e.scopes),Br(t,"id_token token"),ri(t,"password"),ii(t),Qr(t,this.config.libraryInfo),Jr(t,this.config.telemetry.application),li(t),this.serverTelemetryManager&&ui(t,this.serverTelemetryManager),Yr(t,e.correlationId||this.config.cryptoInterface.createNewGuid()),this.config.clientCredentials.clientSecret&&ei(t,this.config.clientCredentials.clientSecret);const n=this.config.clientCredentials.clientAssertion;return n&&(ti(t,await xi(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),ni(t,n.assertionType)),(!wt.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Xr(t,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&Kr(t,e.username),Tt(t)}}function ts(e,t,n,r){const i=function(e,t,n,r){const i=t.correlationId,o=new Map;if($r(o,t.embeddedClientId||t.extraQueryParameters?.[An]||e.clientId),jr(o,[...t.scopes||[],...t.extraScopesToConsent||[]],!0,e.authority.options.OIDCOptions?.defaultScopes),zr(o,t.redirectUri),Yr(o,i),function(e,t){e.set("response_mode",t||I.QUERY)}(o,t.responseMode),ii(o),t.prompt&&(function(e,t){e.set("prompt",t)}(o,t.prompt),r?.addFields({prompt:t.prompt},i)),t.domainHint&&(function(e,t){e.set("domain_hint",t)}(o,t.domainHint),r?.addFields({domainHintFromRequest:!0},i)),t.prompt!==w.SELECT_ACCOUNT)if(t.sid&&t.prompt===w.NONE)n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),Wr(o,t.sid),r?.addFields({sidFromRequest:!0},i);else if(t.account){const e=(s=t.account,s.idTokenClaims?.sid||null);let a=function(e){return e.loginHint||e.idTokenClaims?.login_hint||null}(t.account);if(a&&t.domainHint&&(n.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),a=null),a){n.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),Vr(o,a),r?.addFields({loginHintFromClaim:!0},i);try{Gr(o,Fe(t.account.homeAccountId))}catch(e){n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e&&t.prompt===w.NONE){n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),Wr(o,e),r?.addFields({sidFromClaim:!0},i);try{Gr(o,Fe(t.account.homeAccountId))}catch(e){n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(t.loginHint)n.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),Vr(o,t.loginHint),Kr(o,t.loginHint),r?.addFields({loginHintFromRequest:!0},i);else if(t.account.username){n.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),Vr(o,t.account.username),r?.addFields({loginHintFromUpn:!0},i);try{Gr(o,Fe(t.account.homeAccountId))}catch(e){n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else t.loginHint&&(n.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),Vr(o,t.loginHint),Kr(o,t.loginHint),r?.addFields({loginHintFromRequest:!0},i));else n.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");var s;return t.nonce&&function(e,t){e.set("nonce",t)}(o,t.nonce),t.state&&Zr(o,t.state),(t.claims||e.clientCapabilities&&e.clientCapabilities.length>0)&&Xr(o,t.claims,e.clientCapabilities),t.embeddedClientId&&di(o,e.clientId,e.redirectUri),!e.instanceAware||t.extraQueryParameters&&Object.keys(t.extraQueryParameters).includes(Pn)||oi(o),o}({...e.auth,authority:t,redirectUri:n.redirectUri||""},n,r);return Qr(i,{sku:ln,version:Zo,cpu:process.arch||"",os:process.platform||""}),e.auth.protocolMode!==ze.OIDC&&Jr(i,e.telemetry.application),Br(i,"code"),n.codeChallenge&&n.codeChallengeMethod&&function(e,t,n){if(!t||!n)throw yt(nt);e.set("code_challenge",t),e.set("code_challenge_method",n)}(i,n.codeChallenge,n.codeChallengeMethod),si(i,n.extraQueryParameters||{}),function(e,t,n,r){const i=Tt(t,n,r);return bt.appendQueryString(e.authorizationEndpoint,i)}(t,i,e.auth.encodeExtraQueryParams,n.extraQueryParameters)}class ns{constructor(e){this.config=function({auth:e,broker:t,cache:n,system:r,telemetry:i}){const o={...Do,networkClient:new ji(r?.proxyUrl,r?.customAgentOptions),loggerOptions:r?.loggerOptions||No,disableInternalRetries:r?.disableInternalRetries||!1};if(e.clientCertificate&&!e.clientCertificate.thumbprint&&!e.clientCertificate.thumbprintSha256)throw Ro.createStateNotFoundError();return{auth:{...Oo,...e},broker:{...t},cache:{...Mo,...n},system:{...o,...r},telemetry:{...xo,...i}}}(e),this.cryptoProvider=new jo,this.logger=new Mn(this.config.system.loggerOptions,Jo,Zo),this.storage=new $o(this.logger,this.config.auth.clientId,this.cryptoProvider,function(e){const t=e.cloudDiscoveryMetadata;let n;if(t)try{n=JSON.parse(t)}catch(e){throw yt(rt)}return{canonicalAuthority:e.authority?Er(e.authority):void 0,knownAuthorities:e.knownAuthorities,cloudDiscoveryMetadata:n}}(this.config.auth)),this.tokenCache=new Xo(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);const t={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||I.QUERY,authenticationScheme:O.BEARER,state:e.state||"",nonce:e.nonce||""},n=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions);return ts(this.config,n,t,this.logger)}async acquireTokenByCode(e,t){this.logger.info("acquireTokenByCode called"),e.state&&t&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,t.state||""),t={...t,state:""});const n={...e,...await this.initializeBaseRequest(e),authenticationScheme:O.BEARER},r=this.initializeServerTelemetryManager(871,n.correlationId);try{const i=await this.createAuthority(n.authority,n.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,n.correlationId,n.redirectUri,r),s=new Li(o);return this.logger.verbose("Auth code client created",n.correlationId),await s.acquireToken(n,t)}catch(e){throw e instanceof j&&e.setCorrelationId(n.correlationId),r.cacheFailedRequest(e),e}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);const t={...e,...await this.initializeBaseRequest(e),authenticationScheme:O.BEARER},n=this.initializeServerTelemetryManager(872,t.correlationId);try{const r=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(r,t.correlationId,t.redirectUri||"",n),o=new Ui(i);return this.logger.verbose("Refresh token client created",t.correlationId),await o.acquireToken(t)}catch(e){throw e instanceof j&&e.setCorrelationId(t.correlationId),n.cacheFailedRequest(e),e}}async acquireTokenSilent(e){const t={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},n=this.initializeServerTelemetryManager(62,t.correlationId,t.forceRefresh);try{const r=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(r,t.correlationId,t.redirectUri||"",n),o=new qi(i);this.logger.verbose("Silent flow client created",t.correlationId);try{return await this.tokenCache.overwriteCache(),await this.acquireCachedTokenSilent(t,o,i)}catch(e){if(e instanceof Le&&e.errorCode===Se)return new Ui(i).acquireTokenByRefreshToken(t);throw e}}catch(e){throw e instanceof j&&e.setCorrelationId(t.correlationId),n.cacheFailedRequest(e),e}}async acquireCachedTokenSilent(e,t,n){const[r,i]=await t.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...l]});if(i===L){this.logger.info("ClientApplication:acquireCachedTokenSilent - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");const t=new Ui(n);try{await t.acquireTokenByRefreshToken(e)}catch{}}return r}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);const t={...e,...await this.initializeBaseRequest(e)},n=this.initializeServerTelemetryManager(371,t.correlationId);try{const r=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(r,t.correlationId,"",n),o=new es(i);return this.logger.verbose("Username password client created",t.correlationId),await o.acquireToken(t)}catch(e){throw e instanceof j&&e.setCorrelationId(t.correlationId),n.cacheFailedRequest(e),e}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,t){if(!e)throw Ro.createStateNotFoundError();if(e!==t)throw Ue(Z)}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,t,n,r){return this.logger.verbose("buildOauthClientConfiguration called",t),this.logger.info(`Building oauth client configuration with the following authority: ${e.tokenEndpoint}.`,t),r?.updateRegionDiscoveryMetadata(e.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:e,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:n},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:t},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:r,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(e)},libraryInfo:{sku:ln,version:Zo,cpu:process.arch||u.EMPTY_STRING,os:process.platform||u.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(e){return this.developerProvidedClientAssertion&&(this.clientAssertion=Qo.fromAssertion(await xi(this.developerProvidedClientAssertion,this.config.auth.clientId,e.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:dn}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===O.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=O.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!wt.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...l],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,t,n){const r={clientId:this.config.auth.clientId,correlationId:t,apiId:e,forceRefresh:n||!1};return new In(r,this.storage)}async createAuthority(e,t,n,r){this.logger.verbose("createAuthority called",t);const i=_r.generateAuthority(e,r||this.config.auth.azureCloudOptions),o={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:n,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return hi(i,this.config.system.networkClient,this.storage,o,this.logger,t)}clearCache(){this.storage.clear()}}class rs{async listenForAuthCode(e,t){if(this.server)throw Ro.createLoopbackServerAlreadyExistsError();return new Promise((n,r)=>{this.server=Hi.createServer((i,o)=>{const s=i.url;if(!s)return o.end(t||"Error occurred loading redirectUrl"),void r(Ro.createUnableToLoadRedirectUrlError());if(s===u.FORWARD_SLASH)return void o.end(e||"Auth code was successfully acquired. You can close this window now.");const a=this.getRedirectUri(),c=Et(new URL(s,a).search)||{};c.code&&(o.writeHead(302,{location:a}),o.end()),c.error&&o.end(t||`Error occurred: ${c.error}`),n(c)}),this.server.listen(0,"127.0.0.1")})}getRedirectUri(){if(!this.server||!this.server.listening)throw Ro.createNoLoopbackServerExistsError();const e=this.server.address();if(!e||"string"==typeof e||!e.port)throw this.closeServer(),Ro.createInvalidLoopbackAddressTypeError();return`http://localhost:${e&&e.port}`}closeServer(){this.server&&(this.server.close(),"function"==typeof this.server.closeAllConnections&&this.server.closeAllConnections(),this.server.unref(),this.server=void 0)}}class is extends mi{constructor(e){super(e)}async acquireToken(e){const t=await this.getDeviceCode(e);e.deviceCodeCallback(t);const n=dr(),r=await this.acquireTokenWithDeviceCode(e,t),i=new Di(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(r),i.handleServerTokenResponse(r,this.authority,n,e)}async getDeviceCode(e){const t=this.createExtraQueryParameters(e),n=bt.appendQueryString(this.authority.deviceCodeEndpoint,t),r=this.createQueryString(e),i=this.createTokenRequestHeaders(),o={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return this.executePostRequestToDeviceCodeEndpoint(n,r,i,o,e.correlationId)}createExtraQueryParameters(e){const t=new Map;return e.extraQueryParameters&&si(t,e.extraQueryParameters),Tt(t)}async executePostRequestToDeviceCodeEndpoint(e,t,n,r,i){const{body:{user_code:o,device_code:s,verification_uri:a,expires_in:c,interval:u,message:l}}=await this.sendPostRequest(r,e,{body:t,headers:n},i);return{userCode:o,deviceCode:s,verificationUri:a,expiresIn:c,interval:u,message:l}}createQueryString(e){const t=new Map;return jr(t,e.scopes),$r(t,this.config.authOptions.clientId),e.extraQueryParameters&&si(t,e.extraQueryParameters),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Xr(t,e.claims,this.config.authOptions.clientCapabilities),Tt(t)}continuePolling(e,t,n){if(n)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),Ue(de);if(t&&t<e&&dr()>t)throw this.logger.error(`User defined timeout for device code polling reached. The timeout was set for ${t}`),Ue(Ce);if(dr()>e)throw t&&this.logger.verbose(`User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for ${t}`),this.logger.error(`Device code expired. Expiration time of device code was ${e}`),Ue(he);return!0}async acquireTokenWithDeviceCode(e,t){const n=this.createTokenQueryParameters(e),r=bt.appendQueryString(this.authority.tokenEndpoint,n),i=this.createTokenRequestBody(e,t),o=this.createTokenRequestHeaders(),s=e.timeout?dr()+e.timeout:void 0,a=dr()+t.expiresIn,c=1e3*t.interval;for(;this.continuePolling(a,s,e.cancel);){const t={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},n=await this.executePostToTokenEndpoint(r,i,o,t,e.correlationId);if(!n.body||!n.body.error)return this.logger.verbose("Authorization completed successfully. Polling stopped."),n.body;if(n.body.error!==u.AUTHORIZATION_PENDING)throw this.logger.info("Unexpected error in polling from the server"),$(F,n.body.error);this.logger.info("Authorization pending. Continue polling."),await pr(c)}throw this.logger.error("Polling stopped for unknown reasons."),Ue(fe)}createTokenRequestBody(e,t){const n=new Map;return jr(n,e.scopes),$r(n,this.config.authOptions.clientId),ri(n,"device_code"),function(e,t){e.set("device_code",t)}(n,t.deviceCode),Yr(n,e.correlationId||this.config.cryptoInterface.createNewGuid()),ii(n),Qr(n,this.config.libraryInfo),Jr(n,this.config.telemetry.application),li(n),this.serverTelemetryManager&&ui(n,this.serverTelemetryManager),(!wt.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Xr(n,e.claims,this.config.authOptions.clientCapabilities),Tt(n)}}class os extends ns{constructor(e){super(e),this.config.broker.nativeBrokerPlugin&&(this.config.broker.nativeBrokerPlugin.isBrokerAvailable?(this.nativeBrokerPlugin=this.config.broker.nativeBrokerPlugin,this.nativeBrokerPlugin.setLogger(this.config.system.loggerOptions)):this.logger.warning("NativeBroker implementation was provided but the broker is unavailable.")),this.skus=In.makeExtraSkuString({libraryName:ln,libraryVersion:Zo})}async acquireTokenByDeviceCode(e){this.logger.info("acquireTokenByDeviceCode called",e.correlationId);const t=Object.assign(e,await this.initializeBaseRequest(e)),n=this.initializeServerTelemetryManager(671,t.correlationId);try{const r=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(r,t.correlationId,"",n),o=new is(i);return this.logger.verbose("Device code client created",t.correlationId),await o.acquireToken(t)}catch(e){throw e instanceof j&&e.setCorrelationId(t.correlationId),n.cacheFailedRequest(e),e}}async acquireTokenInteractive(e){const t=e.correlationId||this.cryptoProvider.createNewGuid();this.logger.trace("acquireTokenInteractive called",t);const{openBrowser:n,successTemplate:r,errorTemplate:i,windowHandle:o,loopbackClient:s,...a}=e;if(this.nativeBrokerPlugin){const n={...a,clientId:this.config.auth.clientId,scopes:e.scopes||l,redirectUri:e.redirectUri||"",authority:e.authority||this.config.auth.authority,correlationId:t,extraParameters:{...a.extraQueryParameters,...a.tokenQueryParameters,[Tn]:this.skus},accountId:a.account?.nativeAccountId};return this.nativeBrokerPlugin.acquireTokenInteractive(n,o)}if(e.redirectUri){if(!this.config.broker.nativeBrokerPlugin)throw Ro.createRedirectUriNotSupportedError();e.redirectUri=""}const{verifier:c,challenge:d}=await this.cryptoProvider.generatePkceCodes(),h=s||new rs;let f={},p=null;try{const o=h.listenForAuthCode(r,i).then(e=>{f=e}).catch(e=>{p=e}),s=await this.waitForRedirectUri(h),g={...a,correlationId:t,scopes:e.scopes||l,redirectUri:s,responseMode:I.QUERY,codeChallenge:d,codeChallengeMethod:"S256"},m=await this.getAuthCodeUrl(g);if(await n(m),await o,p)throw p;if(f.error)throw new Rn(f.error,f.error_description,f.suberror);if(!f.code)throw Ro.createNoAuthCodeInResponseError();const v=f.client_info,y={code:f.code,codeVerifier:c,clientInfo:v||u.EMPTY_STRING,...g};return await this.acquireTokenByCode(y)}finally{h.closeServer()}}async acquireTokenSilent(e){const t=e.correlationId||this.cryptoProvider.createNewGuid();if(this.logger.trace("acquireTokenSilent called",t),this.nativeBrokerPlugin){const n={...e,clientId:this.config.auth.clientId,scopes:e.scopes||l,redirectUri:e.redirectUri||"",authority:e.authority||this.config.auth.authority,correlationId:t,extraParameters:{...e.tokenQueryParameters,[Tn]:this.skus},accountId:e.account.nativeAccountId,forceRefresh:e.forceRefresh||!1};return this.nativeBrokerPlugin.acquireTokenSilent(n)}if(e.redirectUri){if(!this.config.broker.nativeBrokerPlugin)throw Ro.createRedirectUriNotSupportedError();e.redirectUri=""}return super.acquireTokenSilent(e)}async signOut(e){if(this.nativeBrokerPlugin&&e.account.nativeAccountId){const t={clientId:this.config.auth.clientId,accountId:e.account.nativeAccountId,correlationId:e.correlationId||this.cryptoProvider.createNewGuid()};await this.nativeBrokerPlugin.signOut(t)}await this.getTokenCache().removeAccount(e.account,e.correlationId)}async getAllAccounts(){if(this.nativeBrokerPlugin){const e=this.cryptoProvider.createNewGuid();return this.nativeBrokerPlugin.getAllAccounts(this.config.auth.clientId,e)}return this.getTokenCache().getAllAccounts()}async waitForRedirectUri(e){return new Promise((t,n)=>{let r=0;const i=setInterval(()=>{if(50<r)return clearInterval(i),void n(Ro.createLoopbackServerTimeoutError());try{const n=e.getRedirectUri();return clearInterval(i),void t(n)}catch(e){return e instanceof j&&e.errorCode===yo?void r++:(clearInterval(i),void n(e))}},100)})}}class ss extends mi{constructor(e,t){super(e),this.appTokenProvider=t}async acquireToken(e){if(e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority);const[t,n]=await this.getCachedAuthenticationResult(e,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);if(t){if(n===L){this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");const t=!0;await this.executeTokenRequest(e,this.authority,t)}return t}return this.executeTokenRequest(e,this.authority)}async getCachedAuthenticationResult(e,t,n,r,i,o){const s=t,a=t;let c,u=N;s.serializableCache&&s.persistencePlugin&&(c=new Ni(s.serializableCache,!1),await s.persistencePlugin.beforeCacheAccess(c));const l=this.readAccessTokenFromCache(r,a.managedIdentityId?.id||s.authOptions.clientId,new It(e.scopes||[]),i,e.correlationId);return s.serializableCache&&s.persistencePlugin&&c&&await s.persistencePlugin.afterCacheAccess(c),l?fr(l.expiresOn,s.systemOptions?.tokenRenewalOffsetSeconds||300)?(o?.setCacheOutcome(x),[null,x]):(l.refreshOn&&fr(l.refreshOn.toString(),0)&&(u=L,o?.setCacheOutcome(L)),[await Di.generateAuthenticationResult(n,r,{account:null,idToken:null,accessToken:l,refreshToken:null,appMetadata:null},!0,e),u]):(o?.setCacheOutcome(D),[null,D])}readAccessTokenFromCache(e,t,n,r,i){const o={homeAccountId:u.EMPTY_STRING,environment:e.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:S.ACCESS_TOKEN,clientId:t,realm:e.tenant,target:It.createSearchScopes(n.asArray())},s=r.getAccessTokensByFilter(o,i);if(s.length<1)return null;if(s.length>1)throw Ue(ie);return s[0]}async executeTokenRequest(e,t,n){let r,i;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");const t={correlationId:e.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:e.scopes,claims:e.claims};i=dr();const n=await this.appTokenProvider(t);r={access_token:n.accessToken,expires_in:n.expiresInSeconds,refresh_in:n.refreshInSeconds,token_type:O.BEARER}}else{const n=this.createTokenQueryParameters(e),o=bt.appendQueryString(t.tokenEndpoint,n),s=await this.createTokenRequestBody(e),a=this.createTokenRequestHeaders(),c={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};this.logger.info("Sending token request to endpoint: "+t.tokenEndpoint),i=dr();const u=await this.executePostToTokenEndpoint(o,s,a,c,e.correlationId);r=u.body,r.status=u.status}const o=new Di(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(r,n),await o.handleServerTokenResponse(r,this.authority,i,e)}async createTokenRequestBody(e){const t=new Map;$r(t,this.config.authOptions.clientId),jr(t,e.scopes,!1),ri(t,"client_credentials"),Qr(t,this.config.libraryInfo),Jr(t,this.config.telemetry.application),li(t),this.serverTelemetryManager&&ui(t,this.serverTelemetryManager),Yr(t,e.correlationId||this.config.cryptoInterface.createNewGuid()),this.config.clientCredentials.clientSecret&&ei(t,this.config.clientCredentials.clientSecret);const n=e.clientAssertion||this.config.clientCredentials.clientAssertion;return n&&(ti(t,await xi(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),ni(t,n.assertionType)),(!wt.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Xr(t,e.claims,this.config.authOptions.clientCapabilities),Tt(t)}}class as extends mi{constructor(e){super(e)}async acquireToken(e){if(this.scopeSet=new It(e.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString(e.oboAssertion),e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult(e)}catch(t){return await this.executeTokenRequest(e,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult(e){const t=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,e);if(!t)throw this.serverTelemetryManager?.setCacheOutcome(D),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),Ue(Se);if(fr(t.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome(x),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),Ue(Se);const n=this.readIdTokenFromCacheForOBO(t.homeAccountId,e.correlationId);let r,i=null;if(n){r=At(n.secret,qo.base64Decode);const t=r.oid||r.sub,o={homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:u.EMPTY_STRING,localAccountId:t||u.EMPTY_STRING};i=this.cacheManager.getAccount(this.cacheManager.generateAccountKey(o),e.correlationId)}return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),Di.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:i,accessToken:t,idToken:n,refreshToken:null,appMetadata:null},!0,e,r)}readIdTokenFromCacheForOBO(e,t){const n={homeAccountId:e,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:S.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},r=this.cacheManager.getIdTokensByFilter(n,t);return Object.values(r).length<1?null:Object.values(r)[0]}readAccessTokenFromCacheForOBO(e,t){const n=t.authenticationScheme||O.BEARER,r={credentialType:n&&n.toLowerCase()!==O.BEARER.toLowerCase()?S.ACCESS_TOKEN_WITH_AUTH_SCHEME:S.ACCESS_TOKEN,clientId:e,target:It.createSearchScopes(this.scopeSet.asArray()),tokenType:n,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash,userAssertionHash:this.userAssertionHash},i=this.cacheManager.getAccessTokensByFilter(r,t.correlationId),o=i.length;if(o<1)return null;if(o>1)throw Ue(ie);return i[0]}async executeTokenRequest(e,t,n){const r=this.createTokenQueryParameters(e),i=bt.appendQueryString(t.tokenEndpoint,r),o=await this.createTokenRequestBody(e),s=this.createTokenRequestHeaders(),a={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},c=dr(),u=await this.executePostToTokenEndpoint(i,o,s,a,e.correlationId),l=new Di(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return l.validateTokenResponse(u.body),await l.handleServerTokenResponse(u.body,this.authority,c,e,void 0,n)}async createTokenRequestBody(e){const t=new Map;$r(t,this.config.authOptions.clientId),jr(t,e.scopes),ri(t,"urn:ietf:params:oauth:grant-type:jwt-bearer"),ii(t),Qr(t,this.config.libraryInfo),Jr(t,this.config.telemetry.application),li(t),this.serverTelemetryManager&&ui(t,this.serverTelemetryManager),Yr(t,e.correlationId||this.config.cryptoInterface.createNewGuid()),function(e){e.set("requested_token_use","on_behalf_of")}(t),function(e,t){e.set("assertion",t)}(t,e.oboAssertion),this.config.clientCredentials.clientSecret&&ei(t,this.config.clientCredentials.clientSecret);const n=this.config.clientCredentials.clientAssertion;return n&&(ti(t,await xi(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),ni(t,n.assertionType)),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Xr(t,e.claims,this.config.authOptions.clientCapabilities),Tt(t)}}class cs extends ns{constructor(e){super(e);const t=!!this.config.auth.clientSecret,n=!!this.config.auth.clientAssertion,r=!(!this.config.auth.clientCertificate?.thumbprint&&!this.config.auth.clientCertificate?.thumbprintSha256||!this.config.auth.clientCertificate?.privateKey);if(!this.appTokenProvider){if(t&&n||n&&r||t&&r)throw Ue(Ae);if(this.config.auth.clientSecret)this.clientSecret=this.config.auth.clientSecret;else if(this.config.auth.clientAssertion)this.developerProvidedClientAssertion=this.config.auth.clientAssertion;else{if(!r)throw Ue(Ae);this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?Qo.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):Qo.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c),this.appTokenProvider=void 0}}}SetAppTokenProvider(e){this.appTokenProvider=e}async acquireTokenByClientCredential(e){let t;this.logger.info("acquireTokenByClientCredential called",e.correlationId),e.clientAssertion&&(t={assertion:await xi(e.clientAssertion,this.config.auth.clientId),assertionType:dn});const n=await this.initializeBaseRequest(e),r={...n,scopes:n.scopes.filter(e=>!l.includes(e))},i={...e,...r,clientAssertion:t},o=new bt(i.authority).getUrlComponents().PathSegments[0];if(Object.values(v).includes(o))throw Ue(Oe);const s=process.env.MSAL_FORCE_REGION;let a;"DisableMsalForceRegion"!==i.azureRegion&&(a=!i.azureRegion&&s?s:i.azureRegion);const c={azureRegion:a,environmentRegion:process.env.REGION_NAME},u=this.initializeServerTelemetryManager(771,i.correlationId,i.skipCache);try{const t=await this.createAuthority(i.authority,i.correlationId,c,e.azureCloudOptions),n=await this.buildOauthClientConfiguration(t,i.correlationId,"",u),r=new ss(n,this.appTokenProvider);return this.logger.verbose("Client credential client created",i.correlationId),await r.acquireToken(i)}catch(e){throw e instanceof j&&e.setCorrelationId(i.correlationId),u.cacheFailedRequest(e),e}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);const t={...e,...await this.initializeBaseRequest(e)};try{const n=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions),r=await this.buildOauthClientConfiguration(n,t.correlationId,"",void 0),i=new as(r);return this.logger.verbose("On behalf of client created",t.correlationId),await i.acquireToken(t)}catch(e){throw e instanceof j&&e.setCorrelationId(t.correlationId),e}}}class us{constructor(e,t,n){this.httpClientNoRetries=e,this.retryPolicy=t,this.logger=n}async sendNetworkRequestAsyncHelper(e,t,n){return e===rn?this.httpClientNoRetries.sendGetRequestAsync(t,n):this.httpClientNoRetries.sendPostRequestAsync(t,n)}async sendNetworkRequestAsync(e,t,n){let r=await this.sendNetworkRequestAsyncHelper(e,t,n);"isNewRequest"in this.retryPolicy&&(this.retryPolicy.isNewRequest=!0);let i=0;for(;await this.retryPolicy.pauseForRetry(r.status,i,this.logger,r.headers[f]);)r=await this.sendNetworkRequestAsyncHelper(e,t,n),i++;return r}async sendGetRequestAsync(e,t){return this.sendNetworkRequestAsync(rn,e,t)}async sendPostRequestAsync(e,t){return this.sendNetworkRequestAsync(on,e,t)}}const ls="clientid";class ds{constructor(e,t,n,r,i){this.logger=e,this.nodeStorage=t,this.networkClient=n,this.cryptoProvider=r,this.disableInternalRetries=i}async getServerTokenResponseAsync(e,t,n,r){return this.getServerTokenResponse(e)}getServerTokenResponse(e){let t,n;return e.body.expires_on&&(function(e){if("string"!=typeof e)return!1;const t=new Date(e);return!isNaN(t.getTime())&&t.toISOString()===e}(e.body.expires_on)&&(e.body.expires_on=new Date(e.body.expires_on).getTime()/1e3),n=e.body.expires_on-dr(),n>7200&&(t=n/2)),{status:e.status,access_token:e.body.access_token,expires_in:n,scope:e.body.resource,token_type:e.body.token_type,refresh_in:t,correlation_id:e.body.correlation_id||e.body.correlationId,error:"string"==typeof e.body.error?e.body.error:e.body.error?.code,error_description:e.body.message||("string"==typeof e.body.error?e.body.error_description:e.body.error?.message),error_codes:e.body.error_codes,timestamp:e.body.timestamp,trace_id:e.body.trace_id}}async acquireTokenWithManagedIdentity(e,t,n,r){const i=this.createRequest(e.resource,t);if(e.revokedTokenSha256Hash&&(this.logger.info(`[Managed Identity] The following claims are present in the request: ${e.claims}`),i.queryParameters.token_sha256_to_refresh=e.revokedTokenSha256Hash),e.clientCapabilities?.length){const t=e.clientCapabilities.toString();this.logger.info(`[Managed Identity] The following client capabilities are present in the request: ${t}`),i.queryParameters.xms_cc=t}const o=i.headers;o[h]=u.URL_FORM_CONTENT_TYPE;const s={headers:o};Object.keys(i.bodyParameters).length&&(s.body=i.computeParametersBodyString());const a=this.disableInternalRetries?this.networkClient:new us(this.networkClient,i.retryPolicy,this.logger),c=dr();let l;try{l=i.httpMethod===on?await a.sendPostRequestAsync(i.computeUri(),s):await a.sendGetRequestAsync(i.computeUri(),s)}catch(e){throw e instanceof j?e:Ue(X)}const d=new Di(t.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),f=await this.getServerTokenResponseAsync(l,a,i,s);return d.validateTokenResponse(f,r),d.handleServerTokenResponse(f,n,c,e)}getManagedIdentityUserAssignedIdQueryParameterKey(e,t,n){switch(e){case en:return this.logger.info(`[Managed Identity] [API version ${n?"2017+":"2019+"}] Adding user assigned client id to the request.`),n?ls:"client_id";case tn:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),t?"msi_res_id":"mi_res_id";case nn:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),"object_id";default:throw uo(Wi)}}}ds.getValidatedEnvVariableUrlString=(e,t,n,r)=>{try{return new bt(t).urlString}catch(t){throw r.info(`[Managed Identity] ${n} managed identity is unavailable because the '${e}' environment variable is malformed.`),uo(so[e])}};class hs{calculateDelay(e,t){if(!e)return t;let n=Math.round(1e3*parseFloat(e));return isNaN(n)&&(n=new Date(e).valueOf()-(new Date).valueOf()),Math.max(t,n)}}const fs=[404,408,429,500,503,504];class ps{constructor(){this.linearRetryStrategy=new hs}static get DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS(){return 1e3}async pauseForRetry(e,t,n,r){if(fs.includes(e)&&t<3){const e=this.linearRetryStrategy.calculateDelay(r,ps.DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS);return n.verbose(`Retrying request in ${e}ms (retry attempt: ${t+1})`),await new Promise(t=>setTimeout(t,e)),!0}return!1}}class gs{constructor(e,t,n){this.httpMethod=e,this._baseEndpoint=t,this.headers={},this.bodyParameters={},this.queryParameters={},this.retryPolicy=n||new ps}computeUri(){const e=new Map;this.queryParameters&&si(e,this.queryParameters);const t=Tt(e);return bt.appendQueryString(this._baseEndpoint,t)}computeParametersBodyString(){const e=new Map;return this.bodyParameters&&si(e,this.bodyParameters),Tt(e)}}class ms extends ds{constructor(e,t,n,r,i,o,s){super(e,t,n,r,i),this.identityEndpoint=o,this.identityHeader=s}static getEnvironmentVariables(){return[process.env[Kt],process.env[Gt]]}static tryCreate(e,t,n,r,i){const[o,s]=ms.getEnvironmentVariables();if(!o||!s)return e.info(`[Managed Identity] ${Jt.APP_SERVICE} managed identity is unavailable because one or both of the '${Gt}' and '${Kt}' environment variables are not defined.`),null;const a=ms.getValidatedEnvVariableUrlString(Kt,o,Jt.APP_SERVICE,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Jt.APP_SERVICE} managed identity. Endpoint URI: ${a}. Creating ${Jt.APP_SERVICE} managed identity.`),new ms(e,t,n,r,i,o,s)}createRequest(e,t){const n=new gs(rn,this.identityEndpoint);return n.headers["X-IDENTITY-HEADER"]=this.identityHeader,n.queryParameters[$t]="2019-08-01",n.queryParameters[zt]=e,t.idType!==Zt&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType)]=t.id),n}}var vs=n(9896),ys=n(6928);const ws="http://127.0.0.1:40342/metadata/identity/oauth2/token",Is="N/A: himds executable exists",As={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},Ss={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"};class Cs extends ds{constructor(e,t,n,r,i,o){super(e,t,n,r,i),this.identityEndpoint=o}static getEnvironmentVariables(){let e=process.env[Kt],t=process.env[Xt];if(!e||!t){const n=Ss[process.platform];try{(0,vs.accessSync)(n,vs.constants.F_OK|vs.constants.R_OK),e=ws,t=Is}catch(e){}}return[e,t]}static tryCreate(e,t,n,r,i,o){const[s,a]=Cs.getEnvironmentVariables();if(!s||!a)return e.info(`[Managed Identity] ${Jt.AZURE_ARC} managed identity is unavailable through environment variables because one or both of '${Kt}' and '${Xt}' are not defined. ${Jt.AZURE_ARC} managed identity is also unavailable through file detection.`),null;if(a===Is)e.info(`[Managed Identity] ${Jt.AZURE_ARC} managed identity is available through file detection. Defaulting to known ${Jt.AZURE_ARC} endpoint: ${ws}. Creating ${Jt.AZURE_ARC} managed identity.`);else{const t=Cs.getValidatedEnvVariableUrlString(Kt,s,Jt.AZURE_ARC,e);t.endsWith("/")&&t.slice(0,-1),Cs.getValidatedEnvVariableUrlString(Xt,a,Jt.AZURE_ARC,e),e.info(`[Managed Identity] Environment variables validation passed for ${Jt.AZURE_ARC} managed identity. Endpoint URI: ${t}. Creating ${Jt.AZURE_ARC} managed identity.`)}if(o.idType!==Zt)throw uo(Zi);return new Cs(e,t,n,r,i,s)}createRequest(e){const t=new gs(rn,this.identityEndpoint.replace("localhost","127.0.0.1"));return t.headers[Bt]="true",t.queryParameters[$t]="2019-11-01",t.queryParameters[zt]=e,t}async getServerTokenResponseAsync(e,t,n,r){let i;if(401===e.status){const o=e.headers["www-authenticate"];if(!o)throw uo(io);if(!o.includes("Basic realm="))throw uo(oo);const s=o.split("Basic realm=")[1];if(!As.hasOwnProperty(process.platform))throw uo(Ji);const a=As[process.platform],c=ys.basename(s);if(!c.endsWith(".key"))throw uo(Ki);if(a+c!==s)throw uo(Gi);let u,l;try{u=await(0,vs.statSync)(s).size}catch(e){throw uo(no)}if(u>4096)throw uo(Xi);try{l=(0,vs.readFileSync)(s,"utf-8")}catch(e){throw uo(no)}const d=`Basic ${l}`;this.logger.info("[Managed Identity] Adding authorization header to the request."),n.headers.Authorization=d;try{i=await t.sendGetRequestAsync(n.computeUri(),r)}catch(e){throw e instanceof j?e:Ue(X)}}return this.getServerTokenResponse(i||e)}}class _s extends ds{constructor(e,t,n,r,i,o){super(e,t,n,r,i),this.msiEndpoint=o}static getEnvironmentVariables(){return[process.env[Yt]]}static tryCreate(e,t,n,r,i,o){const[s]=_s.getEnvironmentVariables();if(!s)return e.info(`[Managed Identity] ${Jt.CLOUD_SHELL} managed identity is unavailable because the '${Yt} environment variable is not defined.`),null;const a=_s.getValidatedEnvVariableUrlString(Yt,s,Jt.CLOUD_SHELL,e);if(e.info(`[Managed Identity] Environment variable validation passed for ${Jt.CLOUD_SHELL} managed identity. Endpoint URI: ${a}. Creating ${Jt.CLOUD_SHELL} managed identity.`),o.idType!==Zt)throw uo(eo);return new _s(e,t,n,r,i,s)}createRequest(e){const t=new gs(on,this.msiEndpoint);return t.headers[Bt]="true",t.bodyParameters[zt]=e,t}}class Es{constructor(e,t,n){this.minExponentialBackoff=e,this.maxExponentialBackoff=t,this.exponentialDeltaBackoff=n}calculateDelay(e){return 0===e?this.minExponentialBackoff:Math.min(Math.pow(2,e-1)*this.exponentialDeltaBackoff,this.maxExponentialBackoff)}}const Ts=[404,408,410,429];class bs{constructor(){this.exponentialRetryStrategy=new Es(bs.MIN_EXPONENTIAL_BACKOFF_MS,bs.MAX_EXPONENTIAL_BACKOFF_MS,bs.EXPONENTIAL_DELTA_BACKOFF_MS)}static get MIN_EXPONENTIAL_BACKOFF_MS(){return 1e3}static get MAX_EXPONENTIAL_BACKOFF_MS(){return 4e3}static get EXPONENTIAL_DELTA_BACKOFF_MS(){return 2e3}static get HTTP_STATUS_GONE_RETRY_AFTER_MS(){return 1e4}set isNewRequest(e){this._isNewRequest=e}async pauseForRetry(e,t,n){if(this._isNewRequest&&(this._isNewRequest=!1,this.maxRetries=410===e?7:3),(Ts.includes(e)||e>=500&&e<=599&&t<this.maxRetries)&&t<this.maxRetries){const r=410===e?bs.HTTP_STATUS_GONE_RETRY_AFTER_MS:this.exponentialRetryStrategy.calculateDelay(t);return n.verbose(`Retrying request in ${r}ms (retry attempt: ${t+1})`),await new Promise(e=>setTimeout(e,r)),!0}return!1}}const ks="/metadata/identity/oauth2/token",Ps=`http://169.254.169.254${ks}`;class Rs extends ds{constructor(e,t,n,r,i,o){super(e,t,n,r,i),this.identityEndpoint=o}static tryCreate(e,t,n,r,i){let o;return process.env[Vt]?(e.info(`[Managed Identity] Environment variable ${Vt} for ${Jt.IMDS} returned endpoint: ${process.env[Vt]}`),o=Rs.getValidatedEnvVariableUrlString(Vt,`${process.env[Vt]}${ks}`,Jt.IMDS,e)):(e.info(`[Managed Identity] Unable to find ${Vt} environment variable for ${Jt.IMDS}, using the default endpoint.`),o=Ps),new Rs(e,t,n,r,i,o)}createRequest(e,t){const n=new gs(rn,this.identityEndpoint);return n.headers[Bt]="true",n.queryParameters[$t]="2018-02-01",n.queryParameters[zt]=e,t.idType!==Zt&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType,!0)]=t.id),n.retryPolicy=new bs,n}}class Os extends ds{constructor(e,t,n,r,i,o,s){super(e,t,n,r,i),this.identityEndpoint=o,this.identityHeader=s}static getEnvironmentVariables(){return[process.env[Kt],process.env[Gt],process.env[Wt]]}static tryCreate(e,t,n,r,i,o){const[s,a,c]=Os.getEnvironmentVariables();if(!s||!a||!c)return e.info(`[Managed Identity] ${Jt.SERVICE_FABRIC} managed identity is unavailable because one or all of the '${Gt}', '${Kt}' or '${Wt}' environment variables are not defined.`),null;const u=Os.getValidatedEnvVariableUrlString(Kt,s,Jt.SERVICE_FABRIC,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Jt.SERVICE_FABRIC} managed identity. Endpoint URI: ${u}. Creating ${Jt.SERVICE_FABRIC} managed identity.`),o.idType!==Zt&&e.warning(`[Managed Identity] ${Jt.SERVICE_FABRIC} user assigned managed identity is configured in the cluster, not during runtime. See also: https://learn.microsoft.com/en-us/azure/service-fabric/configure-existing-cluster-enable-managed-identity-token-service.`),new Os(e,t,n,r,i,s,a)}createRequest(e,t){const n=new gs(rn,this.identityEndpoint);return n.headers[jt]=this.identityHeader,n.queryParameters[$t]="2019-07-01-preview",n.queryParameters[zt]=e,t.idType!==Zt&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType)]=t.id),n}}const Ms=`Only client id is supported for user-assigned managed identity in ${Jt.MACHINE_LEARNING}.`;class Ns extends ds{constructor(e,t,n,r,i,o,s){super(e,t,n,r,i),this.msiEndpoint=o,this.secret=s}static getEnvironmentVariables(){return[process.env[Yt],process.env[Qt]]}static tryCreate(e,t,n,r,i){const[o,s]=Ns.getEnvironmentVariables();if(!o||!s)return e.info(`[Managed Identity] ${Jt.MACHINE_LEARNING} managed identity is unavailable because one or both of the '${Yt}' and '${Qt}' environment variables are not defined.`),null;const a=Ns.getValidatedEnvVariableUrlString(Yt,o,Jt.MACHINE_LEARNING,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Jt.MACHINE_LEARNING} managed identity. Endpoint URI: ${a}. Creating ${Jt.MACHINE_LEARNING} managed identity.`),new Ns(e,t,n,r,i,o,s)}createRequest(e,t){const n=new gs(rn,this.msiEndpoint);if(n.headers[Bt]="true",n.headers[jt]=this.secret,n.queryParameters[$t]="2017-09-01",n.queryParameters[zt]=e,t.idType===Zt)n.queryParameters[ls]=process.env.DEFAULT_IDENTITY_CLIENT_ID;else{if(t.idType!==en)throw new Error(Ms);n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType,!1,!0)]=t.id}return n}}class Ds{constructor(e,t,n,r,i){this.logger=e,this.nodeStorage=t,this.networkClient=n,this.cryptoProvider=r,this.disableInternalRetries=i}async sendManagedIdentityTokenRequest(e,t,n,r){return Ds.identitySource||(Ds.identitySource=this.selectManagedIdentitySource(this.logger,this.nodeStorage,this.networkClient,this.cryptoProvider,this.disableInternalRetries,t)),Ds.identitySource.acquireTokenWithManagedIdentity(e,t,n,r)}allEnvironmentVariablesAreDefined(e){return Object.values(e).every(e=>void 0!==e)}getManagedIdentitySource(){return Ds.sourceName=this.allEnvironmentVariablesAreDefined(Os.getEnvironmentVariables())?Jt.SERVICE_FABRIC:this.allEnvironmentVariablesAreDefined(ms.getEnvironmentVariables())?Jt.APP_SERVICE:this.allEnvironmentVariablesAreDefined(Ns.getEnvironmentVariables())?Jt.MACHINE_LEARNING:this.allEnvironmentVariablesAreDefined(_s.getEnvironmentVariables())?Jt.CLOUD_SHELL:this.allEnvironmentVariablesAreDefined(Cs.getEnvironmentVariables())?Jt.AZURE_ARC:Jt.DEFAULT_TO_IMDS,Ds.sourceName}selectManagedIdentitySource(e,t,n,r,i,o){const s=Os.tryCreate(e,t,n,r,i,o)||ms.tryCreate(e,t,n,r,i)||Ns.tryCreate(e,t,n,r,i)||_s.tryCreate(e,t,n,r,i,o)||Cs.tryCreate(e,t,n,r,i,o)||Rs.tryCreate(e,t,n,r,i);if(!s)throw uo(to);return s}}const xs=[Jt.SERVICE_FABRIC];class Ls{constructor(e){this.config=function({clientCapabilities:e,managedIdentityIdParams:t,system:n}){const r=new lo(t),i=n?.loggerOptions||No;let o;return o=n?.networkClient?n.networkClient:new ji(n?.proxyUrl,n?.customAgentOptions),{clientCapabilities:e||[],managedIdentityId:r,system:{loggerOptions:i,networkClient:o},disableInternalRetries:n?.disableInternalRetries||!1}}(e||{}),this.logger=new Mn(this.config.system.loggerOptions,Jo,Zo);const t={canonicalAuthority:u.DEFAULT_AUTHORITY};Ls.nodeStorage||(Ls.nodeStorage=new $o(this.logger,this.config.managedIdentityId.id,Tr,t)),this.networkClient=this.config.system.networkClient,this.cryptoProvider=new jo;const n={protocolMode:ze.AAD,knownAuthorities:[Ht],cloudDiscoveryMetadata:"",authorityMetadata:""};this.fakeAuthority=new _r(Ht,this.networkClient,Ls.nodeStorage,n,this.logger,this.cryptoProvider.createNewGuid(),void 0,!0),this.fakeClientCredentialClient=new ss({authOptions:{clientId:this.config.managedIdentityId.id,authority:this.fakeAuthority}}),this.managedIdentityClient=new Ds(this.logger,Ls.nodeStorage,this.networkClient,this.cryptoProvider,this.config.disableInternalRetries),this.hashUtils=new Ho}async acquireToken(e){if(!e.resource)throw yt(Ye);const t={forceRefresh:e.forceRefresh,resource:e.resource.replace("/.default",""),scopes:[e.resource.replace("/.default","")],authority:this.fakeAuthority.canonicalAuthority,correlationId:this.cryptoProvider.createNewGuid(),claims:e.claims,clientCapabilities:this.config.clientCapabilities};if(t.forceRefresh)return this.acquireTokenFromManagedIdentity(t,this.config.managedIdentityId,this.fakeAuthority);const[n,r]=await this.fakeClientCredentialClient.getCachedAuthenticationResult(t,this.config,this.cryptoProvider,this.fakeAuthority,Ls.nodeStorage);if(t.claims){const e=this.managedIdentityClient.getManagedIdentitySource();if(n&&xs.includes(e)){const e=this.hashUtils.sha256(n.accessToken).toString("hex");t.revokedTokenSha256Hash=e}return this.acquireTokenFromManagedIdentity(t,this.config.managedIdentityId,this.fakeAuthority)}if(n){if(r===L){this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");const e=!0;await this.acquireTokenFromManagedIdentity(t,this.config.managedIdentityId,this.fakeAuthority,e)}return n}return this.acquireTokenFromManagedIdentity(t,this.config.managedIdentityId,this.fakeAuthority)}async acquireTokenFromManagedIdentity(e,t,n,r){return this.managedIdentityClient.sendManagedIdentityTokenRequest(e,t,n,r)}getManagedIdentitySource(){return Ds.sourceName||this.managedIdentityClient.getManagedIdentitySource()}}class Us{constructor(e,t){this.client=e,this.partitionManager=t}async beforeCacheAccess(e){const t=await this.partitionManager.getKey(),n=await this.client.get(t);e.tokenCache.deserialize(n)}async afterCacheAccess(e){if(e.cacheHasChanged){const t=e.tokenCache.getKVStore(),n=Object.values(t).filter(e=>Ve.isAccountEntity(e));let r;if(n.length>0){const e=n[0];r=await this.partitionManager.extractKey(e)}else r=await this.partitionManager.getKey();await this.client.set(r,e.tokenCache.serialize())}}}},8156:(e,t,n)=>{"use strict";n.d(t,{NS:()=>h,Q6:()=>d,Z4:()=>g,r2:()=>p});var r=n(8279),i=n(269),o=n(6182),s=n(6492),a="ctx",c="ParentContextKey",u="ChildrenContextKey",l=null,d=function(){function e(t,n,r){var s,l=this;l.start=(0,i.f0d)(),l[o.RS]=t,l[o.tI]=r,l[o.Zu]=function(){return!1},(0,i.Tnt)(n)&&(0,i.vF1)(l,"payload",{g:function(){return!s&&(0,i.Tnt)(n)&&(s=n(),n=null),s}}),l[o.O_]=function(t){return t?t===e[c]||t===e[u]?l[t]:(l[a]||{})[t]:null},l[o.e_]=function(t,n){t&&(t===e[c]?(l[t]||(l[o.Zu]=function(){return!0}),l[t]=n):t===e[u]?l[t]=n:(l[a]=l[a]||{})[t]=n)},l[o.Ru]=function(){var t=0,n=l[o.O_](e[u]);if((0,i.cyL)(n))for(var r=0;r<n[o.oI];r++){var s=n[r];s&&(t+=s[o.fA])}l[o.fA]=(0,i.f0d)()-l.start,l.exTime=l[o.fA]-t,l[o.Ru]=function(){}}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),h=function(){function e(t){this.ctx={},(0,r.A)(e,this,function(e){e.create=function(e,t,n){return new d(e,t,n)},e.fire=function(e){e&&(e[o.Ru](),t&&(0,i.Tnt)(t[s.l0])&&t[s.l0](e))},e[o.e_]=function(t,n){t&&((e[a]=e[a]||{})[t]=n)},e[o.O_]=function(t){return(e[a]||{})[t]}})}return e.__ieDyn=1,e}(),f="CoreUtils.doPerf";function p(e,t,n,r,i){if(e){var a=e;if(a[s.kI]&&(a=a[s.kI]()),a){var l=void 0,h=a[o.O_](f);try{if(l=a.create(t(),r,i)){if(h&&l[o.e_]&&(l[o.e_](d[c],h),h[o.O_]&&h[o.e_])){var p=h[o.O_](d[u]);p||(p=[],h[o.e_](d[u],p)),p[o.y5](l)}return a[o.e_](f,l),n(l)}}catch(e){l&&l[o.e_]&&l[o.e_]("exception",e)}finally{l&&a.fire(l),a[o.e_](f,h)}}}return n()}function g(){return l}},8197:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Environment:()=>r});var r=function(){function e(e){if(this.validateAuthority=!0,!e||"object"!=typeof e)throw new Error("'parameters' is a required parameter and must be of type 'object'.");["name","portalUrl","managementEndpointUrl","resourceManagerEndpointUrl","activeDirectoryEndpointUrl","activeDirectoryResourceId"].forEach(function(t){if(!e[t]||"string"!=typeof e[t].valueOf())throw new Error('Please provide "'+t+'" for the environment and it must be of type "string".')}),this.name=e.name,this.portalUrl=e.portalUrl,this.managementEndpointUrl=e.managementEndpointUrl,this.resourceManagerEndpointUrl=e.resourceManagerEndpointUrl,this.activeDirectoryEndpointUrl=e.activeDirectoryEndpointUrl,this.activeDirectoryResourceId=e.activeDirectoryResourceId,this.activeDirectoryGraphApiVersion&&(this.activeDirectoryGraphApiVersion=e.activeDirectoryGraphApiVersion),this.activeDirectoryGraphResourceId&&(this.activeDirectoryGraphResourceId=e.activeDirectoryGraphResourceId),this.azureDataLakeAnalyticsCatalogAndJobEndpointSuffix&&(this.azureDataLakeAnalyticsCatalogAndJobEndpointSuffix=e.azureDataLakeAnalyticsCatalogAndJobEndpointSuffix),this.azureDataLakeStoreFileSystemEndpointSuffix&&(this.azureDataLakeStoreFileSystemEndpointSuffix=e.azureDataLakeStoreFileSystemEndpointSuffix),this.batchResourceId&&(this.batchResourceId=e.batchResourceId),this.galleryEndpointUrl&&(this.galleryEndpointUrl=e.galleryEndpointUrl),this.keyVaultDnsSuffix&&(this.keyVaultDnsSuffix=e.keyVaultDnsSuffix),this.publishingProfileUrl&&(this.publishingProfileUrl=e.publishingProfileUrl),this.sqlManagementEndpointUrl&&(this.sqlManagementEndpointUrl=e.sqlManagementEndpointUrl),this.sqlServerHostnameSuffix&&(this.sqlServerHostnameSuffix=e.sqlServerHostnameSuffix),this.storageEndpointSuffix&&(this.storageEndpointSuffix=e.storageEndpointSuffix)}return e.add=function(t){var n={},r=new e(t);n[t.name]=r,Object.assign(e,n)},e.get=function(t){if(!t)throw new TypeError("name cannot be null or undefined and must be of type string.");return e[t]},e.AzureCloud={name:"AzureCloud",portalUrl:"https://portal.azure.com",publishingProfileUrl:"https://go.microsoft.com/fwlink/?LinkId=254432",managementEndpointUrl:"https://management.core.windows.net",resourceManagerEndpointUrl:"https://management.azure.com/",sqlManagementEndpointUrl:"https://management.core.windows.net:8443/",sqlServerHostnameSuffix:".database.windows.net",galleryEndpointUrl:"https://gallery.azure.com/",activeDirectoryEndpointUrl:"https://login.microsoftonline.com/",activeDirectoryResourceId:"https://management.core.windows.net/",activeDirectoryGraphResourceId:"https://graph.windows.net/",batchResourceId:"https://batch.core.windows.net/",activeDirectoryGraphApiVersion:"2013-04-05",storageEndpointSuffix:"core.windows.net",keyVaultDnsSuffix:".vault.azure.net",azureDataLakeStoreFileSystemEndpointSuffix:"azuredatalakestore.net",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"azuredatalakeanalytics.net",validateAuthority:!0},e.ChinaCloud={name:"AzureChinaCloud",portalUrl:"https://portal.azure.cn",publishingProfileUrl:"https://go.microsoft.com/fwlink/?LinkID=301774",managementEndpointUrl:"https://management.core.chinacloudapi.cn",resourceManagerEndpointUrl:"https://management.chinacloudapi.cn",sqlManagementEndpointUrl:"https://management.core.chinacloudapi.cn:8443/",sqlServerHostnameSuffix:".database.chinacloudapi.cn",galleryEndpointUrl:"https://gallery.chinacloudapi.cn/",activeDirectoryEndpointUrl:"https://login.chinacloudapi.cn/",activeDirectoryResourceId:"https://management.core.chinacloudapi.cn/",activeDirectoryGraphResourceId:"https://graph.chinacloudapi.cn/",activeDirectoryGraphApiVersion:"2013-04-05",batchResourceId:"https://batch.chinacloudapi.cn/",storageEndpointSuffix:"core.chinacloudapi.cn",keyVaultDnsSuffix:".vault.azure.cn",azureDataLakeStoreFileSystemEndpointSuffix:"N/A",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"N/A",validateAuthority:!0},e.USGovernment={name:"AzureUSGovernment",portalUrl:"https://portal.azure.us",publishingProfileUrl:"https://manage.windowsazure.us/publishsettings/index",managementEndpointUrl:"https://management.core.usgovcloudapi.net",resourceManagerEndpointUrl:"https://management.usgovcloudapi.net",sqlManagementEndpointUrl:"https://management.core.usgovcloudapi.net:8443/",sqlServerHostnameSuffix:".database.usgovcloudapi.net",galleryEndpointUrl:"https://gallery.usgovcloudapi.net/",activeDirectoryEndpointUrl:"https://login.microsoftonline.us/",activeDirectoryResourceId:"https://management.core.usgovcloudapi.net/",activeDirectoryGraphResourceId:"https://graph.windows.net/",batchResourceId:"https://batch.core.usgovcloudapi.net/",activeDirectoryGraphApiVersion:"2013-04-05",storageEndpointSuffix:"core.usgovcloudapi.net",keyVaultDnsSuffix:".vault.usgovcloudapi.net",azureDataLakeStoreFileSystemEndpointSuffix:"N/A",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"N/A",validateAuthority:!0},e.GermanCloud={name:"AzureGermanCloud",portalUrl:"https://portal.microsoftazure.de/",publishingProfileUrl:"https://manage.microsoftazure.de/publishsettings/index",managementEndpointUrl:"https://management.core.cloudapi.de",resourceManagerEndpointUrl:"https://management.microsoftazure.de",sqlManagementEndpointUrl:"https://management.core.cloudapi.de:8443/",sqlServerHostnameSuffix:".database.cloudapi.de",galleryEndpointUrl:"https://gallery.cloudapi.de/",activeDirectoryEndpointUrl:"https://login.microsoftonline.de/",activeDirectoryResourceId:"https://management.core.cloudapi.de/",activeDirectoryGraphResourceId:"https://graph.cloudapi.de/",batchResourceId:"https://batch.microsoftazure.de/",activeDirectoryGraphApiVersion:"2013-04-05",storageEndpointSuffix:"core.cloudapi.de",keyVaultDnsSuffix:".vault.microsoftazure.de",azureDataLakeStoreFileSystemEndpointSuffix:"N/A",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"N/A",validateAuthority:!0},e}()},8205:(e,t,n)=>{"use strict";n.d(t,{Dv:()=>u,Qo:()=>N,Rf:()=>O,Xf:()=>D,lh:()=>M});var r,i,o,s=n(269),a="Promise",c="rejected";function u(e,t){return l(e,function(e){return t?t({status:"fulfilled",rejected:!1,value:e}):e},function(e){return t?t({status:c,rejected:!0,reason:e}):e})}function l(e,t,n,r){var i=e;try{if((0,s.$XS)(e))(t||n)&&(i=e.then(t,n));else try{t&&(i=t(e))}catch(e){if(!n)throw e;i=n(e)}}finally{r&&function(e,t){var n=e;t&&((0,s.$XS)(e)?n=e.finally?e.finally(t):e.then(function(e){return t(),e},function(e){throw t(),e}):t())}(i,r)}return i}var d,h=!1,f=["pending","resolving","resolved",c],p="dispatchEvent";function g(e){var t;return e&&e.createEvent&&(t=e.createEvent("Event")),!!t&&t.initEvent}var m,v,y,w,I="unhandledRejection",A=I.toLowerCase(),S=[],C=0,_=10;function E(e){return(0,s.Tnt)(e)?e.toString():(0,s.mmD)(e)}function T(e,t,n){var c,u,l=(0,s.KVm)(arguments,3),v=0,y=!1,w=[],T=C++,b=S.length>0?S[S.length-1]:void 0,k=!1,P=null;function R(t,n){try{return S.push(T),k=!0,P&&P.cancel(),P=null,e(function(e,r){w.push(function(){try{var i=2===v?t:n,o=(0,s.b07)(i)?c:(0,s.Tnt)(i)?i(c):i;(0,s.$XS)(o)?o.then(e,r):i?e(o):3===v?r(o):e(o)}catch(e){r(e)}}),y&&M()},l)}finally{S.pop()}}function O(){return f[v]}function M(){if(w.length>0){var e=w.slice();w=[],k=!0,P&&P.cancel(),P=null,t(e)}}function N(e,t){return function(n){if(v===t){if(2===e&&(0,s.$XS)(n))return v=1,void n.then(N(2,1),N(3,1));v=e,y=!0,c=n,M(),k||3!==e||P||(P=(0,s.dRz)(D,_))}}}function D(){if(!k)if(k=!0,(0,s.Lln)())process.emit(I,c,u);else{var e=(0,s.zkX)()||(0,s.mS$)();!m&&(m=(0,s.GuU)((0,s.gBW)(s.zS2,[a+"RejectionEvent"]).v)),function(e,t,n,r){var i=(0,s.YEm)();!d&&(d=(0,s.GuU)(!!(0,s.gBW)(g,[i]).v));var o=d.v?i.createEvent("Event"):r?new Event(t):{};if(n&&n(o),d.v&&o.initEvent(t,!1,!0),o&&e[p])e[p](o);else{var a=e["on"+t];if(a)a(o);else{var c=(0,s.zS2)("console");c&&(c.error||c.log)(t,(0,s.mmD)(o))}}}(e,A,function(e){return(0,s.vF1)(e,"promise",{g:function(){return u}}),e.reason=c,e},!!m.v)}}return u={then:R,catch:function(e){return R(void 0,e)},finally:function(e){var t=e,n=e;return(0,s.Tnt)(e)&&(t=function(t){return e&&e(),t},n=function(t){throw e&&e(),t}),R(t,n)}},(0,s.UxO)(u,"state",{get:O}),h&&function(e,t){i=i||{toString:function(){return"[[PromiseResult]]"}},o=o||{toString:function(){return"[[PromiseIsHandled]]"}};var n={};n[r=r||{toString:function(){return"[[PromiseState]]"}}]={get:t},n[i]={get:function(){return(0,s.SZ2)(c)}},n[o]={get:function(){return k}},(0,s.isD)(e,n)}(u,O),(0,s.Lok)()&&(u[(0,s.Y0g)(11)]="IPromise"),u.toString=function(){return"IPromise"+(h?"["+T+((0,s.b07)(b)?"":":"+b)+"]":"")+" "+O()+(y?" - "+E(c):"")},function(){(0,s.Tnt)(n)||(0,s.zkd)(a+": executor is not a function - "+E(n));var e=N(3,0);try{n.call(u,N(2,0),e)}catch(t){e(t)}}(),u}function b(e){return function(t){var n=(0,s.KVm)(arguments,1);return e(function(e,n){try{var r=[],i=1;(0,s.DA8)(t,function(t,o){t&&(i++,l(t,function(t){r[o]=t,0===--i&&e(r)},n))}),0===--i&&e(r)}catch(e){n(e)}},n)}}function k(e){(0,s.Iuo)(e,function(e){try{e()}catch(e){}})}function P(e,t){return T(P,function(e){var t=(0,s.EtT)(e)?e:0;return function(e){(0,s.dRz)(function(){k(e)},t)}}(t),e,t)}function R(e,t){!v&&(v=(0,s.GuU)((0,s.gBW)(s.zS2,[a]).v||null));var n=v.v;if(!n)return P(e);(0,s.Tnt)(e)||(0,s.zkd)(a+": executor is not a function - "+(0,s.mmD)(e));var r=0,i=new n(function(t,n){e(function(e){r=2,t(e)},function(e){r=3,n(e)})});return(0,s.UxO)(i,"state",{get:function(){return f[r]}}),i}function O(e){return T(O,k,e)}function M(e,t){return!y&&(n=O,y=(0,s.GuU)(function(e){var t=(0,s.KVm)(arguments,1);return n(function(t,n){var r=[],i=1;function o(e,n){i++,u(e,function(e){e.rejected?r[n]={status:c,reason:e.reason}:r[n]={status:"fulfilled",value:e.value},0===--i&&t(r)})}try{(0,s.cyL)(e)?(0,s.Iuo)(e,o):(0,s.xZI)(e)?(0,s.DA8)(e,o):(0,s.zkd)("Input is not an iterable"),0===--i&&t(r)}catch(e){n(e)}},t)})),y.v(e,t);var n}function N(e,t){return!w&&(w=(0,s.GuU)(R)),w.v.call(this,e,t)}var D=b(N);(0,s.Y0g)(11)},8257:(e,t,n)=>{"use strict";n.d(t,{s:()=>m});var r,i=n(8279),o=n(269),s=n(9749),a=n(6182),c=n(3775),u=n(3673),l=n(6492),d=n(2317),h=n(836),f=n(8969),p="getPlugin",g=((r={})[l.Bw]={isVal:u.Gh,v:{}},r),m=function(){function e(){var t,n,r,m,v,y=this;function w(e){void 0===e&&(e=null);var t=e;if(!t){var i=n||(0,d.i8)(null,{},y[l.eT]);t=r&&r[p]?i[a.$o](null,r[p]):i[a.$o](null,r)}return t}function I(e,t,i){(0,s.e)(e,g,(0,c.y0)(t)),!i&&t&&(i=t[a.DI]()[a.uR]());var o=r;r&&r[p]&&(o=r[p]()),y[l.eT]=t,n=(0,d.i8)(i,e,t,o)}function A(){t=!1,y[l.eT]=null,n=null,r=null,v=(0,f.w)(),m=(0,h.P)()}A(),(0,i.A)(e,y,function(e){e[a.mE]=function(e,n,r,i){I(e,n,i),t=!0},e[a.Ik]=function(t,n){var i,o=e[l.eT];if(o&&(!t||o===t[l.eT]())){var s,c=!1,u=t||(0,d.tS)(null,o,r&&r[p]?r[p]():r),h=n||((i={reason:0})[a.tI]=!1,i);return e[a.tn]&&!0===e[a.tn](u,h,f)?s=!0:f(),s}function f(){c||(c=!0,m.run(u,n),v.run(u[a.e4]()),!0===s&&u[a.$5](h),A())}},e[a.HC]=function(t,n){var i=e[l.eT];if(i&&(!t||i===t[l.eT]())){var o,s=!1,c=t||(0,d.nU)(null,i,r&&r[p]?r[p]():r),u=n||{reason:0};return e._doUpdate&&!0===e._doUpdate(c,u,h)?o=!0:h(),o}function h(){s||(s=!0,I(c.getCfg(),c.core(),c[a.uR]()))}},(0,u.RF)(e,"_addUnloadCb",function(){return m},"add"),(0,u.RF)(e,"_addHook",function(){return v},"add"),(0,o.vF1)(e,"_unloadHooks",{g:function(){return v}})}),y[a.e4]=function(e){return w(e)[a.e4]()},y[a.tZ]=function(){return t},y.setInitialized=function(e){t=e},y[a.YH]=function(e){r=e},y[a.$5]=function(e,t){t?t[a.$5](e):r&&(0,o.Tnt)(r[l.qT])&&r[l.qT](e,null)},y._getTelCtx=w}return e.__ieDyn=1,e}()},8279:(e,t,n)=>{"use strict";n.d(t,{A:()=>L});var r,i=n(269),o="constructor",s="prototype",a="function",c="_dynInstFuncs",u="_isDynProxy",l="_dynClass",d="_dynCls$",h="_dynInstChk",f=h,p="_dfOpts",g="_unknown_",m="__proto__",v="_dyn"+m,y="__dynProto$Gbl",w="_dynInstProto",I="useBaseInst",A="setInstFuncs",S=Object,C=S.getPrototypeOf,_=S.getOwnPropertyNames,E=(0,i.mS$)(),T=E[y]||(E[y]={o:(r={},r[A]=!0,r[I]=!0,r),n:1e3});function b(e){return e&&(e===S[s]||e===Array[s])}function k(e){return b(e)||e===Function[s]}function P(e){var t;if(e){if(C)return C(e);var n=e[m]||e[s]||(e[o]?e[o][s]:null);t=e[v]||n,(0,i.v0u)(e,v)||(delete e[w],t=e[v]=e[w]||e[v],e[w]=n)}return t}function R(e,t){var n=[];if(_)n=_(e);else for(var r in e)"string"==typeof r&&(0,i.v0u)(e,r)&&n.push(r);if(n&&n.length>0)for(var o=0;o<n.length;o++)t(n[o])}function O(e,t,n){return t!==o&&typeof e[t]===a&&(n||(0,i.v0u)(e,t))&&t!==m&&t!==s}function M(e){(0,i.zkd)("DynamicProto: "+e)}function N(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}function D(e,t,n,r,o){if(!b(e)){var s=n[c]=n[c]||(0,i.sSX)(null);if(!b(s)){var d=s[t]=s[t]||(0,i.sSX)(null);!1!==s[f]&&(s[f]=!!o),b(d)||R(n,function(t){O(n,t,!1)&&n[t]!==r[t]&&(d[t]=n[t],delete n[t],(!(0,i.v0u)(e,t)||e[t]&&!e[t][u])&&(e[t]=function(e,t){var n=function(){var r=function(e,t,n,r){var o=null;if(e&&(0,i.v0u)(n,l)){var s=e[c]||(0,i.sSX)(null);if((o=(s[n[l]]||(0,i.sSX)(null))[t])||M("Missing ["+t+"] "+a),!o[h]&&!1!==s[f]){for(var u=!(0,i.v0u)(e,t),d=P(e),p=[];u&&d&&!k(d)&&!N(p,d);){var g=d[t];if(g){u=g===r;break}p.push(d),d=P(d)}try{u&&(e[t]=o),o[h]=1}catch(e){s[f]=!1}}}return o}(this,t,e,n)||function(e,t,n){var r=t[e];return r===n&&(r=P(t)[e]),typeof r!==a&&M("["+e+"] is not a "+a),r}(t,e,n);return r.apply(this,arguments)};return n[u]=1,n}(e,t)))})}}}function x(e,t){return(0,i.v0u)(e,s)?e.name||t||g:((e||{})[o]||{}).name||t||g}function L(e,t,n,r){(0,i.v0u)(e,s)||M("theClass is an invalid class definition.");var o=e[s];(function(e,t){if(C){for(var n=[],r=P(t);r&&!k(r)&&!N(n,r);){if(r===e)return!0;n.push(r),r=P(r)}return!1}return!0})(o,t)||M("["+x(e)+"] not in hierarchy of ["+x(t)+"]");var a=null;(0,i.v0u)(o,l)?a=o[l]:(a=d+x(e,"_")+"$"+T.n,T.n++,o[l]=a);var h=L[p],g=!!h[I];g&&r&&void 0!==r[I]&&(g=!!r[I]);var m=function(e){var t=(0,i.sSX)(null);return R(e,function(n){!t[n]&&O(e,n,!1)&&(t[n]=e[n])}),t}(t),v=function(e,t,n,r){function o(e,t,n){var i=t[n];if(i[u]&&r){var o=e[c]||{};!1!==o[f]&&(i=(o[t[l]]||{})[n]||i)}return function(){return i.apply(e,arguments)}}var s=(0,i.sSX)(null);R(n,function(e){s[e]=o(t,n,e)});for(var a=P(e),d=[];a&&!k(a)&&!N(d,a);)R(a,function(e){!s[e]&&O(a,e,!C)&&(s[e]=o(t,a,e))}),d.push(a),a=P(a);return s}(o,t,m,g);n(t,v);var y=!!C&&!!h[A];y&&r&&(y=!!r[A]),D(o,a,t,m,!1!==y)}L[p]=T.o},8311:(e,t,n)=>{class r{constructor(e,t){if(t=o(t),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter(e=>!m(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&v(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&p)|(this.options.loose&&g))+":"+e,n=i.get(t);if(n)return n;const r=this.options.loose,o=r?u[l.HYPHENRANGELOOSE]:u[l.HYPHENRANGE];e=e.replace(o,P(this.options.includePrerelease)),a("hyphen replace",e),e=e.replace(u[l.COMPARATORTRIM],d),a("comparator trim",e),e=e.replace(u[l.TILDETRIM],h),a("tilde trim",e),e=e.replace(u[l.CARETTRIM],f),a("caret trim",e);let c=e.split(" ").map(e=>w(e,this.options)).join(" ").split(/\s+/).map(e=>k(e,this.options));r&&(c=c.filter(e=>(a("loose invalid filter",e,this.options),!!e.match(u[l.COMPARATORLOOSE])))),a("range list",c);const v=new Map,y=c.map(e=>new s(e,this.options));for(const e of y){if(m(e))return[e];v.set(e.value,e)}v.size>1&&v.has("")&&v.delete("");const I=[...v.values()];return i.set(t,I),I}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some(n=>y(n,t)&&e.set.some(e=>y(e,t)&&n.every(n=>e.every(e=>n.intersects(e,t)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(R(this.set[t],e,this.options))return!0;return!1}}e.exports=r;const i=new(n(8794)),o=n(8587),s=n(3904),a=n(7272),c=n(3908),{safeRe:u,t:l,comparatorTrimReplace:d,tildeTrimReplace:h,caretTrimReplace:f}=n(9718),{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:g}=n(6874),m=e=>"<0.0.0-0"===e.value,v=e=>""===e.value,y=(e,t)=>{let n=!0;const r=e.slice();let i=r.pop();for(;n&&r.length;)n=r.every(e=>i.intersects(e,t)),i=r.pop();return n},w=(e,t)=>(a("comp",e,t),e=C(e,t),a("caret",e),e=A(e,t),a("tildes",e),e=E(e,t),a("xrange",e),e=b(e,t),a("stars",e),e),I=e=>!e||"x"===e.toLowerCase()||"*"===e,A=(e,t)=>e.trim().split(/\s+/).map(e=>S(e,t)).join(" "),S=(e,t)=>{const n=t.loose?u[l.TILDELOOSE]:u[l.TILDE];return e.replace(n,(t,n,r,i,o)=>{let s;return a("tilde",e,t,n,r,i,o),I(n)?s="":I(r)?s=`>=${n}.0.0 <${+n+1}.0.0-0`:I(i)?s=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:o?(a("replaceTilde pr",o),s=`>=${n}.${r}.${i}-${o} <${n}.${+r+1}.0-0`):s=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,a("tilde return",s),s})},C=(e,t)=>e.trim().split(/\s+/).map(e=>_(e,t)).join(" "),_=(e,t)=>{a("caret",e,t);const n=t.loose?u[l.CARETLOOSE]:u[l.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,(t,n,i,o,s)=>{let c;return a("caret",e,t,n,i,o,s),I(n)?c="":I(i)?c=`>=${n}.0.0${r} <${+n+1}.0.0-0`:I(o)?c="0"===n?`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.0${r} <${+n+1}.0.0-0`:s?(a("replaceCaret pr",s),c="0"===n?"0"===i?`>=${n}.${i}.${o}-${s} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}-${s} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o}-${s} <${+n+1}.0.0-0`):(a("no pr"),c="0"===n?"0"===i?`>=${n}.${i}.${o}${r} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o} <${+n+1}.0.0-0`),a("caret return",c),c})},E=(e,t)=>(a("replaceXRanges",e,t),e.split(/\s+/).map(e=>T(e,t)).join(" ")),T=(e,t)=>{e=e.trim();const n=t.loose?u[l.XRANGELOOSE]:u[l.XRANGE];return e.replace(n,(n,r,i,o,s,c)=>{a("xRange",e,n,r,i,o,s,c);const u=I(i),l=u||I(o),d=l||I(s),h=d;return"="===r&&h&&(r=""),c=t.includePrerelease?"-0":"",u?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&h?(l&&(o=0),s=0,">"===r?(r=">=",l?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",l?i=+i+1:o=+o+1),"<"===r&&(c="-0"),n=`${r+i}.${o}.${s}${c}`):l?n=`>=${i}.0.0${c} <${+i+1}.0.0-0`:d&&(n=`>=${i}.${o}.0${c} <${i}.${+o+1}.0-0`),a("xRange return",n),n})},b=(e,t)=>(a("replaceStars",e,t),e.trim().replace(u[l.STAR],"")),k=(e,t)=>(a("replaceGTE0",e,t),e.trim().replace(u[t.includePrerelease?l.GTE0PRE:l.GTE0],"")),P=e=>(t,n,r,i,o,s,a,c,u,l,d,h)=>`${n=I(r)?"":I(i)?`>=${r}.0.0${e?"-0":""}`:I(o)?`>=${r}.${i}.0${e?"-0":""}`:s?`>=${n}`:`>=${n}${e?"-0":""}`} ${c=I(u)?"":I(l)?`<${+u+1}.0.0-0`:I(d)?`<${u}.${+l+1}.0-0`:h?`<=${u}.${l}.${d}-${h}`:e?`<${u}.${l}.${+d+1}-0`:`<=${c}`}`.trim(),R=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(a(e[n].semver),e[n].semver!==s.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0}},8377:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(1398)),c=a.window.createOutputChannel(a.l10n.t("Microsoft Authentication"),{log:!0});t.default=c},8393:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryUtil=void 0;class n{static applyReplacements(e,t){for(const n of Object.keys(e))for(const r of t)r.lookup.test(n)&&(void 0!==r.replacementString?e[n]=r.replacementString:delete e[n])}static shouldUseOneDataSystemSDK(e){return 74===e.length&&"-"===e[32]&&"-"===e[41]&&"-"===e[46]&&"-"===e[51]&&"-"===e[56]&&"-"===e[69]}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.9.8"}}static getInstance(){return n._instance||(n._instance=new n),n._instance}}t.TelemetryUtil=n},8428:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.activate=async function(e,t){const n=new a.UriEventHandler;e.subscriptions.push(n);const r=await s.MsalAuthProvider.create(e,t,o.default,n);e.subscriptions.push(c.authentication.registerAuthenticationProvider("microsoft","Microsoft",r,{supportsMultipleAccounts:!0,supportsChallenges:!0,supportedAuthorizationServers:[c.Uri.parse("https://login.microsoftonline.com/*"),c.Uri.parse("https://login.microsoftonline.com/*/v2.0")]}));let i=await l(e,n);e.subscriptions.push(c.workspace.onDidChangeConfiguration(async t=>{t.affectsConfiguration("microsoft-sovereign-cloud")&&(i?.dispose(),i=await l(e,n))}))},t.deactivate=function(){};const i=n(8197),o=r(n(8377)),s=n(2583),a=n(3683),c=n(1398),u=n(2417);async function l(e,t){const n=c.workspace.getConfiguration("microsoft-sovereign-cloud").get("environment");let r;if(!n)return;if("custom"===n){const e=c.workspace.getConfiguration("microsoft-sovereign-cloud").get("customEnvironment");if(!e)return void(await c.window.showErrorMessage(c.l10n.t("You must also specify a custom environment in order to use the custom environment auth provider."),c.l10n.t("Open settings"))&&await c.commands.executeCommand("workbench.action.openSettingsJson","microsoft-sovereign-cloud.customEnvironment"));try{i.Environment.add(e)}catch(e){return void(await c.window.showErrorMessage(c.l10n.t("Error validating custom environment setting: {0}",e.message),c.l10n.t("Open settings"))&&await c.commands.executeCommand("workbench.action.openSettings","microsoft-sovereign-cloud.customEnvironment"))}r=e.name}else r=n;const o=i.Environment.get(r);if(!o)return void await c.window.showErrorMessage(c.l10n.t("The environment `{0}` is not a valid environment.",r),c.l10n.t("Open settings"));const a=await s.MsalAuthProvider.create(e,new u.MicrosoftSovereignCloudAuthenticationTelemetryReporter(e.extension.packageJSON.aiKey),c.window.createOutputChannel(c.l10n.t("Microsoft Sovereign Cloud Authentication"),{log:!0}),t,o),l=c.authentication.registerAuthenticationProvider("microsoft-sovereign-cloud",r,a,{supportsMultipleAccounts:!0,supportsChallenges:!0});return e.subscriptions.push(l),l}},8435:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(6982))&&r.__esModule?r:{default:r};t.default=function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i.default.createHash("md5").update(e).digest()}},8447:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AzureActiveDirectoryService=t.REFRESH_NETWORK_FAILURE=void 0;const c=s(n(1398)),u=s(n(6928)),l=n(9529),d=n(1619),h=n(5951),f=n(1589),p=n(2866),g=a(n(3034)),m=n(8197),v="https://vscode.dev/redirect",y=m.Environment.AzureCloud.activeDirectoryEndpointUrl,w="aebc6443-996d-45c2-90f0-388ff96faa56";t.REFRESH_NETWORK_FAILURE="Network failure";class I{_logger;_uriHandler;_tokenStorage;_telemetryReporter;_env;static REFRESH_TIMEOUT_MODIFIER=2e3/3;static POLLING_CONSTANT=18e5;_tokens=[];_refreshTimeouts=new Map;_sessionChangeEmitter=new c.EventEmitter;_pendingNonces=new Map;_codeExchangePromises=new Map;_codeVerfifiers=new Map;_pendingTokensToStore=new Map;_sequencer=new d.SequencerByKey;constructor(e,t,n,r,i,o){this._logger=e,this._uriHandler=n,this._tokenStorage=r,this._telemetryReporter=i,this._env=o,t.subscriptions.push(this._tokenStorage.onDidChangeInOtherWindow(e=>this.checkForUpdates(e))),t.subscriptions.push(c.window.onDidChangeWindowState(async e=>e.focused&&await this.storePendingTokens()));const s=new d.IntervalTimer;s.cancelAndSet(()=>!c.window.state.focused&&this.storePendingTokens(),18e6+Math.floor(3e4*Math.random())),t.subscriptions.push(s)}async initialize(){this._logger.trace("Reading sessions from secret storage...");const e=await this._tokenStorage.getAll(e=>this.sessionMatchesEndpoint(e));this._logger.trace(`Got ${e.length} stored sessions`);const n=e.map(async e=>{this._logger.trace(`[${e.scope}] '${e.id}' Read stored session`);const n=e.scope.split(" "),r={scopes:n,scopeStr:e.scope,scopesToSend:n.filter(e=>!e.startsWith("VSCODE_")).join(" "),clientId:this.getClientId(n),tenant:this.getTenantId(n)};try{await this.refreshToken(e.refreshToken,r,e.id)}catch(n){n.message===t.REFRESH_NETWORK_FAILURE?this._tokens.push({accessToken:void 0,refreshToken:e.refreshToken,account:{...e.account,type:"unknown"},scope:e.scope,sessionId:e.id}):(c.window.showErrorMessage(c.l10n.t("You have been signed out because reading stored authentication information failed.")),this._logger.error(n),await this.removeSessionByIToken({accessToken:void 0,refreshToken:e.refreshToken,account:{...e.account,type:"unknown"},scope:e.scope,sessionId:e.id}))}}),r=await Promise.allSettled(n);for(const e of r)if("rejected"===e.status){this._logger.error(`Failed to initialize stored data: ${e.reason}`),this.clearSessions();break}for(const e of this._tokens)this._telemetryReporter.sendTelemetryEvent("account",{scopes:JSON.stringify(e.scope.replace(/[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/i,"{guid}").split(" ")),accountType:e.account.type})}get onDidChangeSessions(){return this._sessionChangeEmitter.event}getSessions(e,{account:t,authorizationServer:n}={}){if(!e){this._logger.info("Getting sessions for all scopes...");const e=this._tokens.filter(e=>!t?.label||e.account.label===t.label).map(e=>this.convertToSessionSync(e));return this._logger.info(`Got ${e.length} sessions for all scopes${t?` for account '${t.label}'`:""}...`),Promise.resolve(e)}let r=[...e];if(r.includes("openid")||r.push("openid"),r.includes("email")||r.push("email"),r.includes("profile")||r.push("profile"),r.includes("offline_access")||r.push("offline_access"),n){const e=n.path.split("/")[1];e&&r.push(`VSCODE_TENANT:${e}`)}r=r.sort();const i=r.join(" "),o={clientId:this.getClientId(e),originalScopes:e,scopes:r,scopeStr:i,scopesToSend:r.filter(e=>!e.startsWith("VSCODE_")).join(" "),tenant:this.getTenantId(r)};return this._logger.trace(`[${o.scopeStr}] Queued getting sessions`+t?` for ${t?.label}`:""),this._sequencer.queue(i,()=>this.doGetSessions(o,t))}async doGetSessions(e,t){this._logger.info(`[${e.scopeStr}] Getting sessions`+t?` for ${t?.label}`:"");const n=this._tokens.filter(t=>t.scope===e.scopeStr).filter(e=>!t?.label||e.account.label===t.label);if(!n.length){let r;for(const n of this._tokens)if(n.refreshToken&&(!t?.label||n.account.label===t.label)){if(e.clientId===w&&!n.scope.includes("VSCODE_CLIENT_ID")){r=n;break}if(e.clientId!==w&&n.scope.includes(`VSCODE_CLIENT_ID:${e.clientId}`)){r=n;break}}if(r){this._logger.trace(`[${e.scopeStr}] '${r.sessionId}' Found a matching token with a different scopes '${r.scope}'. Attempting to get a new session using the existing session.`);try{const t=await this.doRefreshToken(r.refreshToken,e);this._sessionChangeEmitter.fire({added:[this.convertToSessionSync(t)],removed:[],changed:[]}),n.push(t)}catch(t){this._logger.error(`[${e.scopeStr}] Attempted to get a new session using the existing session with scopes '${r.scope}' but it failed due to: ${t.message??t}`)}}}return this._logger.info(`[${e.scopeStr}] Got ${n.length} sessions`),(await Promise.allSettled(n.map(t=>this.convertToSession(t,e)))).filter(e=>"fulfilled"===e.status).map(e=>e.value)}createSession(e,{account:t,authorizationServer:n}={}){let r=[...e];if(r.includes("openid")||r.push("openid"),r.includes("email")||r.push("email"),r.includes("profile")||r.push("profile"),r.includes("offline_access")||r.push("offline_access"),n){const e=n.path.split("/")[1];e&&r.push(`VSCODE_TENANT:${e}`)}r=r.sort();const i={originalScopes:e,scopes:r,scopeStr:r.join(" "),scopesToSend:r.filter(e=>!e.startsWith("VSCODE_")).join(" "),clientId:this.getClientId(e),tenant:this.getTenantId(r)};return this._logger.trace(`[${i.scopeStr}] Queued creating session`),this._sequencer.queue(i.scopeStr,()=>this.doCreateSession(i,t))}async doCreateSession(e,t){this._logger.info(`[${e.scopeStr}] Creating session`+t?` for ${t?.label}`:"");const n=void 0!==c.env.remoteName,r=void 0===c.env.remoteName&&c.env.uiKind===c.UIKind.Web;if(r&&this._env.activeDirectoryEndpointUrl!==y)throw new Error("Sign in to non-public clouds is not supported on the web.");return await c.window.withProgress({location:c.ProgressLocation.Notification,title:c.l10n.t("Signing in to your account..."),cancellable:!0},async(i,o)=>{if(n||r)return await this.createSessionWithoutLocalServer(e,t?.label,o);try{return await this.createSessionWithLocalServer(e,t?.label,o)}catch(n){if(this._logger.error(`[${e.scopeStr}] Error creating session: ${n}`),"Error listening to server"===n.message||"Closed"===n.message||"Timeout waiting for port"===n.message)return this.createSessionWithoutLocalServer(e,t?.label,o);throw n}})}async createSessionWithLocalServer(e,t,n){this._logger.trace(`[${e.scopeStr}] Starting login flow with local server`);const r=(0,h.generateCodeVerifier)(),i=await(0,h.generateCodeChallenge)(r),o=new URLSearchParams({response_type:"code",response_mode:"query",client_id:e.clientId,redirect_uri:v,scope:e.scopesToSend,code_challenge_method:"S256",code_challenge:i});t?o.set("login_hint",t):o.set("prompt","select_account");const s=new URL(`${e.tenant}/oauth2/v2.0/authorize?${o.toString()}`,this._env.activeDirectoryEndpointUrl).toString(),a=new f.LoopbackAuthServer(u.join(__dirname,"../media"),s);let l;await a.start();try{c.env.openExternal(c.Uri.parse(`http://127.0.0.1:${a.port}/signin?nonce=${encodeURIComponent(a.nonce)}`));const{code:e}=await(0,d.raceCancellationAndTimeoutError)(a.waitForOAuthResponse(),n,3e5);l=e}finally{setTimeout(()=>{a.stop()},5e3)}const p=await this.exchangeCodeForSession(l,r,e);return this._logger.trace(`[${e.scopeStr}] '${p.id}' Sending change event for added session`),this._sessionChangeEmitter.fire({added:[p],removed:[],changed:[]}),this._logger.info(`[${e.scopeStr}] '${p.id}' session successfully created!`),p}async createSessionWithoutLocalServer(e,t,n){this._logger.trace(`[${e.scopeStr}] Starting login flow without local server`);let r=await c.env.asExternalUri(c.Uri.parse(`${c.env.uriScheme}://vscode.microsoft-authentication`));const i=(0,h.generateCodeVerifier)(),o=new URLSearchParams(r.query);o.set("nonce",encodeURIComponent(i)),r=r.with({query:o.toString()});const s=encodeURIComponent(r.toString(!0)),a=(0,h.generateCodeVerifier)(),u=await(0,h.generateCodeChallenge)(a),f=new URL(`${e.tenant}/oauth2/v2.0/authorize`,this._env.activeDirectoryEndpointUrl),p=new URLSearchParams({response_type:"code",client_id:encodeURIComponent(e.clientId),response_mode:"query",redirect_uri:v,state:s,scope:e.scopesToSend,code_challenge_method:"S256",code_challenge:u});t?p.append("login_hint",t):p.append("prompt","select_account"),f.search=p.toString();const g=c.Uri.parse(f.toString());c.env.openExternal(g);const m=this._pendingNonces.get(e.scopeStr)||[];this._pendingNonces.set(e.scopeStr,[...m,i]);let y,w=this._codeExchangePromises.get(e.scopeStr);return w||((0,l.isSupportedEnvironment)(r)?w=this.handleCodeResponse(e):(y=c.window.createInputBox(),w=this.handleCodeInputBox(y,a,e)),this._codeExchangePromises.set(e.scopeStr,w)),this._codeVerfifiers.set(i,a),await(0,d.raceCancellationAndTimeoutError)(w,n,3e5).finally(()=>{this._pendingNonces.delete(e.scopeStr),this._codeExchangePromises.delete(e.scopeStr),this._codeVerfifiers.delete(i),y?.dispose()})}async removeSessionById(e,t=!0){const n=this._tokens.findIndex(t=>t.sessionId===e);if(-1===n)return this._logger.warn(`'${e}' Session not found to remove`),Promise.resolve(void 0);const r=this._tokens.splice(n,1)[0];return this._logger.trace(`[${r.scope}] '${e}' Queued removing session`),this._sequencer.queue(r.scope,()=>this.removeSessionByIToken(r,t))}async clearSessions(){this._logger.trace("Logging out of all sessions"),this._tokens=[],await this._tokenStorage.deleteAll(e=>this.sessionMatchesEndpoint(e)),this._refreshTimeouts.forEach(e=>{clearTimeout(e)}),this._refreshTimeouts.clear(),this._logger.trace("All sessions logged out")}async removeSessionByIToken(e,t=!0){this._logger.info(`[${e.scope}] '${e.sessionId}' Logging out of session`),this.removeSessionTimeout(e.sessionId),t&&await this._tokenStorage.delete(e.sessionId);const n=this._tokens.findIndex(t=>t.sessionId===e.sessionId);-1!==n&&this._tokens.splice(n,1);const r=this.convertToSessionSync(e);return this._logger.trace(`[${e.scope}] '${e.sessionId}' Sending change event for session that was removed`),this._sessionChangeEmitter.fire({added:[],removed:[r],changed:[]}),this._logger.info(`[${e.scope}] '${e.sessionId}' Logged out of session successfully!`),r}setSessionTimeout(e,n,r,i){this._logger.trace(`[${r.scopeStr}] '${e}' Setting refresh timeout for ${i} milliseconds`),this.removeSessionTimeout(e),this._refreshTimeouts.set(e,setTimeout(async()=>{try{const t=await this.refreshToken(n,r,e);this._logger.trace(`[${r.scopeStr}] '${e}' Sending change event for session that was refreshed`),this._sessionChangeEmitter.fire({added:[],removed:[],changed:[this.convertToSessionSync(t)]}),this._logger.trace(`[${r.scopeStr}] '${e}' refresh timeout complete`)}catch(n){n.message!==t.REFRESH_NETWORK_FAILURE&&(c.window.showErrorMessage(c.l10n.t("You have been signed out because reading stored authentication information failed.")),await this.removeSessionById(e))}},i))}removeSessionTimeout(e){const t=this._refreshTimeouts.get(e);t&&(clearTimeout(t),this._refreshTimeouts.delete(e))}convertToTokenSync(e,t,n){let r;this._logger.trace(`[${t.scopeStr}] '${n??"new"}' Attempting to parse token response.`);try{e.id_token?r=JSON.parse((0,p.base64Decode)(e.id_token.split(".")[1])):(this._logger.warn(`[${t.scopeStr}] '${n??"new"}' Attempting to parse access_token instead since no id_token was included in the response.`),r=JSON.parse((0,p.base64Decode)(e.access_token.split(".")[1])))}catch(e){throw e}const i=`${r.tid}/${r.oid??r.altsecid??""+r.ipd}`,o=n||`${i}/${(0,h.randomUUID)()}`;return this._logger.trace(`[${t.scopeStr}] '${o}' Token response parsed successfully.`),{expiresIn:e.expires_in,expiresAt:e.expires_in?Date.now()+1e3*e.expires_in:void 0,accessToken:e.access_token,idToken:e.id_token,refreshToken:e.refresh_token,scope:t.scopeStr,sessionId:o,account:{label:r.preferred_username??r.email??r.unique_name??"user@example.com",id:i,type:"9188040d-6c67-4c5b-b112-36a304b66dad"===r.tid||"f8cdef31-a31e-4b4a-93e4-5f571e91255a"===r.tid?"msa":"aad"}}}convertToSessionSync(e){return{id:e.sessionId,accessToken:e.accessToken,idToken:e.idToken,account:e.account,scopes:e.scope.split(" ")}}async convertToSession(e,t){if(e.accessToken&&(!e.expiresAt||e.expiresAt>Date.now()))return this._logger.trace(`[${t.scopeStr}] '${e.sessionId}' Token available from cache${e.expiresAt?`, expires in ${e.expiresAt-Date.now()} milliseconds`:""}.`),{id:e.sessionId,accessToken:e.accessToken,idToken:e.idToken,account:e.account,scopes:t.originalScopes??t.scopes};try{this._logger.trace(`[${t.scopeStr}] '${e.sessionId}' Token expired or unavailable, trying refresh`);const n=await this.refreshToken(e.refreshToken,t,e.sessionId);if(n.accessToken)return{id:e.sessionId,accessToken:n.accessToken,idToken:n.idToken,account:e.account,scopes:t.originalScopes??t.scopes};throw new Error}catch(e){throw new Error("Unavailable due to network problems")}}refreshToken(e,t,n){return this._logger.trace(`[${t.scopeStr}] '${n??"new"}' Queued refreshing token`),this._sequencer.queue(t.scopeStr,()=>this.doRefreshToken(e,t,n))}async doRefreshToken(e,n,r){this._logger.trace(`[${n.scopeStr}] '${r??"new"}' Refreshing token`);const i=new URLSearchParams({refresh_token:e,client_id:n.clientId,grant_type:"refresh_token",scope:n.scopesToSend}).toString();try{const e=await this.fetchTokenResponse(i,n),t=this.convertToTokenSync(e,n,r);return t.expiresIn&&this.setSessionTimeout(t.sessionId,t.refreshToken,n,t.expiresIn*I.REFRESH_TIMEOUT_MODIFIER),this.setToken(t,n),this._logger.trace(`[${n.scopeStr}] '${t.sessionId}' Token refresh success`),t}catch(i){if(i.message===t.REFRESH_NETWORK_FAILURE)throw r&&this.setSessionTimeout(r,e,n,I.POLLING_CONSTANT),i;throw this._logger.error(`[${n.scopeStr}] '${r??"new"}' Refreshing token failed: ${i.message}`),i}}getClientId(e){return e.reduce((e,t)=>t.startsWith("VSCODE_CLIENT_ID:")?t.split("VSCODE_CLIENT_ID:")[1]:e,void 0)??w}getTenantId(e){return e.reduce((e,t)=>t.startsWith("VSCODE_TENANT:")?t.split("VSCODE_TENANT:")[1]:e,void 0)??"organizations"}async handleCodeResponse(e){let t;return new Promise((n,r)=>{t=this._uriHandler.event(async t=>{try{const r=new URLSearchParams(t.query);let i=r.get("code"),o=r.get("nonce");if(Array.isArray(i)&&(i=i[0]),!i)throw new Error("No code included in query");if(Array.isArray(o)&&(o=o[0]),!o)throw new Error("No nonce included in query");const s=this._pendingNonces.get(e.scopeStr)||[];if(!s.includes(o)&&!s.includes(decodeURIComponent(o)))throw new Error("Nonce does not match.");const a=this._codeVerfifiers.get(o)??this._codeVerfifiers.get(decodeURIComponent(o));if(!a)throw new Error("No available code verifier");const c=await this.exchangeCodeForSession(i,a,e);this._sessionChangeEmitter.fire({added:[c],removed:[],changed:[]}),this._logger.info(`[${e.scopeStr}] '${c.id}' session successfully created!`),n(c)}catch(e){r(e)}})}).then(e=>(t.dispose(),e)).catch(e=>{throw t.dispose(),e})}async handleCodeInputBox(e,t,n){return this._logger.trace(`[${n.scopeStr}] Starting login flow with input box`),e.ignoreFocusOut=!0,e.title=c.l10n.t("Microsoft Authentication"),e.prompt=c.l10n.t("Provide the authorization code to complete the sign in flow."),e.placeholder=c.l10n.t("Paste authorization code here..."),new Promise((r,i)=>{e.show(),e.onDidAccept(async()=>{const i=e.value;if(i){e.dispose();const o=await this.exchangeCodeForSession(i,t,n);this._logger.trace(`[${n.scopeStr}] '${o.id}' sending session changed event because session was added.`),this._sessionChangeEmitter.fire({added:[o],removed:[],changed:[]}),this._logger.trace(`[${n.scopeStr}] '${o.id}' session successfully created!`),r(o)}}),e.onDidHide(()=>{e.value||(e.dispose(),i("Cancelled"))})})}async exchangeCodeForSession(e,t,n){let r;this._logger.trace(`[${n.scopeStr}] Exchanging login code for session`);try{const i=new URLSearchParams({grant_type:"authorization_code",code:e,client_id:n.clientId,scope:n.scopesToSend,code_verifier:t,redirect_uri:v}).toString(),o=await this.fetchTokenResponse(i,n);this._logger.trace(`[${n.scopeStr}] Exchanging code for token succeeded!`),r=this.convertToTokenSync(o,n)}catch(e){throw this._logger.error(`[${n.scopeStr}] Error exchanging code for token: ${e}`),e}return r.expiresIn&&this.setSessionTimeout(r.sessionId,r.refreshToken,n,r.expiresIn*I.REFRESH_TIMEOUT_MODIFIER),this.setToken(r,n),this._logger.trace(`[${n.scopeStr}] '${r.sessionId}' Exchanging login code for session succeeded!`),await this.convertToSession(r,n)}async fetchTokenResponse(e,n){let r;if(this._env.activeDirectoryEndpointUrl!==y)r=this._env.activeDirectoryEndpointUrl;else{const e=await c.commands.executeCommand("workbench.getCodeExchangeProxyEndpoints");r=e?.microsoft||this._env.activeDirectoryEndpointUrl}const i=new URL(`${n.tenant}/oauth2/v2.0/token`,r);let o=0;for(;o<=3;){let t,r;o++;try{t=await(0,g.default)(i.toString(),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e})}catch(e){r=e.message??e}if(t&&!(t.status>499)){if(!t.ok)throw new Error(await t.text());return await t.json()}if(o>3){this._logger.error(`[${n.scopeStr}] Fetching token failed: ${t?await t.text():r}`);break}await new Promise(e=>setTimeout(e,5*o*o*1e3))}throw new Error(t.REFRESH_NETWORK_FAILURE)}setToken(e,t){this._logger.trace(`[${t.scopeStr}] '${e.sessionId}' Setting token`);const n=this._tokens.findIndex(t=>t.sessionId===e.sessionId);n>-1?this._tokens.splice(n,1,e):this._tokens.push(e),this.storeToken(e,t)}async storeToken(e,t){if(!c.window.state.focused)return this._pendingTokensToStore.has(e.sessionId)?this._logger.trace(`[${t.scopeStr}] '${e.sessionId}' Window is not focused, replacing token to be stored`):this._logger.trace(`[${t.scopeStr}] '${e.sessionId}' Window is not focused, pending storage of token`),void this._pendingTokensToStore.set(e.sessionId,e);await this._tokenStorage.store(e.sessionId,{id:e.sessionId,refreshToken:e.refreshToken,scope:e.scope,account:e.account,endpoint:this._env.activeDirectoryEndpointUrl}),this._logger.trace(`[${t.scopeStr}] '${e.sessionId}' Stored token`)}async storePendingTokens(){if(0===this._pendingTokensToStore.size)return void this._logger.trace("No pending tokens to store");const e=[...this._pendingTokensToStore.values()];this._pendingTokensToStore.clear(),this._logger.trace(`Storing ${e.length} pending tokens...`),await Promise.allSettled(e.map(async e=>{this._logger.trace(`[${e.scope}] '${e.sessionId}' Storing pending token`),await this._tokenStorage.store(e.sessionId,{id:e.sessionId,refreshToken:e.refreshToken,scope:e.scope,account:e.account,endpoint:this._env.activeDirectoryEndpointUrl}),this._logger.trace(`[${e.scope}] '${e.sessionId}' Stored pending token`)})),this._logger.trace("Done storing pending tokens")}async checkForUpdates(e){for(const n of e.added){const r=await this._tokenStorage.get(n);if(r){if(this.sessionMatchesEndpoint(r)&&!this._tokens.some(e=>e.scope===r.scope&&e.sessionId===r.id)&&r.refreshToken)try{const e=r.scope.split(" "),t={scopes:e,scopeStr:r.scope,scopesToSend:e.filter(e=>!e.startsWith("VSCODE_")).join(" "),clientId:this.getClientId(e),tenant:this.getTenantId(e)};this._logger.trace(`[${t.scopeStr}] '${r.id}' Session added in another window`);const n=await this.refreshToken(r.refreshToken,t,r.id);this._logger.trace(`[${t.scopeStr}] '${n.sessionId}' Sending change event for session that was added`),this._sessionChangeEmitter.fire({added:[this.convertToSessionSync(n)],removed:[],changed:[]}),this._logger.trace(`[${t.scopeStr}] '${n.sessionId}' Session added in another window added here`);continue}catch(e){e.message!==t.REFRESH_NETWORK_FAILURE&&(c.window.showErrorMessage(c.l10n.t("You have been signed out because reading stored authentication information failed.")),await this.removeSessionById(r.id));continue}}else this._logger.error("session not found that was apparently just added")}for(const{value:t}of e.removed)this._logger.trace(`[${t.scope}] '${t.id}' Session removed in another window`),this.sessionMatchesEndpoint(t)?(await this.removeSessionById(t.id,!1),this._logger.trace(`[${t.scope}] '${t.id}' Session removed in another window removed here`)):this._logger.trace(`[${t.scope}] '${t.id}' Session doesn't match endpoint. Skipping...`);for(const t of e.updated)this._pendingTokensToStore.delete(t)&&this._logger.trace(`'${t}' Cancelled pending token storage because token was updated in another window`)}sessionMatchesEndpoint(e){return e.endpoint||=y,e.endpoint===this._env.activeDirectoryEndpointUrl}}t.AzureActiveDirectoryService=I},8587:e=>{const t=Object.freeze({loose:!0}),n=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:n},8596:(e,t,n)=>{"use strict";n.d(t,{o:()=>p});var r=n(659),i=n(3673);function o(e){var t="ai."+e+".";return function(e){return t+e}}var s=o("application"),a=o("device"),c=o("location"),u=o("operation"),l=o("session"),d=o("user"),h=o("cloud"),f=o("internal"),p=function(e){function t(){return e.call(this)||this}return(0,r.qU)(t,e),t}((0,i.SZ)({applicationVersion:s("ver"),applicationBuild:s("build"),applicationTypeId:s("typeId"),applicationId:s("applicationId"),applicationLayer:s("layer"),deviceId:a("id"),deviceIp:a("ip"),deviceLanguage:a("language"),deviceLocale:a("locale"),deviceModel:a("model"),deviceFriendlyName:a("friendlyName"),deviceNetwork:a("network"),deviceNetworkName:a("networkName"),deviceOEMName:a("oemName"),deviceOS:a("os"),deviceOSVersion:a("osVersion"),deviceRoleInstance:a("roleInstance"),deviceRoleName:a("roleName"),deviceScreenResolution:a("screenResolution"),deviceType:a("type"),deviceMachineName:a("machineName"),deviceVMName:a("vmName"),deviceBrowser:a("browser"),deviceBrowserVersion:a("browserVersion"),locationIp:c("ip"),locationCountry:c("country"),locationProvince:c("province"),locationCity:c("city"),operationId:u("id"),operationName:u("name"),operationParentId:u("parentId"),operationRootId:u("rootId"),operationSyntheticSource:u("syntheticSource"),operationCorrelationVector:u("correlationVector"),sessionId:l("id"),sessionIsFirst:l("isFirst"),sessionIsNew:l("isNew"),userAccountAcquisitionDate:d("accountAcquisitionDate"),userAccountId:d("accountId"),userAgent:d("userAgent"),userId:d("id"),userStoreRegion:d("storeRegion"),userAuthUserId:d("authUserId"),userAnonymousUserAcquisitionDate:d("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:d("authUserAcquisitionDate"),cloudName:h("name"),cloudRole:h("role"),cloudRoleVer:h("roleVer"),cloudRoleInstance:h("roleInstance"),cloudEnvironment:h("environment"),cloudLocation:h("location"),cloudDeploymentUnit:h("deploymentUnit"),internalNodeName:f("nodeName"),internalSdkVersion:f("sdkVersion"),internalAgentVersion:f("agentVersion"),internalSnippet:f("snippet"),internalSdkSrc:f("sdkSrc")}))},8610:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(9614)),i=o(n(2298));function o(e){return e&&e.__esModule?e:{default:e}}let s,a,c=0,u=0;t.default=function(e,t,n){let o=t&&n||0;const l=t||new Array(16);let d=(e=e||{}).node||s,h=void 0!==e.clockseq?e.clockseq:a;if(null==d||null==h){const t=e.random||(e.rng||r.default)();null==d&&(d=s=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==h&&(h=a=16383&(t[6]<<8|t[7]))}let f=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.nsecs?e.nsecs:u+1;const g=f-c+(p-u)/1e4;if(g<0&&void 0===e.clockseq&&(h=h+1&16383),(g<0||f>c)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,u=p,a=h,f+=122192928e5;const m=(1e4*(268435455&f)+p)%4294967296;l[o++]=m>>>24&255,l[o++]=m>>>16&255,l[o++]=m>>>8&255,l[o++]=255&m;const v=f/4294967296*1e4&268435455;l[o++]=v>>>8&255,l[o++]=255&v,l[o++]=v>>>24&15|16,l[o++]=v>>>16&255,l[o++]=h>>>8|128,l[o++]=255&h;for(let e=0;e<6;++e)l[o+e]=d[e];return t||(0,i.default)(l)}},8611:e=>{"use strict";e.exports=require("http")},8789:(e,t,n)=>{var r=n(1045),i=n(2861).Buffer,o=n(6982),s=n(2010),a=n(9023),c="secret must be a string or buffer",u="key must be a string or a buffer",l="function"==typeof o.createPublicKey;function d(e){if(!i.isBuffer(e)&&"string"!=typeof e){if(!l)throw g(u);if("object"!=typeof e)throw g(u);if("string"!=typeof e.type)throw g(u);if("string"!=typeof e.asymmetricKeyType)throw g(u);if("function"!=typeof e.export)throw g(u)}}function h(e){if(!i.isBuffer(e)&&"string"!=typeof e&&"object"!=typeof e)throw g("key must be a string, a buffer or an object")}function f(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function p(e){var t=4-(e=e.toString()).length%4;if(4!==t)for(var n=0;n<t;++n)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function g(e){var t=[].slice.call(arguments,1),n=a.format.bind(a,e).apply(null,t);return new TypeError(n)}function m(e){var t;return t=e,i.isBuffer(t)||"string"==typeof t||(e=JSON.stringify(e)),e}function v(e){return function(t,n){!function(e){if(!i.isBuffer(e)){if("string"==typeof e)return e;if(!l)throw g(c);if("object"!=typeof e)throw g(c);if("secret"!==e.type)throw g(c);if("function"!=typeof e.export)throw g(c)}}(n),t=m(t);var r=o.createHmac("sha"+e,n);return f((r.update(t),r.digest("base64")))}}function y(e){return function(t,n,o){var s=v(e)(t,o);return r(i.from(n),i.from(s))}}function w(e){return function(t,n){h(n),t=m(t);var r=o.createSign("RSA-SHA"+e);return f((r.update(t),r.sign(n,"base64")))}}function I(e){return function(t,n,r){d(r),t=m(t),n=p(n);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify(r,n,"base64")}}function A(e){return function(t,n){h(n),t=m(t);var r=o.createSign("RSA-SHA"+e);return f((r.update(t),r.sign({key:n,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function S(e){return function(t,n,r){d(r),t=m(t),n=p(n);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify({key:r,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function C(e){var t=w(e);return function(){var n=t.apply(null,arguments);return s.derToJose(n,"ES"+e)}}function _(e){var t=I(e);return function(n,r,i){return r=s.joseToDer(r,"ES"+e).toString("base64"),t(n,r,i)}}function E(){return function(){return""}}function T(){return function(e,t){return""===t}}l&&(u+=" or a KeyObject",c+="or a KeyObject"),e.exports=function(e){var t={hs:v,rs:w,ps:A,es:C,none:E},n={hs:y,rs:I,ps:S,es:_,none:T},r=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!r)throw g('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',e);var i=(r[1]||r[3]).toLowerCase(),o=r[2];return{sign:t[i](o),verify:n[i](o)}}},8794:e=>{e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},8916:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BE_PROFILE:()=>o,NRT_PROFILE:()=>i,PostChannel:()=>At,RT_PROFILE:()=>r});var r="REAL_TIME",i="NEAR_REAL_TIME",o="BEST_EFFORT",s=n(659),a=n(8279),c=n(4822),u=n(269),l=n(8156),d=n(6149),h=n(4276),f=n(9749),p=n(2317),g=n(3673),m=n(3662),v=n(3775),y=n(8257),w=n(8205),I="",A="drop",S="requeue",C="no-cache, no-store",_="application/x-json-stream",E="cache-control",T="content-type",b="client-version",k="client-id",P="time-delta-to-apply-millis",R="upload-time",O="apikey",M="AuthMsaDeviceTicket",N="WebAuthToken",D="AuthXToken",x="msfpc",L="trace",U="user",q="allowRequestSending",F="firstRequestSent",H="shouldAddClockSkewHeaders",B="getClockSkewHeaderValue",j="setClockSkew",$="length",z="concat",V="iKey",K="count",G="events",W="push",X="split",Y="splice",Q="toLowerCase",J="hdrs",Z="useHdrs",ee="initialize",te="setTimeoutOverride",ne="clearTimeoutOverride",re="overrideEndpointUrl",ie="avoidOptions",oe="enableCompoundKey",se="disableXhrSync",ae="disableFetchKeepAlive",ce="useSendBeacon",ue="fetchCredentials",le="alwaysUseXhrOverride",de="serializeOfflineEvt",he="getOfflineRequestDetails",fe="createPayload",pe="createOneDSPayload",ge="payloadBlob",me="headers",ve="_thePayload",ye="urlString",we="batches",Ie="sendType",Ae="addHeader",Se="canSendRequest",Ce="sendQueuedRequests",_e="isCompletelyIdle",Ee="setUnloading",Te="resume",be="sendSynchronousBatch",ke="_transport",Pe="getWParam",Re="isBeacon",Oe="timings",Me="isTeardown",Ne="isSync",De="data",xe="_sendReason",Le="setKillSwitchTenants",Ue="_backOffTransmission",qe="identifier",Fe="eventsLimitInMem",He="autoFlushEventsLimit",Be="baseData",je="sendAttempt",$e="latency",ze="sync";function Ve(e){var t=(e.ext||{}).intweb;return t&&(0,c.yD)(t[x])?t[x]:null}function Ke(e){for(var t=null,n=0;null===t&&n<e[$];n++)t=Ve(e[n]);return t}var Ge=function(){function e(t,n){var r=n?[][z](n):[],i=this,o=Ke(r);i[V]=function(){return t},i.Msfpc=function(){return o||I},i[K]=function(){return r[$]},i[G]=function(){return r},i.addEvent=function(e){return!!e&&(r[W](e),o||(o=Ve(e)),!0)},i[X]=function(n,i){var s;if(n<r[$]){var a=r[$]-n;(0,u.hXl)(i)||(a=i<a?i:a),s=r[Y](n,a),o=Ke(r)}return new e(t,s)}}return e.create=function(t,n){return new e(t,n)},e}(),We=n(7292),Xe=n(856),Ye=n(5664),Qe=function(){function e(){var t=!0,n=!0,r=!0,i="use-collector-delta",o=!1;(0,a.A)(e,this,function(e){e[q]=function(){return t},e[F]=function(){r&&(r=!1,o||(t=!1))},e[H]=function(){return n},e[B]=function(){return i},e[j]=function(e){o||(e?(i=e,n=!0,o=!0):n=!1,t=!0)}})}return e.__ieDyn=1,e}(),Je=function(){function e(){var t={};(0,a.A)(e,this,function(e){e[Le]=function(e,n){if(e&&n)try{var r=(s=e[X](","),a=[],s&&(0,u.Iuo)(s,function(e){a[W]((0,u.EHq)(e))}),a);if("this-request-only"===n)return r;for(var i=1e3*parseInt(n,10),o=0;o<r[$];++o)t[r[o]]=(0,u.f0d)()+i}catch(e){return[]}var s,a;return[]},e.isTenantKilled=function(e){var n=t,r=(0,u.EHq)(e);return void 0!==n[r]&&n[r]>(0,u.f0d)()||(delete n[r],!1)}})}return e.__ieDyn=1,e}();function Ze(e){var t,n=Math.floor(1200*Math.random())+2400;return t=Math.pow(2,e)*n,Math.min(t,6e5)}var et,tt=2e6,nt=Math.min(tt,65e3),rt="metadata",it="f",ot=/\./,st=function(){function e(t,n,r,i,o,s){var d="data",h="baseData",f=!!i,p=!0,g=n,m={},v=!!s,y=o||c.Go;(0,a.A)(e,this,function(e){function n(e,t,i,o,s,a,l){(0,u.zav)(e,function(e,d){var h=null;if(d||(0,c.yD)(d)){var p=i,v=e,y=s,w=t;if(f&&!o&&ot.test(e)){var I=e.split("."),A=I.length;if(A>1){y&&(y=y.slice());for(var S=0;S<A-1;S++){var C=I[S];w=w[C]=w[C]||{},p+="."+C,y&&y.push(C)}v=I[A-1]}}var _=o&&function(e){var t=m[e];return void 0===t&&(e.length>=7&&(t=(0,u.tGl)(e,"ext.metadata")||(0,u.tGl)(e,"ext.web")),m[e]=t),t}(p);if(h=!_&&g&&g.handleField(p,v)?g.value(p,v,d,r):(0,c.TC)(v,d,r)){var E=h.value;if(w[v]=E,a&&a(y,v,h),l&&"object"==typeof E&&!(0,u.cyL)(E)){var T=y;T&&(T=T.slice()).push(v),n(d,E,p+"."+v,o,T,a,l)}}}})}e.createPayload=function(e,t,n,r,i,o){return{apiKeys:[],payloadBlob:I,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:e,isTeardown:t,isSync:n,isBeacon:r,sendType:o,sendReason:i}},e.appendPayload=function(n,r,i){var o=n&&r&&!n.overflow;return o&&(0,l.r2)(t,function(){return"Serializer:appendPayload"},function(){for(var t=r.events(),o=n.payloadBlob,s=n.numEvents,a=!1,c=[],l=[],d=n.isBeacon,h=d?65e3:3984588,f=d?nt:tt,p=0,g=0;p<t.length;){var m=t[p];if(m){if(s>=i){n.overflow=r.split(p);break}var v=e.getEventBlob(m);if(v&&v.length<=f){var y=v.length;if(o.length+y>h){n.overflow=r.split(p);break}o&&(o+="\n"),o+=v,++g>20&&((0,u.hKY)(o,0,1),g=0),a=!0,s++}else v?c.push(m):l.push(m),t.splice(p,1),p--}p++}if(c.length>0&&n.sizeExceed.push(Ge.create(r.iKey(),c)),l.length>0&&n.failedEvts.push(Ge.create(r.iKey(),l)),a){n.batches.push(r),n.payloadBlob=o,n.numEvents=s;var w=r.iKey();-1===(0,u.rDm)(n.apiKeys,w)&&n.apiKeys.push(w)}},function(){return{payload:n,theBatch:{iKey:r.iKey(),evts:r.events()},max:i}}),o},e.getEventBlob=function(e){try{return(0,l.r2)(t,function(){return"Serializer.getEventBlob"},function(){var t={};t.name=e.name,t.time=e.time,t.ver=e.ver,t.iKey="o:"+(0,c.EO)(e.iKey);var r,i={};v||(r=function(e,t,n){!function(e,t,n,r,i){if(i&&t){var o=e(i.value,i.kind,i.propertyType);if(o>-1){var s=t[rt];s||(s=t[rt]={f:{}});var a=s[it];if(a||(a=s[it]={}),n)for(var c=0;c<n.length;c++){var l=n[c];a[l]||(a[l]={f:{}});var d=a[l][it];d||(d=a[l][it]={}),a=d}a=a[r]={},(0,u.cyL)(i.value)?a.a={t:o}:a.t=o}}}(y,i,e,t,n)});var o=e.ext;o&&(t.ext=i,(0,u.zav)(o,function(e,t){n(t,i[e]={},"ext."+e,!0,null,null,!0)}));var s=t[d]={};s.baseType=e.baseType;var a=s[h]={};return n(e.baseData,a,h,!1,[h],r,p),n(e.data,s,d,!1,[],r,p),JSON.stringify(t)},function(){return{item:e}})}catch(e){return null}}})}return e.__ieDyn=1,e}();function at(e,t){return{set:function(n,r){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return(0,u.vKV)([e,t],n,r,i)}}}var ct="sendAttempt",ut="?cors=true&"+T[Q]()+"="+_,lt=((et={})[1]=S,et[100]=S,et[200]="sent",et[8004]=A,et[8003]=A,et),dt={},ht={};function ft(e,t,n){dt[e]=t,!1!==n&&(ht[t]=e)}function pt(e,t){var n=!1;if(e&&t){var r=(0,u.cGk)(e);if(r&&r[$]>0)for(var i=t[Q](),o=0;o<r[$];o++){var s=r[o];if(s&&(0,u.v0u)(t,s)&&s[Q]()===i){n=!0;break}}}return n}function gt(e,t,n,r){t&&n&&n[$]>0&&(r&&dt[t]?(e[J][dt[t]]=n,e[Z]=!0):e.url+="&"+t+"="+n)}ft(M,M,!1),ft(b,b),ft(k,"Client-Id"),ft(O,O),ft(P,P),ft(R,R),ft(D,D);var mt=function(){function e(t,n,r,i){var o,s,d,h,p,m,y,w,S,M,N,D,L,U,Q,qe,Fe,He,Be,je,$e,ze,Ve,Ke,et,tt,nt,rt,it,ot,dt,ft,mt=!1;(0,a.A)(e,this,function(e){function a(e,t){try{return dt&&dt.getSenderInst(e,t)}catch(e){}return null}function vt(){try{return{enableSendPromise:!1,isOneDs:!0,disableCredentials:!1,fetchCredentials:ft,disableXhr:!1,disableBeacon:!mt,disableBeaconSync:!mt,disableFetchKeepAlive:$e,timeWrapper:it,addNoResponse:Ve,senderOnCompleteCallBack:{xdrOnComplete:yt,fetchOnComplete:wt,xhrOnComplete:It,beaconOnRetry:St}}}catch(e){}return null}function yt(e,t,n){var r=(0,g.Lo)(e);At(t,200,{},r),Dt(r)}function wt(e,t,n,r){var i={},o=e[me];o&&o.forEach(function(e,t){i[t]=e}),function(e,n,r){At(t,e,n,r),Dt(r)}(e.status,i,n||I)}function It(e,t,n){var r=(0,g.Lo)(e);At(t,e.status,(0,g.w3)(e,!0),r),Dt(r)}function At(e,t,n,r){try{e(t,n,r)}catch(e){(0,v.ZP)(y,2,518,(0,u.mmD)(e))}}function St(e,t,n){var r=200,i=e[ve],o=e[ye]+(Ve?"&NoResponseBody=true":I);try{var s=(0,u.w3n)();if(i){var a=!!S.getPlugin("LocalStorage"),c=[],l=[];(0,u.Iuo)(i[we],function(e){if(c&&e&&e[K]()>0)for(var t=e[G](),n=0;n<t[$];n++){if(!s.sendBeacon(o,U.getEventBlob(t[n]))){c[W](e[X](n));break}l[W](e[n])}else c[W](e[X](0))}),l[$]>0&&(i.sentEvts=l),a||xt(c,8003,i[Ie],!0)}else r=0}catch(e){(0,v.OG)(y,"Failed to send telemetry using sendBeacon API. Ex:"+(0,u.mmD)(e)),r=0}finally{At(t,r,{},I)}}function Ct(e){return 2===e||3===e}function _t(e){return Fe&&Ct(e)&&(e=2),e}function Et(){return!d&&p<n}function Tt(){var e=L;return L=[],e}function bt(e,t,n){var r=!1;return e&&e[$]>0&&!d&&w[t]&&U&&(r=0!==t||Et()&&(n>0||h[q]())),r}function kt(e){var t={};return e&&(0,u.Iuo)(e,function(e,n){t[n]={iKey:e[V](),evts:e[G]()}}),t}function Pt(e,n,r,i,o){if(e&&0!==e[$])if(d)xt(e,1,i);else{i=_t(i);try{var a=e,h=0!==i;(0,l.r2)(S,function(){return"HttpManager:_sendBatches"},function(a){a&&(e=e.slice(0));for(var u=[],l=null,d=(0,c.WB)(),f=w[i]||(h?w[1]:w[0]),p=f&&f[ke],g=ze&&(Fe||Ct(i)||3===p||f._isSync&&2===p);bt(e,i,n);){var m=e.shift();m&&m[K]()>0&&(s.isTenantKilled(m[V]())?u[W](m):(l=l||U[fe](n,r,h,g,o,i),U.appendPayload(l,m,t)?null!==l.overflow&&(e=[l.overflow][z](e),l.overflow=null,Mt(l,d,(0,c.WB)(),o),d=(0,c.WB)(),l=null):(Mt(l,d,(0,c.WB)(),o),d=(0,c.WB)(),e=[m][z](e),l=null)))}l&&Mt(l,d,(0,c.WB)(),o),e[$]>0&&(L=e[z](L)),xt(u,8004,i)},function(){return{batches:kt(a),retryCount:n,isTeardown:r,isSynchronous:h,sendReason:o,useSendBeacon:Ct(i),sendType:i}},!h)}catch(e){(0,v.ZP)(y,2,48,"Unexpected Exception sending batch: "+(0,u.mmD)(e))}}}function Rt(e,t){var n={url:o,hdrs:{},useHdrs:!1};t?(n[J]=(0,c.X$)(n[J],D),n.useHdrs=(0,u.cGk)(n.hdrs)[$]>0):(0,u.zav)(D,function(e,t){ht[e]?gt(n,ht[e],t,!1):(n[J][e]=t,n[Z]=!0)}),gt(n,k,"NO_AUTH",t),gt(n,b,c.xE,t);var r=I;(0,u.Iuo)(e.apiKeys,function(e){r[$]>0&&(r+=","),r+=e}),gt(n,O,r,t),gt(n,R,(0,u.f0d)().toString(),t);var i=function(e){for(var t=0;t<e.batches[$];t++){var n=e[we][t].Msfpc();if(n)return encodeURIComponent(n)}return I}(e);if((0,c.yD)(i)&&(n.url+="&ext.intweb.msfpc="+i),h[H]()&&gt(n,P,h[B](),t),S[Pe]){var s=S[Pe]();s>=0&&(n.url+="&w="+s)}for(var a=0;a<N[$];a++)n.url+="&"+N[a].name+"="+N[a].value;return n}function Ot(e,t,n){e[t]=e[t]||{},e[t][m.identifier]=n}function Mt(t,n,i,o){if(t&&t.payloadBlob&&t.payloadBlob[$]>0){var a=!!et,d=w[t.sendType];!Ct(t[Ie])&&t[Re]&&2===t.sendReason&&(d=w[2]||w[3]||d);var f=He;(t.isBeacon||3===d[ke])&&(f=!1);var g=Rt(t,f);f=f||g[Z];var I=(0,c.WB)();(0,l.r2)(S,function(){return"HttpManager:_doPayloadSend"},function(){for(var w=0;w<t.batches[$];w++)for(var A=t[we][w][G](),b=0;b<A[$];b++){var k=A[b];if(Q){var P=k[Oe]=k[Oe]||{};Ot(P,"sendEventStart",I),Ot(P,"serializationStart",n),Ot(P,"serializationCompleted",i)}k[ct]>0?k[ct]++:k[ct]=1}xt(t[we],1e3+(o||0),t[Ie],!0);var R={data:t[ge],urlString:g.url,headers:g[J],_thePayload:t,_sendReason:o,timeout:Be,disableXhrSync:je,disableFetchKeepAlive:$e};f&&(pt(R[me],E)||(R[me][E]=C),pt(R[me],T)||(R[me][T]=_));var O=null;d&&(O=function(n){h[F]();var i=function(n,i){!function(t,n,i,o){var a,l=9e3,d=null,f=!1,g=!1;try{var v=!0;if(typeof t!==Ye.bA){if(n){h[j](n["time-delta-millis"]);var y=n["kill-duration"]||n["kill-duration-seconds"];(0,u.Iuo)(s[Le](n["kill-tokens"],y),function(e){(0,u.Iuo)(i[we],function(t){if(t[V]()===e){d=d||[];var n=t[X](0);i.numEvents-=n[K](),d[W](n)}})})}if(200==t||204==t)return void(l=200);((a=t)>=300&&a<500&&429!=a||501==a||505==a||i.numEvents<=0)&&(v=!1),l=9e3+t%1e3}if(v){l=100;var w=i.retryCnt;0===i[Ie]&&(w<r?(f=!0,Nt(function(){0===i[Ie]&&p--,Pt(i[we],w+1,i[Me],Fe?2:i[Ie],5)},Fe,Ze(w))):(g=!0,Fe&&(l=8001)))}}finally{f||(h[j](),function(t,n,r,i){try{i&&m[Ue]();var o=t[we];200===n&&(o=t.sentEvts||t[we],i||t[Ne]||m._clearBackOff(),function(e){if(Q){var t=(0,c.WB)();(0,u.Iuo)(e,function(e){e&&e[K]()>0&&function(e,t){Q&&(0,u.Iuo)(e,function(e){Ot(e[Oe]=e[Oe]||{},"sendEventCompleted",t)})}(e[G](),t)})}}(o)),xt(o,n,t[Ie],!0)}finally{0===t[Ie]&&(p--,5!==r&&e.sendQueuedRequests(t[Ie],r))}}(i,l,o,g)),xt(d,8004,i[Ie])}}(n,i,t,o)},a=t[Me]||t[Ne];try{d.sendPOST(n,i,a),tt&&tt(R,n,a,t[Re])}catch(e){(0,v.OG)(y,"Unexpected exception sending payload. Ex:"+(0,u.mmD)(e)),At(i,0,{})}}),(0,l.r2)(S,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(O)if(0===t[Ie]&&p++,a&&!t.isBeacon&&3!==d[ke]){var e={data:R[De],urlString:R[ye],headers:(0,c.X$)({},R[me]),timeout:R.timeout,disableXhrSync:R[se],disableFetchKeepAlive:R[ae]},n=!1;(0,l.r2)(S,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{et(e,function(e){n=!0,M||e[ve]||(e[ve]=e[ve]||R[ve],e[xe]=e[xe]||R[xe]),O(e)},t.isSync||t[Me])}catch(e){n||O(R)}})}else O(R)})},function(){return{thePayload:t,serializationStart:n,serializationCompleted:i,sendReason:o}},t[Ne])}t.sizeExceed&&t.sizeExceed[$]>0&&xt(t.sizeExceed,8003,t[Ie]),t.failedEvts&&t.failedEvts[$]>0&&xt(t.failedEvts,8002,t[Ie])}function Nt(e,t,n){t?e():it.set(e,n)}function Dt(e){var t=nt;try{for(var n=0;n<t[$];n++)try{t[n](e)}catch(e){(0,v.ZP)(y,1,519,"Response handler failed: "+e)}if(e){var r=JSON.parse(e);(0,c.yD)(r.webResult)&&(0,c.yD)(r.webResult[x])&&qe.set("MSFPC",r.webResult[x],31536e3)}}catch(e){}}function xt(e,t,n,r){if(e&&e[$]>0&&i){var o=i[(a=t,u=lt[a],(0,c.yD)(u)||(u="oth",a>=9e3&&a<=9999?u="rspFail":a>=8e3&&a<=8999?u=A:a>=1e3&&a<=1999&&(u="send")),u)];if(o){var s=0!==n;(0,l.r2)(S,function(){return"HttpManager:_sendBatchesNotification"},function(){Nt(function(){try{o.call(i,e,t,s,n)}catch(e){(0,v.ZP)(y,1,74,"send request notification failed: "+e)}},r||s,0)},function(){return{batches:kt(e),reason:t,isSync:s,sendSync:r,sendType:n}},!s)}}var a,u}!function(){var e;o=null,s=new Je,d=!1,h=new Qe,mt=!1,p=0,m=null,y=null,w=null,S=null,M=!0,N=[],D={},L=[],U=null,Q=!1,qe=null,Fe=!1,He=!1,Be=e,je=e,$e=e,ze=e,Ve=e,Ke=[],et=e,tt=e,nt=[],rt=!1,it=at(),ot=!1,dt=null}(),e[ee]=function(e,t,n){rt||(S=t,qe=t.getCookieMgr(),y=(m=n).diagLog(),(0,u.Yny)(Ke,(0,f.a)(e,function(e){var r,i=e.cfg,s=e.cfg.extensionConfig[n.identifier];it=at(s[te],s[ne]),(0,c.yD)(i.anonCookieName)?function(e,t,n){for(var r=0;r<e[$];r++)if(e[r].name===t)return void(e[r].value=n);e[W]({name:t,value:n})}(N,"anoncknm",i.anonCookieName):function(e){for(var t=0;t<e[$];t++)if("anoncknm"===e[t].name)return void e[Y](t,1)}(N),et=s.payloadPreprocessor,tt=s.payloadListener;var l=s.httpXHROverride,d=s[re]?s[re]:i.endpointUrl;o=d+ut,He=!!(0,u.b07)(s[ie])||!s[ie],Q=!s.disableEventTimings;var h=s.valueSanitizer,f=s.stringifyObjects,p=!!i[oe];(0,u.b07)(s[oe])||(p=!!s[oe]),Be=s.xhrTimeout,je=!!s[se],$e=!!s[ae],Ve=!1!==s.addNoResponse,ot=!!s.excludeCsMetaData,t.getPlugin("LocalStorage")&&($e=!0),mt=!(0,We.lV)(),U=new st(S,h,f,p,c.Go,ot),(0,u.hXl)(s[ce])||(mt=!!s[ce]),s[ue]&&(ft=s[ue]);var m=vt();dt?dt.SetConfig(m):(dt=new Xe.v)[ee](m,y);var I=l,A=s[le]?l:null,C=s[le]?l:null,_=[3,2];if(!l){M=!1;var E=[];(0,We.lV)()?(E=[2,1],_=[2,1,3]):E=[1,2,3],(l=a(E=(0,g.jL)(E,s.transports),!1))||(0,v.OG)(y,"No available transport to send events"),I=a(E,!0)}A||(A=a(_=(0,g.jL)(_,s.unloadTransports),!0)),ze=!M&&(mt&&(0,We.Uf)()||!$e&&(0,We.R7)(!0)),(r={})[0]=l,r[1]=I||a([1,2,3],!0),r[2]=A||I||a([1],!0),r[3]=C||a([2,3],!0)||I||a([1],!0),w=r})),rt=!0)},e.addResponseHandler=function(e){return nt[W](e),{rm:function(){var t=nt.indexOf(e);t>=0&&nt[Y](t,1)}}},e[de]=function(e){try{if(U)return U.getEventBlob(e)}catch(e){}return I},e[he]=function(){try{return Rt(U&&U[fe](0,!1,!1,!1,1,0),He)}catch(e){}return null},e[pe]=function(e,n){try{var r=[];(0,u.Iuo)(e,function(e){n&&(e=(0,g.hW)(e));var t=Ge.create(e[V],[e]);r[W](t)});for(var i=null;r[$]>0&&U;){var o=r.shift();o&&o[K]()>0&&(i=i||U[fe](0,!1,!1,!1,1,0),U.appendPayload(i,o,t))}var s=Rt(i,He),a={data:i[ge],urlString:s.url,headers:s[J],timeout:Be,disableXhrSync:je,disableFetchKeepAlive:$e};return He&&(pt(a[me],E)||(a[me][E]=C),pt(a[me],T)||(a[me][T]=_)),a}catch(e){}return null},e._getDbgPlgTargets=function(){return[w[0],s,U,w,vt(),o]},e[Ae]=function(e,t){D[e]=t},e.removeHeader=function(e){delete D[e]},e[Se]=function(){return Et()&&h[q]()},e[Ce]=function(e,t){(0,u.b07)(e)&&(e=0),Fe&&(e=_t(e),t=2),bt(L,e,0)&&Pt(Tt(),0,!1,e,t||0)},e[_e]=function(){return!d&&0===p&&0===L[$]},e[Ee]=function(e){Fe=e},e.addBatch=function(e){if(e&&e[K]()>0){if(s.isTenantKilled(e[V]()))return!1;L[W](e)}return!0},e.teardown=function(){L[$]>0&&Pt(Tt(),0,!0,2,2),(0,u.Iuo)(Ke,function(e){e&&e.rm&&e.rm()}),Ke=[]},e.pause=function(){d=!0},e[Te]=function(){d=!1,e[Ce](0,4)},e[be]=function(e,t,n){e&&e[K]()>0&&((0,u.hXl)(t)&&(t=1),Fe&&(t=_t(t),n=2),Pt([e],0,!1,t,n||0))}})}return e.__ieDyn=1,e}(),vt=1e4,yt="eventsDiscarded",wt=void 0,It=(0,u.ZHX)({eventsLimitInMem:{isVal:c.ei,v:vt},immediateEventLimit:{isVal:c.ei,v:500},autoFlushEventsLimit:{isVal:c.ei,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:function(e){return e&&e.sendPOST},v:wt},overrideInstrumentationKey:wt,overrideEndpointUrl:wt,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:wt,clearTimeoutOverride:wt,payloadPreprocessor:wt,payloadListener:wt,disableEventTimings:wt,valueSanitizer:wt,stringifyObjects:wt,enableCompoundKey:wt,disableOptimizeObj:!1,fetchCredentials:wt,transports:wt,unloadTransports:wt,useSendBeacon:wt,disableFetchKeepAlive:wt,avoidOptions:!1,xhrTimeout:wt,disableXhrSync:wt,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:u.EtT,v:6},maxUnloadEventRetryAttempts:{isVal:u.EtT,v:2},addNoResponse:wt,excludeCsMetaData:wt}),At=function(e){function t(){var n,s=e.call(this)||this;s.identifier="PostChannel",s.priority=1011,s.version="4.3.4";var y,I,A,S,C,_,E,T,b,k,P,R,O,D,x,q,F,H,B,j,Q,J,Z,re,ie,oe=!1,se=[],ae=!1,ce=0,ue=0,le={},fe=r;return(0,a.A)(t,s,function(e,t){function s(){(0,d.Ds)(null,H),(0,d.sq)(null,H),(0,d.vF)(null,H)}function a(e){var t="";return e&&e[$]&&(0,u.Iuo)(e,function(e){t&&(t+="\n"),t+=e}),t}function ge(e){var t="";try{ye(e),t=T[de](e)}catch(e){}return t}function me(e){"beforeunload"!==(e||(0,u.zkX)().event).type&&(x=!0,T[Ee](x)),Le(2,2)}function ve(e){x=!1,T[Ee](x)}function ye(e){e.ext&&e.ext[L]&&delete e.ext[L],e.ext&&e.ext[U]&&e.ext[U].id&&delete e.ext[U].id,D&&(e.ext=(0,g.hW)(e.ext),e[Be]&&(e[Be]=(0,g.hW)(e[Be])),e[De]&&(e[De]=(0,g.hW)(e[De])))}function Ie(e,t){if(e[je]||(e[je]=0),e[$e]||(e[$e]=1),ye(e),e[ze])if(_||ae)e[$e]=3,e[ze]=!1;else if(T)return D&&(e=(0,g.hW)(e)),void T[be](Ge.create(e[V],[e]),!0===e[ze]?1:e[ze],3);var n=e[$e],r=ue,i=A;4===n&&(r=ce,i=I);var o=!1;if(r<i)o=!We(e,t);else{var s=1,a=20;4===n&&(s=4,a=1),o=!0,function(e,t,n,r){for(;n<=t;){var i=Ve(e,t,!0);if(i&&i[K]()>0){var o=i[X](0,r),s=o[K]();if(s>0)return 4===n?ce-=s:ue-=s,it(yt,[o],m.x.QueueFull),!0}n++}return Xe(),!1}(e[V],e[$e],s,a)&&(o=!We(e,t))}o&&rt(yt,[e],m.x.QueueFull)}function ke(e,t,n){var r=Ye(e,t,n);return T[Ce](t,n),r}function Re(){return ue>0}function Oe(){if(R>=0&&Ye(R,0,O)&&T[Ce](0,O),ce>0&&!C&&!ae){var e=le[fe][2];e>=0&&(C=Ne(function(){C=null,ke(4,0,1),Oe()},e))}var t=le[fe][1];!S&&!y&&t>=0&&!ae&&(Re()?S=Ne(function(){S=null,ke(0===E?3:1,0,1),E++,E%=2,Oe()},t):E=0)}function Me(){n=null,oe=!1,se=[],y=null,ae=!1,ce=0,I=500,ue=0,A=vt,le={},fe=r,S=null,C=null,_=0,E=0,b={},k=0,Z=!1,P=0,R=-1,O=null,D=!0,x=!1,q=6,F=2,H=null,re=null,ie=!1,B=at(),T=new mt(500,2,1,{requeue:tt,send:ot,sent:st,drop:ct,rspFail:ut,oth:lt}),et(),b[4]={batches:[],iKeyMap:{}},b[3]={batches:[],iKeyMap:{}},b[2]={batches:[],iKeyMap:{}},b[1]={batches:[],iKeyMap:{}},dt()}function Ne(e,t){0===t&&_&&(t=1);var n=1e3;return _&&(n=Ze(_-1)),B.set(e,t*n)}function xe(){return null!==S&&(S.cancel(),S=null,E=0,!0)}function Le(e,t){xe(),y&&(y.cancel(),y=null),ae||ke(1,e,t)}function Ve(e,t,n){var r=b[t];r||(r=b[t=1]);var i=r.iKeyMap[e];return!i&&n&&(i=Ge.create(e),r.batches[W](i),r.iKeyMap[e]=i),i}function Ke(t,n){T[Se]()&&!_&&(k>0&&ue>k&&(n=!0),n&&null==y&&e.flush(t,function(){},20))}function We(e,t){D&&(e=(0,g.hW)(e));var n=e[$e],r=Ve(e[V],n,!0);return!!r.addEvent(e)&&(4!==n?(ue++,t&&0===e[je]&&Ke(!e.sync,P>0&&r[K]()>=P)):ce++,!0)}function Xe(){for(var e=0,t=0,n=function(n){var r=b[n];r&&r[we]&&(0,u.Iuo)(r[we],function(r){4===n?e+=r[K]():t+=r[K]()})},r=1;r<=4;r++)n(r);ue=t,ce=e}function Ye(t,n,r){var i=!1,o=0===n;return!o||T[Se]()?(0,l.r2)(e.core,function(){return"PostChannel._queueBatches"},function(){for(var e=[],n=4;n>=t;){var r=b[n];r&&r.batches&&r.batches[$]>0&&((0,u.Iuo)(r[we],function(t){T.addBatch(t)?i=i||t&&t[K]()>0:e=e[z](t[G]()),4===n?ce-=t[K]():ue-=t[K]()}),r[we]=[],r.iKeyMap={}),n--}e[$]>0&&rt(yt,e,m.x.KillSwitch),i&&R>=t&&(R=-1,O=0)},function(){return{latency:t,sendType:n,sendReason:r}},!o):(R=R>=0?Math.min(R,t):t,O=Math.max(O,r)),i}function Qe(e,t){ke(1,0,t),Xe(),Je(function(){e&&e(),se[$]>0?y=Ne(function(){y=null,Qe(se.shift(),t)},0):(y=null,Oe())})}function Je(e){T[_e]()?e():y=Ne(function(){y=null,Je(e)},.25)}function et(){(le={})[r]=[2,1,0],le[i]=[6,3,0],le[o]=[18,9,0]}function tt(t,n){var r=[],i=q;x&&(i=F),(0,u.Iuo)(t,function(t){t&&t[K]()>0&&(0,u.Iuo)(t[G](),function(t){t&&(t[ze]&&(t[$e]=4,t[ze]=!1),t[je]<i?((0,c.u9)(t,e[qe]),Ie(t,!1)):r[W](t))})}),r[$]>0&&rt(yt,r,m.x.NonRetryableStatus),x&&Le(2,2)}function nt(t,n){var r=J||{},i=r[t];if(i)try{i.apply(r,n)}catch(n){(0,v.ZP)(e.diagLog(),1,74,t+" notification failed: "+n)}}function rt(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t&&t[$]>0&&nt(e,[t][z](n))}function it(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t&&t[$]>0&&(0,u.Iuo)(t,function(t){t&&t[K]()>0&&nt(e,[t.events()][z](n))})}function ot(e,t,n){e&&e[$]>0&&nt("eventsSendRequest",[t>=1e3&&t<=1999?t-1e3:0,!0!==n])}function st(e,t){it("eventsSent",e,t),Oe()}function ct(e,t){it(yt,e,t>=8e3&&t<=8999?t-8e3:m.x.Unknown)}function ut(e){it(yt,e,m.x.NonRetryableStatus),Oe()}function lt(e,t){it(yt,e,m.x.Unknown),Oe()}function dt(){P=Q?0:Math.max(1500,A/6)}Me(),e._getDbgPlgTargets=function(){return[T,n]},e[ee]=function(r,i,o){(0,l.r2)(i,function(){return"PostChannel:initialize"},function(){t[ee](r,i,o),J=i.getNotifyMgr();try{H=(0,d.Hm)((0,h.Z)(e[qe]),i.evtNamespace&&i.evtNamespace()),e._addHook((0,f.a)(r,function(t){var r=t.cfg,o=(0,p.i8)(null,r,i);n=o.getExtCfg(e[qe],It),B=at(n[te],n[ne]),D=!n.disableOptimizeObj&&(0,c.F2)(),j=n.ignoreMc1Ms0CookieProcessing,function(e){var t=e[Pe];e[Pe]=function(){var n=0;return j&&(n|=2),n|t.call(e)}}(i),A=n[Fe],I=n.immediateEventLimit,k=n[He],q=n.maxEventRetryAttempts,F=n.maxUnloadEventRetryAttempts,Q=n.disableAutoBatchFlushLimit,(0,u.$XS)(r.endpointUrl)?e.pause():ae&&e[Te](),dt(),re=n.overrideInstrumentationKey,ie=!!n.disableTelemetry,Z&&s();var a=r.disablePageUnloadEvents||[];Z=(0,d.ee)(me,a,H),Z=(0,d.Fc)(me,a,H)||Z,Z=(0,d.oS)(ve,r.disablePageShowEvents,H)||Z})),T[ee](r,e.core,e)}catch(t){throw e.setInitialized(!1),t}},function(){return{theConfig:r,core:i,extensions:o}})},e.processTelemetry=function(t,n){(0,c.u9)(t,e[qe]),n=n||e._getTelCtx(n);var r=t;ie||oe||(re&&(r[V]=re),Ie(r,!0),x?Le(2,2):Oe()),e.processNext(r,n)},e.getOfflineSupport=function(){try{var e=T&&T[he]();if(T)return{getUrl:function(){return e?e.url:null},serialize:ge,batch:a,shouldProcess:function(e){return!ie},createPayload:function(e){return null},createOneDSPayload:function(e){if(T[pe])return T[pe](e,D)}}}catch(e){}return null},e._doTeardown=function(e,t){Le(2,2),oe=!0,T.teardown(),s(),Me()},e.setEventQueueLimits=function(e,t){n[Fe]=A=(0,c.ei)(e)?e:vt,n[He]=k=(0,c.ei)(t)?t:0,dt();var r=ue>e;if(!r&&P>0)for(var i=1;!r&&i<=3;i++){var o=b[i];o&&o[we]&&(0,u.Iuo)(o[we],function(e){e&&e[K]()>=P&&(r=!0)})}Ke(!0,r)},e.pause=function(){xe(),ae=!0,T&&T.pause()},e[Te]=function(){ae=!1,T&&T[Te](),Oe()},e._loadTransmitProfiles=function(e){xe(),et(),fe=r,Oe(),(0,u.zav)(e,function(e,t){var n=t[$];if(n>=2){var r=n>2?t[2]:0;if(t[Y](0,n-2),t[1]<0&&(t[0]=-1),t[1]>0&&t[0]>0){var i=t[0]/t[1];t[0]=Math.ceil(i)*t[1]}r>=0&&t[1]>=0&&r>t[1]&&(r=t[1]),t[W](r),le[e]=t}})},e.flush=function(e,t,n){var r;if(void 0===e&&(e=!0),!ae)if(n=n||1,e)t||(r=(0,w.Qo)(function(e){t=e})),null==y?(xe(),Ye(1,0,n),y=Ne(function(){y=null,Qe(t,n)},0)):se[W](t);else{var i=xe();ke(1,1,n),t&&t(),i&&Oe()}return r},e.setMsaAuthTicket=function(e){T[Ae](M,e)},e.setAuthPluginHeader=function(e){T[Ae](N,e)},e.removeAuthPluginHeader=function(){T.removeHeader(N)},e.hasEvents=Re,e._setTransmitProfile=function(e){fe!==e&&void 0!==le[e]&&(xe(),fe=e,Oe())},(0,g.o$)(e,function(){return T},["addResponseHandler"]),e[Ue]=function(){_<4&&(_++,xe(),Oe())},e._clearBackOff=function(){_&&(_=0,xe(),Oe())}}),s}return(0,s.qU)(t,e),t.__ieDyn=1,t}(y.s)},8928:e=>{var t=1/0,n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,a=Object.prototype.toString;function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return"number"==typeof e&&e==function(e){var u=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==a.call(e)}(e))return NaN;if(c(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=c(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var u=i.test(e);return u||o.test(e)?s(e.slice(2),u?2:8):r.test(e)?NaN:+e}(e))===t||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),l=u%1;return u==u?l?u-l:u:0}(e)}},8948:(e,t,n)=>{var r=n(2861).Buffer,i=n(2203);function o(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=r.alloc(0),this;if("function"==typeof e.pipe)return this.buffer=r.alloc(0),e.pipe(this),this;if(e.length||"object"==typeof e)return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}n(9023).inherits(o,i),o.prototype.write=function(e){this.buffer=r.concat([this.buffer,r.from(e)]),this.emit("data",e)},o.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},e.exports=o},8969:(e,t,n)=>{"use strict";n.d(t,{d:()=>c,w:()=>u});var r,i,o=n(269),s=n(6182),a=n(3775);function c(e,t){r=e,i=t}function u(){var e=[];return{run:function(t){var n=e;e=[],(0,o.Iuo)(n,function(e){try{(e.rm||e.remove).call(e)}catch(e){(0,a.ZP)(t,2,73,"Unloading:"+(0,o.mmD)(e))}}),r&&n[s.oI]>r&&(i?i("doUnload",n):(0,a.ZP)(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected."))},add:function(t){t&&((0,o.Yny)(e,t),r&&e[s.oI]>r&&(i?i("Add",e):(0,a.ZP)(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected.")))}}}},8980:(e,t,n)=>{var r=n(1741),i=function(e,t){r.call(this,e),this.name="TokenExpiredError",this.expiredAt=t};(i.prototype=Object.create(r.prototype)).constructor=i,e.exports=i},9001:e=>{var t,n,r=Function.prototype,i=Object.prototype,o=r.toString,s=i.hasOwnProperty,a=o.call(Object),c=i.toString,u=(t=Object.getPrototypeOf,n=Object,function(e){return t(n(e))});e.exports=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=c.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=u(e);if(null===t)return!0;var n=s.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&o.call(n)==a}},9008:(e,t)=>{t.setPassword=()=>Promise.resolve(),t.getPassword=()=>Promise.resolve(),t.deletePassword=()=>Promise.resolve()},9020:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DataProtectionScope:()=>P,Environment:()=>D,FilePersistence:()=>E,FilePersistenceWithDataProtection:()=>R,KeychainPersistence:()=>M,LibSecretPersistence:()=>N,NativeBrokerPlugin:()=>yt,PersistenceCachePlugin:()=>y,PersistenceCreator:()=>x,StringUtils:()=>L});var r=n(9896);const i=require("process"),o="EEXIST",s="ENOENT",a="Dummy data to verify underlying persistence mechanism",c="HOME",u="LOGNAME",l="USER",d="LNAME",h="USERNAME",f="LOCALAPPDATA",p="unknown_error";class g extends Error{constructor(e,t){super(t?`${e}: ${t}`:e),Object.setPrototypeOf(this,g.prototype),this.errorCode=e,this.errorMessage=t,this.name="PersistenceError"}static createFileSystemError(e,t){return new g(e,t)}static createLibSecretError(e){return new g("GnomeKeyringError",e)}static createKeychainPersistenceError(e){return new g("KeychainError",e)}static createFilePersistenceWithDPAPIError(e){return new g("DPAPIEncryptedFileError",e)}static createCrossPlatformLockError(e){return new g("CrossPlatformLockError",e)}static createCachePersistenceError(e){return new g("CachePersistenceError",e)}static createNotSupportedError(e){return new g("NotSupportedError",e)}static createPersistenceNotVerifiedError(e){return new g("PersistenceNotVerifiedError",e)}static createPersistenceNotValidatedError(e){return new g("PersistenceNotValidatedError",e)}}const m=e=>!!e&&"object"==typeof e&&e.hasOwnProperty("code");class v{constructor(e,t,n){this.lockFilePath=e,this.retryNumber=n?n.retryNumber:500,this.retryDelay=n?n.retryDelay:100,this.logger=t}async lock(){for(let e=0;e<this.retryNumber;e++)try{return this.logger.info(`Pid ${i.pid} trying to acquire lock`),this.lockFileHandle=await r.promises.open(this.lockFilePath,"wx+"),this.logger.info(`Pid ${i.pid} acquired lock`),void await this.lockFileHandle.write(i.pid.toString())}catch(e){if(!m(e))throw e;if(e.code!==o&&"EPERM"!==e.code)throw this.logger.error(`${i.pid} was not able to acquire lock. Ran into error: ${e.message}`),g.createCrossPlatformLockError(e.message);this.logger.info(e.message),await this.sleep(this.retryDelay)}throw this.logger.error(`${i.pid} was not able to acquire lock. Exceeded amount of retries set in the options`),g.createCrossPlatformLockError("Not able to acquire lock. Exceeded amount of retries set in options")}async unlock(){try{this.lockFileHandle?(await r.promises.unlink(this.lockFilePath),await this.lockFileHandle.close(),this.logger.info("lockfile deleted")):this.logger.warning("lockfile handle does not exist, so lockfile could not be deleted")}catch(e){if(!m(e))throw e;if(e.code!==s)throw this.logger.error(`${i.pid} was not able to release lock. Ran into error: ${e.message}`),g.createCrossPlatformLockError(e.message);this.logger.info("Tried to unlock but lockfile does not exist")}}sleep(e){return new Promise(t=>{setTimeout(t,e)})}}class y{constructor(e,t){this.persistence=e,this.logger=e.getLogger(),this.lockFilePath=`${this.persistence.getFilePath()}.lockfile`,this.crossPlatformLock=new v(this.lockFilePath,this.logger,t),this.lastSync=0,this.currentCache=null}async beforeCacheAccess(e){if(this.logger.info("Executing before cache access"),await this.persistence.reloadNecessary(this.lastSync)||null===this.currentCache)try{this.logger.info(`Reload necessary. Last sync time: ${this.lastSync}`),await this.crossPlatformLock.lock(),this.currentCache=await this.persistence.load(),this.lastSync=(new Date).getTime(),this.currentCache?e.tokenCache.deserialize(this.currentCache):this.logger.info("Cache empty."),this.logger.info(`Last sync time updated to: ${this.lastSync}`)}finally{e.cacheHasChanged?this.logger.info(`Pid ${i.pid} beforeCacheAccess did not release lock`):(await this.crossPlatformLock.unlock(),this.logger.info(`Pid ${i.pid} released lock`))}else e.cacheHasChanged&&(this.logger.verbose("Cache context has changed"),await this.crossPlatformLock.lock())}async afterCacheAccess(e){this.logger.info("Executing after cache access");try{e.cacheHasChanged?(this.logger.info("Msal in-memory cache has changed. Writing changes to persistence"),this.currentCache=e.tokenCache.serialize(),await this.persistence.save(this.currentCache)):this.logger.info("Msal in-memory cache has not changed. Did not write to persistence")}finally{await this.crossPlatformLock.unlock(),this.logger.info(`Pid ${i.pid} afterCacheAccess released lock`)}}}var w=n(6928);class I{async verifyPersistence(){const e=await this.createForPersistenceValidation();try{await e.save(a);const t=await e.load();if(!t)throw g.createCachePersistenceError("Persistence check failed. Data was written but it could not be read. Possible cause: on Linux, LibSecret is installed but D-Bus isn't running                     because it cannot be started over SSH.");if(t!==a)throw g.createCachePersistenceError(`Persistence check failed. Data written ${a} is different                     from data read ${t}`);return await e.delete(),!0}catch(e){throw g.createCachePersistenceError(`Verifing persistence failed with the error: ${e}`)}}}const A="",S={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"};var C;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(C||(C={}));class _{constructor(e,t,n){this.level=C.Info;const r=e||_.createDefaultLoggerOptions();this.localCallback=r.loggerCallback||(()=>{}),this.piiLoggingEnabled=r.piiLoggingEnabled||!1,this.level="number"==typeof r.logLevel?r.logLevel:C.Info,this.correlationId=r.correlationId||A,this.packageName=t||A,this.packageVersion=n||A}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:C.Info}}clone(e,t,n){return new _({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const n=`[${(new Date).toUTCString()}] : [${t.correlationId||this.correlationId||""}] : ${this.packageName}@${this.packageVersion} : ${C[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,n,t.containsPii||!1)}executeCallback(e,t,n){this.localCallback&&this.localCallback(e,t,n)}error(e,t){this.logMessage(e,{logLevel:C.Error,containsPii:!1,correlationId:t||A})}errorPii(e,t){this.logMessage(e,{logLevel:C.Error,containsPii:!0,correlationId:t||A})}warning(e,t){this.logMessage(e,{logLevel:C.Warning,containsPii:!1,correlationId:t||A})}warningPii(e,t){this.logMessage(e,{logLevel:C.Warning,containsPii:!0,correlationId:t||A})}info(e,t){this.logMessage(e,{logLevel:C.Info,containsPii:!1,correlationId:t||A})}infoPii(e,t){this.logMessage(e,{logLevel:C.Info,containsPii:!0,correlationId:t||A})}verbose(e,t){this.logMessage(e,{logLevel:C.Verbose,containsPii:!1,correlationId:t||A})}verbosePii(e,t){this.logMessage(e,{logLevel:C.Verbose,containsPii:!0,correlationId:t||A})}trace(e,t){this.logMessage(e,{logLevel:C.Trace,containsPii:!1,correlationId:t||A})}tracePii(e,t){this.logMessage(e,{logLevel:C.Trace,containsPii:!0,correlationId:t||A})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}class E extends I{constructor(e,t){super(),this.logger=new _(t||E.createDefaultLoggerOptions()),this.filePath=e}static async create(e,t){const n=new E(e,t);return await n.createCacheFile(),n}async save(e){try{await r.promises.writeFile(this.getFilePath(),e,"utf-8")}catch(e){throw m(e)?g.createFileSystemError(e.code||p,e.message):e}}async saveBuffer(e){try{await r.promises.writeFile(this.getFilePath(),e)}catch(e){throw m(e)?g.createFileSystemError(e.code||p,e.message):e}}async load(){try{return await r.promises.readFile(this.getFilePath(),"utf-8")}catch(e){throw m(e)?g.createFileSystemError(e.code||p,e.message):e}}async loadBuffer(){try{return await r.promises.readFile(this.getFilePath())}catch(e){throw m(e)?g.createFileSystemError(e.code||p,e.message):e}}async delete(){try{return await r.promises.unlink(this.getFilePath()),!0}catch(e){if(m(e)){if(e.code===s)return this.logger.warning("Cache file does not exist, so it could not be deleted"),!1;throw g.createFileSystemError(e.code||p,e.message)}throw e}}getFilePath(){return this.filePath}async reloadNecessary(e){return e<await this.timeLastModified()}getLogger(){return this.logger}createForPersistenceValidation(){const e=`${(0,w.dirname)(this.filePath)}/test.cache`;return E.create(e)}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:C.Info}}async timeLastModified(){try{return(await r.promises.stat(this.filePath)).mtime.getTime()}catch(e){if(m(e)){if(e.code===s)return this.logger.verbose("Cache file does not exist"),0;throw g.createFileSystemError(e.code||p,e.message)}throw e}}async createCacheFile(){await this.createFileDirectory();const e=await r.promises.open(this.filePath,"a");await e.close(),this.logger.info(`File created at ${this.filePath}`)}async createFileDirectory(){try{await r.promises.mkdir((0,w.dirname)(this.filePath),{recursive:!0})}catch(e){if(!m(e))throw e;if(e.code!==o)throw g.createFileSystemError(e.code||p,e.message);this.logger.info(`Directory ${(0,w.dirname)(this.filePath)}  already exists`)}}}const T=require("module");class b{constructor(e){this.errorMessage=e}protectData(){throw new Error(this.errorMessage)}unprotectData(){throw new Error(this.errorMessage)}}let k;if("win32"!==process.platform)k=new b("Dpapi is not supported on this platform");else{const e="undefined"!=typeof require?require:(0,T.createRequire)("file:///mnt/vss/_work/1/s/extensions/microsoft-authentication/node_modules/@azure/msal-node-extensions/dist/Dpapi.mjs");try{k=e(`../bin/${process.arch}/dpapi`)}catch(e){k=new b("Dpapi bindings unavailable")}}const P={CurrentUser:"CurrentUser",LocalMachine:"LocalMachine"};class R extends I{constructor(e,t,n){super(),this.scope=t,this.optionalEntropy=n?Buffer.from(n,"utf-8"):null,this.filePersistence=e}static async create(e,t,n,r){const i=await E.create(e,r);return new R(i,t,n)}async save(e){try{const t=k.protectData(Buffer.from(e,"utf-8"),this.optionalEntropy,this.scope.toString());await this.filePersistence.saveBuffer(t)}catch(e){throw m(e)?g.createFilePersistenceWithDPAPIError(e.message):e}}async load(){try{const e=await this.filePersistence.loadBuffer();return void 0!==e&&e&&0!==e.length?k.unprotectData(e,this.optionalEntropy,this.scope.toString()).toString():(this.filePersistence.getLogger().info("Encrypted contents loaded from file were null or empty"),null)}catch(e){throw m(e)?g.createFilePersistenceWithDPAPIError(e.message):e}}async delete(){return this.filePersistence.delete()}async reloadNecessary(e){return this.filePersistence.reloadNecessary(e)}getFilePath(){return this.filePersistence.getFilePath()}getLogger(){return this.filePersistence.getLogger()}createForPersistenceValidation(){const e=`${(0,w.dirname)(this.filePersistence.getFilePath())}/test.cache`;return R.create(e,P.CurrentUser)}}var O=n(9008);class M extends I{constructor(e,t,n){super(),this.filePersistence=e,this.serviceName=t,this.accountName=n}static async create(e,t,n,r){const i=await E.create(e,r);return new M(i,t,n)}async save(e){try{await O.setPassword(this.serviceName,this.accountName,e)}catch(e){throw m(e)?g.createKeychainPersistenceError(e.message):e}await this.filePersistence.save("{}")}async load(){try{return await O.getPassword(this.serviceName,this.accountName)}catch(e){throw m(e)?g.createKeychainPersistenceError(e.message):e}}async delete(){try{return await this.filePersistence.delete(),await O.deletePassword(this.serviceName,this.accountName)}catch(e){throw m(e)?g.createKeychainPersistenceError(e.message):e}}async reloadNecessary(e){return this.filePersistence.reloadNecessary(e)}getFilePath(){return this.filePersistence.getFilePath()}getLogger(){return this.filePersistence.getLogger()}createForPersistenceValidation(){const e=`${(0,w.dirname)(this.filePersistence.getFilePath())}/test.cache`;return M.create(e,"persistenceValidationServiceName","persistencValidationAccountName")}}class N extends I{constructor(e,t,n){super(),this.filePersistence=e,this.serviceName=t,this.accountName=n}static async create(e,t,n,r){const i=await E.create(e,r);return new N(i,t,n)}async save(e){try{await O.setPassword(this.serviceName,this.accountName,e)}catch(e){throw m(e)?g.createLibSecretError(e.message):e}await this.filePersistence.save("{}")}async load(){try{return await O.getPassword(this.serviceName,this.accountName)}catch(e){throw m(e)?g.createLibSecretError(e.message):e}}async delete(){try{return await this.filePersistence.delete(),await O.deletePassword(this.serviceName,this.accountName)}catch(e){throw m(e)?g.createLibSecretError(e.message):e}}async reloadNecessary(e){return this.filePersistence.reloadNecessary(e)}getFilePath(){return this.filePersistence.getFilePath()}getLogger(){return this.filePersistence.getLogger()}createForPersistenceValidation(){const e=`${(0,w.dirname)(this.filePersistence.getFilePath())}/test.cache`;return N.create(e,"persistenceValidationServiceName","persistencValidationAccountName")}}class D{static get homeEnvVar(){return this.getEnvironmentVariable(c)}static get lognameEnvVar(){return this.getEnvironmentVariable(u)}static get userEnvVar(){return this.getEnvironmentVariable(l)}static get lnameEnvVar(){return this.getEnvironmentVariable(d)}static get usernameEnvVar(){return this.getEnvironmentVariable(h)}static getEnvironmentVariable(e){return process.env[e]||""}static getEnvironmentPlatform(){return process.platform}static isWindowsPlatform(){return"win32"===this.getEnvironmentPlatform()}static isLinuxPlatform(){return"linux"===this.getEnvironmentPlatform()}static isMacPlatform(){return"darwin"===this.getEnvironmentPlatform()}static isLinuxRootUser(){return"function"==typeof process.getuid&&0===process.getuid()}static getUserRootDirectory(){return this.isWindowsPlatform()?this.getUserHomeDirOnWindows():this.getUserHomeDirOnUnix()}static getUserHomeDirOnWindows(){return this.getEnvironmentVariable(f)}static getUserHomeDirOnUnix(){if(this.isWindowsPlatform())throw g.createNotSupportedError("Getting the user home directory for unix is not supported in windows");if(this.homeEnvVar)return this.homeEnvVar;let e=null;if(this.lognameEnvVar?e=this.lognameEnvVar:this.userEnvVar?e=this.userEnvVar:this.lnameEnvVar?e=this.lnameEnvVar:this.usernameEnvVar&&(e=this.usernameEnvVar),this.isMacPlatform())return e?w.join("/Users",e):null;if(this.isLinuxPlatform())return this.isLinuxRootUser()?"/root":e?w.join("/home",e):null;throw g.createNotSupportedError("Getting the user home directory for unix is not supported in windows")}}class x{static async createPersistence(e){let t;if(D.isWindowsPlatform()){if(!e.cachePath||!e.dataProtectionScope)throw g.createPersistenceNotValidatedError("Cache path and/or data protection scope not provided for the FilePersistenceWithDataProtection cache plugin");t=await R.create(e.cachePath,P.CurrentUser,void 0,e.loggerOptions)}else if(D.isMacPlatform()){if(!e.cachePath||!e.serviceName||!e.accountName)throw g.createPersistenceNotValidatedError("Cache path, service name and/or account name not provided for the KeychainPersistence cache plugin");t=await M.create(e.cachePath,e.serviceName,e.accountName,e.loggerOptions)}else{if(!D.isLinuxPlatform())throw g.createNotSupportedError("The current environment is not supported by msal-node-extensions yet.");if(!e.cachePath||!e.serviceName||!e.accountName)throw g.createPersistenceNotValidatedError("Cache path, service name and/or account name not provided for the LibSecretPersistence cache plugin");t=await N.create(e.cachePath,e.serviceName,e.accountName,e.loggerOptions)}return await t.verifyPersistence().catch(async n=>{if(D.isLinuxPlatform()&&e.usePlaintextFileOnLinux){if(!e.cachePath)throw g.createPersistenceNotValidatedError("Cache path not provided for the FilePersistence cache plugin");if(t=await E.create(e.cachePath,e.loggerOptions),await t.verifyPersistence())return t;throw g.createPersistenceNotVerifiedError("Persistence could not be verified")}throw n}),t}}class L{static tagToString(e){if(0===e)return"UNTAG";const t="abcdefghijklmnopqrstuvwxyz0123456789****************************";let n="*****";return n=[t[e>>24&63],t[e>>18&63],t[e>>12&63],t[e>>6&63],t[63&e]].join(""),n}}var U,q,F=new Map([["win32",new Set(["x64","ia32"])],["darwin",new Set(["arm64"])]]);!function(e){e[e.Unexpected=0]="Unexpected",e[e.Reserved=1]="Reserved",e[e.InteractionRequired=2]="InteractionRequired",e[e.NoNetwork=3]="NoNetwork",e[e.NetworkTemporarilyUnavailable=4]="NetworkTemporarilyUnavailable",e[e.ServerTemporarilyUnavailable=5]="ServerTemporarilyUnavailable",e[e.ApiContractViolation=6]="ApiContractViolation",e[e.UserCanceled=7]="UserCanceled",e[e.ApplicationCanceled=8]="ApplicationCanceled",e[e.IncorrectConfiguration=9]="IncorrectConfiguration",e[e.InsufficientBuffer=10]="InsufficientBuffer",e[e.AuthorityUntrusted=11]="AuthorityUntrusted",e[e.UserSwitched=12]="UserSwitched",e[e.AccountUnusable=13]="AccountUnusable",e[e.UserDataRemovalRequired=14]="UserDataRemovalRequired",e[e.KeyNotFound=15]="KeyNotFound",e[e.AccountNotFound=16]="AccountNotFound"}(U||(U={})),function(e){e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error",e[e.Fatal=6]="Fatal"}(q||(q={}));var H={errorCode:0,errorStatus:U.Unexpected,errorContext:"Platform and/or architecture combination is unsupported. Supported: Windows (x64, ia32), macOS (arm64). Unsupported: Windows (arm64), macOS (x64) and Linux.",errorTag:0},B={errorCode:0,errorStatus:U.Unexpected,errorContext:"Binaries could not be loaded. This is unexpected.",errorTag:0};function j(){var e,t=F.get(process.platform);return null!==(e=null==t?void 0:t.has(process.arch))&&void 0!==e&&e?B:H}var $,z=function(){function e(){}return e.prototype.CreateAuthParameters=function(){throw j()},e.prototype.SetRedirectUri=function(){throw j()},e.prototype.SetRequestedScopes=function(){throw j()},e.prototype.SetDecodedClaims=function(){throw j()},e.prototype.SetAccessTokenToRenew=function(){throw j()},e.prototype.SetPopParams=function(){throw j()},e.prototype.SetAdditionalParameter=function(){throw j()},e}(),V=function(){function e(){this.AuthParameters=z,this.StartupError=j()}return e.prototype.ReadAccountByIdAsync=function(){throw j()},e.prototype.SignInAsync=function(){throw j()},e.prototype.SignInSilentlyAsync=function(){throw j()},e.prototype.SignInInteractivelyAsync=function(){throw j()},e.prototype.AcquireTokenSilentlyAsync=function(){throw j()},e.prototype.AcquireTokenInteractivelyAsync=function(){throw j()},e.prototype.SignOutSilentlyAsync=function(){throw j()},e.prototype.RegisterLogger=function(){throw j()},e.prototype.DiscoverAccountsAsync=function(){throw j()},e}();try{$=n(7247)}catch(e){$=new V}class K extends Error{constructor(e,t,n){super(t?`${e}: ${t}`:e),Object.setPrototypeOf(this,K.prototype),this.errorCode=e||A,this.errorMessage=t||A,this.subError=n||A,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}class G extends K{constructor(e,t,n,r){super(e,t),this.name="NativeAuthError",this.statusCode=n,this.tag=L.tagToString(r),Object.setPrototypeOf(this,G.prototype)}}const W="@azure/msal-node-extensions",X="1.5.23",Y="client_info_decoding_error",Q="client_info_empty_error",J="token_parsing_error",Z="null_or_empty_token",ee="endpoints_resolution_error",te="network_error",ne="openid_config_error",re="hash_not_deserialized",ie="invalid_state",oe="state_mismatch",se="state_not_found",ae="nonce_mismatch",ce="auth_time_not_found",ue="max_age_transpired",le="multiple_matching_tokens",de="multiple_matching_accounts",he="multiple_matching_appMetadata",fe="request_cannot_be_made",pe="cannot_remove_empty_scope",ge="cannot_append_scopeset",me="empty_input_scopeset",ve="device_code_polling_cancelled",ye="device_code_expired",we="device_code_unknown_error",Ie="no_account_in_silent_request",Ae="invalid_cache_record",Se="invalid_cache_environment",Ce="no_account_found",_e="no_crypto_object",Ee="unexpected_credential_type",Te="invalid_assertion",be="invalid_client_credential",ke="token_refresh_required",Pe="user_timeout_reached",Re="token_claims_cnf_required_for_signedjwt",Oe="authorization_code_missing_from_server_response",Me="binding_key_not_removed",Ne="end_session_endpoint_not_supported",De="key_id_missing",xe="no_network_connectivity",Le="user_canceled",Ue="missing_tenant_id_error",qe="method_not_implemented",Fe="nested_app_auth_bridge_disabled",He={[Y]:"The client info could not be parsed/decoded correctly",[Q]:"The client info was empty",[J]:"Token cannot be parsed",[Z]:"The token is null or empty",[ee]:"Endpoints cannot be resolved",[te]:"Network request failed",[ne]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[re]:"The hash parameters could not be deserialized",[ie]:"State was not the expected format",[oe]:"State mismatch error",[se]:"State not found",[ae]:"Nonce mismatch error",[ce]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[ue]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[le]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[de]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[he]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[fe]:"Token request cannot be made without authorization code or refresh token.",[pe]:"Cannot remove null or empty scope from ScopeSet",[ge]:"Cannot append ScopeSet",[me]:"Empty input ScopeSet cannot be processed",[ve]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[ye]:"Device code is expired.",[we]:"Device code stopped polling for unknown reasons.",[Ie]:"Please pass an account object, silent flow is not supported without account information",[Ae]:"Cache record object was null or undefined.",[Se]:"Invalid environment when attempting to create cache entry",[Ce]:"No account found in cache for given key.",[_e]:"No crypto object detected.",[Ee]:"Unexpected credential type.",[Te]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[be]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[ke]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Pe]:"User defined timeout for device code polling reached",[Re]:"Cannot generate a POP jwt if the token_claims are not populated",[Oe]:"Server response does not contain an authorization code to proceed",[Me]:"Could not remove the credential's binding key from storage.",[Ne]:"The provided authority does not support logout",[De]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[xe]:"No network connectivity. Check your internet connection.",[Le]:"User cancelled the flow.",[Ue]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[qe]:"This method has not been implemented",[Fe]:"The nested app auth bridge is disabled"};class Be extends K{constructor(e,t){super(e,t?`${He[e]}: ${t}`:He[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,Be.prototype)}}function je(e,t){return new Be(e,t)}class $e{constructor(e,t){this.cacheOutcome="0",this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||A,this.wrapperVer=e.wrapperVer||A,this.telemetryCacheKey=S.CACHE_KEY+"-"+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${S.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&t.push(`broker_error=${n}`);const r=t.join(S.VALUE_SEPARATOR),i=[e,this.getRegionDiscoveryFields()].join(S.VALUE_SEPARATOR);return[S.SCHEMA_VERSION,i,r].join(S.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=$e.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*t).join(S.VALUE_SEPARATOR),r=e.errors.slice(0,t).join(S.VALUE_SEPARATOR),i=e.errors.length,o=[i,t<i?S.OVERFLOW_TRUE:S.OVERFLOW_FALSE].join(S.VALUE_SEPARATOR);return[S.SCHEMA_VERSION,e.cacheHits,n,r,o].join(S.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=S.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof K?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(S.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=$e.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const n={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}}static maxErrorsToSend(e){let t,n=0,r=0;const i=e.errors.length;for(t=0;t<i;t++){const i=e.failedRequests[2*t]||A,o=e.failedRequests[2*t+1]||A,s=e.errors[t]||A;if(r+=i.toString().length+o.toString().length+s.length+3,!(r<S.MAX_LAST_HEADER_BYTES))break;n+=1}return n}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||A),e.push(this.regionSource||A),e.push(this.regionOutcome||A),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return function(e){const{skus:t,libraryName:n,libraryVersion:r,extensionName:i,extensionVersion:o}=e,s=new Map([[0,[n,r]],[2,[i,o]]]);let a=[];if(t?.length){if(a=t.split(","),a.length<4)return t}else a=Array.from({length:4},()=>"|");return s.forEach((e,t)=>{2===e.length&&e[0]?.length&&e[1]?.length&&function(e){const{skuArr:t,index:n,skuName:r,skuVersion:i}=e;n>=t.length||(t[n]=[r,i].join("|"))}({skuArr:a,index:t,skuName:e[0],skuVersion:e[1]})}),a.join(",")}(e)}}const ze="redirect_uri_empty",Ve="claims_request_parsing_error",Ke="authority_uri_insecure",Ge="url_parse_error",We="empty_url_error",Xe="empty_input_scopes_error",Ye="invalid_claims",Qe="token_request_empty",Je="logout_request_empty",Ze="invalid_code_challenge_method",et="pkce_params_missing",tt="invalid_cloud_discovery_metadata",nt="invalid_authority_metadata",rt="untrusted_authority",it="missing_ssh_jwk",ot="missing_ssh_kid",st="missing_nonce_authentication_header",at="invalid_authentication_header",ct="cannot_set_OIDCOptions",ut="cannot_allow_platform_broker",lt="authority_mismatch",dt="invalid_request_method_for_EAR",ht="invalid_authorize_post_body_parameters",ft={[ze]:"A redirect URI is required for all calls, and none has been set.",[Ve]:"Could not parse the given claims request object.",[Ke]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Ge]:"URL could not be parsed into appropriate segments.",[We]:"URL was empty or null.",[Xe]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Ye]:"Given claims parameter must be a stringified JSON object.",[Qe]:"Token request was empty and not found in cache.",[Je]:"The logout request was null or undefined.",[Ze]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[et]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[tt]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[nt]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[rt]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[it]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[ot]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[st]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[at]:"Invalid authentication header provided",[ct]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[ut]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[lt]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[ht]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[dt]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."};class pt extends K{constructor(e){super(e,ft[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,pt.prototype)}}class gt extends K{constructor(e,t,n,r,i){super(e,t,n),this.name="ServerError",this.errorNo=r,this.status=i,Object.setPrototypeOf(this,gt.prototype)}}class mt extends K{constructor(e,t,n,r,i,o,s,a){super(e,t,n),Object.setPrototypeOf(this,mt.prototype),this.timestamp=r||A,this.traceId=i||A,this.correlationId=o||A,this.claims=s||A,this.name="InteractionRequiredAuthError",this.errorNo=a}}const vt="x-client-xtra-sku";class yt{constructor(){this.logger=new _({loggerCallback:()=>{},piiLoggingEnabled:!1},W,X),this.isBrokerAvailable=!$.StartupError}setLogger(e){this.logger=new _(e,W,X);const t=(e,t,n)=>{switch(t){case q.Trace:case q.Debug:n?this.logger.tracePii(e):this.logger.trace(e);break;case q.Info:n?this.logger.infoPii(e):this.logger.info(e);break;case q.Warning:n?this.logger.warningPii(e):this.logger.warning(e);break;case q.Error:case q.Fatal:n?this.logger.errorPii(e):this.logger.error(e);break;default:n?this.logger.infoPii(e):this.logger.info(e)}};try{$.RegisterLogger(t,e.piiLoggingEnabled||!1)}catch(e){const t=this.wrapError(e);if(t)throw t}}async getAccountById(e,t){this.logger.trace("NativeBrokerPlugin - getAccountById called",t);const n=await this.readAccountById(e,t);return this.generateAccountInfo(n.account)}async getAllAccounts(e,t){return this.logger.trace("NativeBrokerPlugin - getAllAccounts called",t),new Promise((n,r)=>{const i=e=>{try{e.CheckError()}catch(e){const t=this.wrapError(e);if(t)return void r(t)}const t=[];e.accounts.forEach(e=>{t.push(this.generateAccountInfo(e))}),n(t)};try{$.DiscoverAccountsAsync(e,t,i)}catch(e){const t=this.wrapError(e);t&&r(t)}})}async acquireTokenSilent(e){this.logger.trace("NativeBrokerPlugin - acquireTokenSilent called",e.correlationId);const t=e;t.redirectUri||(t.redirectUri=this.chooseRedirectUriByPlatform(t),this.logger.info("NativeBrokerPlugin - No Redirect URI provided, using default",t.redirectUri));const n=this.generateRequestParameters(t),r=await this.getAccount(t);return new Promise((e,i)=>{const o=n=>{try{n.CheckError()}catch(e){const t=this.wrapError(e);if(t)return void i(t)}const r=this.getAuthenticationResult(t,n);e(r)};try{r?$.AcquireTokenSilentlyAsync(n,t.correlationId,r,o):$.SignInSilentlyAsync(n,t.correlationId,o)}catch(e){const t=this.wrapError(e);t&&i(t)}})}async acquireTokenInteractive(e,t){this.logger.trace("NativeBrokerPlugin - acquireTokenInteractive called",e.correlationId);const n=e;n.redirectUri||(n.redirectUri=this.chooseRedirectUriByPlatform(n),this.logger.info("NativeBrokerPlugin - No Redirect URI provided, using default",n.redirectUri));const r=this.generateRequestParameters(n),i=await this.getAccount(n),o=t||Buffer.from([0]);return new Promise((e,t)=>{const s=r=>{try{r.CheckError()}catch(e){const n=this.wrapError(e);if(n)return void t(n)}const i=this.getAuthenticationResult(n,r);e(i)};try{switch(n.prompt){case"login":case"select_account":case"create":this.logger.info("Calling native interop SignInInteractively API",n.correlationId);const e=n.loginHint||A;$.SignInInteractivelyAsync(o,r,n.correlationId,e,s);break;case"none":i?(this.logger.info("Calling native interop AcquireTokenSilently API",n.correlationId),$.AcquireTokenSilentlyAsync(r,n.correlationId,i,s)):(this.logger.info("Calling native interop SignInSilently API",n.correlationId),$.SignInSilentlyAsync(r,n.correlationId,s));break;default:if(i)this.logger.info("Calling native interop AcquireTokenInteractively API",n.correlationId),$.AcquireTokenInteractivelyAsync(o,r,n.correlationId,i,s);else{this.logger.info("Calling native interop SignIn API",n.correlationId);const e=n.loginHint||A;$.SignInAsync(o,r,n.correlationId,e,s)}}}catch(e){const n=this.wrapError(e);n&&t(n)}})}async signOut(e){this.logger.trace("NativeBrokerPlugin - signOut called",e.correlationId);const t=await this.getAccount(e);if(!t)throw je(Ce);return new Promise((n,r)=>{const i=e=>{try{e.CheckError()}catch(e){const t=this.wrapError(e);if(t)return void r(t)}n()};try{$.SignOutSilentlyAsync(e.clientId,e.correlationId,t,i)}catch(e){const t=this.wrapError(e);t&&r(t)}})}async getAccount(e){return e.accountId?(await this.readAccountById(e.accountId,e.correlationId)).account:null}async readAccountById(e,t){return this.logger.trace("NativeBrokerPlugin - readAccountById called",t),new Promise((n,r)=>{const i=e=>{try{e.CheckError()}catch(e){const t=this.wrapError(e);if(t)return void r(t)}n(e)};try{$.ReadAccountByIdAsync(e,t,i)}catch(e){const t=this.wrapError(e);t&&r(t)}})}generateRequestParameters(e){this.logger.trace("NativeBrokerPlugin - generateRequestParameters called",e.correlationId);const t=new $.AuthParameters;try{if(t.CreateAuthParameters(e.clientId,e.authority),t.SetRedirectUri(e.redirectUri),t.SetRequestedScopes(e.scopes.join(" ")),e.claims&&t.SetDecodedClaims(e.claims),"pop"===e.authenticationScheme){if(!e.resourceRequestMethod||!e.resourceRequestUri)throw new Error("Authentication Scheme set to POP but one or more of the following parameters are missing: resourceRequestMethod, resourceRequestUri");const n=new URL(e.resourceRequestUri);t.SetPopParams(e.resourceRequestMethod,n.host,n.pathname,e.shrNonce||"")}e.extraParameters&&Object.entries(e.extraParameters).forEach(([e,n])=>{t.SetAdditionalParameter(e,n)});const n=e.extraParameters&&e.extraParameters[vt]?.length?e.extraParameters[vt]:"";t.SetAdditionalParameter(vt,$e.makeExtraSkuString({skus:n,extensionName:"msal.node.ext",extensionVersion:X}))}catch(e){const t=this.wrapError(e);if(t)throw t}return t}chooseRedirectUriByPlatform(e){let t;switch(this.logger.trace("NativeBrokerPlugin - chooseRedirectUriByPlatform called",e.correlationId),process.platform){case"darwin":t="msauth.com.msauth.unsignedapp://auth";break;case"win32":t=`ms-appx-web://Microsoft.AAD.BrokerPlugin/${e.clientId}`;break;default:t="https://login.microsoftonline.com/common/oauth2/nativeclient"}return t}getAuthenticationResult(e,t){this.logger.trace("NativeBrokerPlugin - getAuthenticationResult called",e.correlationId);let n,r=!1;try{r=!!JSON.parse(t.telemetryData).is_cache}catch(t){this.logger.error("NativeBrokerPlugin: getAuthenticationResult - Error parsing telemetry data. Could not determine if response came from cache.",e.correlationId)}try{n=JSON.parse(t.idToken)}catch(e){throw new Error("Unable to parse idToken claims")}const i=this.generateAccountInfo(t.account,n);let o,s;var a;return t.isPopAuthorization?(o=t.authorizationHeader.split(" ")[1],s="pop"):(o=t.accessToken,s="Bearer"),{authority:e.authority,uniqueId:n.oid||n.sub||"",tenantId:n.tid||"",scopes:t.grantedScopes.split(" "),account:i,idToken:t.rawIdToken,idTokenClaims:n,accessToken:o,fromCache:r,expiresOn:(a=t.expiresOn,a?new Date(1e3*Number(a)):new Date),tokenType:s,correlationId:e.correlationId,fromNativeBroker:!0}}generateAccountInfo(e,t){return this.logger.trace("NativeBrokerPlugin - generateAccountInfo called"),{homeAccountId:e.homeAccountId,environment:e.environment,tenantId:e.realm,username:e.username,localAccountId:e.localAccountId,name:e.displayName,idTokenClaims:t,nativeAccountId:e.accountId}}isMsalRuntimeError(e){return e.hasOwnProperty("errorCode")||e.hasOwnProperty("errorStatus")||e.hasOwnProperty("errorContext")||e.hasOwnProperty("errorTag")}wrapError(e){if(e&&"object"==typeof e&&this.isMsalRuntimeError(e)){const{errorCode:t,errorStatus:n,errorContext:r,errorTag:i}=e,o=L.tagToString(i),s=r?`${r} (Error Code: ${t}, Tag: ${o})`:`(Error Code: ${t}, Tag: ${o})`;switch(n){case U.InteractionRequired:case U.AccountUnusable:return new mt("interaction_required",s);case U.NoNetwork:case U.NetworkTemporarilyUnavailable:return je(xe);case U.ServerTemporarilyUnavailable:return new gt("server_unavailable",r);case U.UserCanceled:return je(Le);case U.AuthorityUntrusted:return function(e){return new pt(e)}(rt);case U.UserSwitched:return null;case U.AccountNotFound:return je(Ce);default:return new G(U[n],s,t,i)}}throw e}}},9023:e=>{"use strict";e.exports=require("util")},9147:(e,t,n)=>{"use strict";n.d(t,{Dy:()=>c,Hf:()=>d,If:()=>f,QA:()=>u,V9:()=>l,hF:()=>h,nM:()=>o});var r=n(269),i=n(6182),o=(0,r.eCG)("[[ai_dynCfg_1]]"),s=(0,r.eCG)("[[ai_blkDynCfg_1]]"),a=(0,r.eCG)("[[ai_frcDynCfg_1]]");function c(e){var t;return e&&((0,r.cyL)(e)?(t=[])[i.oI]=e[i.oI]:(0,r.QdQ)(e)&&(t={}),t)?((0,r.zav)(e,function(e,n){t[e]=c(n)}),t):e}function u(e){if(e){var t=e[o]||e;if(t.cfg&&(t.cfg===e||t.cfg[o]===t))return t}return null}function l(e){if(e&&((0,r.QdQ)(e)||(0,r.cyL)(e)))try{e[s]=!0}catch(e){}return e}function d(e){if(e)try{e[a]=!0}catch(e){}return e}function h(e,t,n){var i=!1;return n&&!e[t.blkVal]&&((i=n[a])||n[s]||(i=(0,r.QdQ)(n)||(0,r.cyL)(n))),i}function f(e){(0,r.zkd)("InvalidAccess:"+e)}},9354:(e,t,n)=>{"use strict";n.d(t,{Gz:()=>l,M0:()=>f,PS:()=>h,cM:()=>c,k6:()=>d,wX:()=>u});var r=n(269),i=n(5130),o=(0,r.YEm)()||{},s=0,a=[null,null,null,null,null];function c(e){var t=s,n=a,r=n[t];return o.createElement?n[t]||(r=n[t]=o.createElement("a")):r={host:h(e,!0)},r.href=e,++t>=n[i.oI]&&(t=0),s=t,r}function u(e){var t,n=c(e);return n&&(t=n.href),t}function l(e){var t,n=c(e);return n&&(t=n[i.Ue]),t}function d(e,t){return e?e.toUpperCase()+" "+t:t}function h(e,t){var n=f(e,t)||"";if(n){var o=n.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(null!=o&&o[i.oI]>3&&(0,r.KgX)(o[2])&&o[2][i.oI]>0)return o[2]+(o[3]||"")}return n}function f(e,t){var n=null;if(e){var o=e.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(null!=o&&o[i.oI]>2&&(0,r.KgX)(o[2])&&o[2][i.oI]>0&&(n=o[2]||"",t&&o[i.oI]>2)){var s=(o[1]||"")[i.OL](),a=o[3]||"";("http"===s&&":80"===a||"https"===s&&":443"===a)&&(a=""),n+=a}}return n}},9529:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSupportedEnvironment=function(e){return r.env.uiKind===r.UIKind.Desktop||(!!function(e){if(!/^https?$/i.test(e.scheme))return!1;const t=e.authority.split(":")[0];return i.indexOf(t)>=0}(e)||"https"===e.scheme&&(/(?:^|\.)vscode\.dev$/.test(e.authority)||/(?:^|\.)github\.dev$/.test(e.authority)||/(?:^|\.)github\.localhost$/.test(e.authority)))};const r=n(1398),i=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"]},9589:(e,t,n)=>{const r=n(9718),i=n(6874),o=n(3908),s=n(1123),a=n(144),c=n(6953),u=n(7414),l=n(3007),d=n(1832),h=n(2938),f=n(6254),p=n(4493),g=n(1729),m=n(560),v=n(9970),y=n(1763),w=n(909),I=n(3927),A=n(4277),S=n(5580),C=n(7059),_=n(4641),E=n(3999),T=n(4089),b=n(5200),k=n(2111),P=n(6170),R=n(3904),O=n(8311),M=n(7638),N=n(7631),D=n(9628),x=n(270),L=n(1261),U=n(3874),q=n(7075),F=n(5571),H=n(5342),B=n(6780),j=n(2525),$=n(5032);e.exports={parse:a,valid:c,clean:u,inc:l,diff:d,major:h,minor:f,patch:p,prerelease:g,compare:m,rcompare:v,compareLoose:y,compareBuild:w,sort:I,rsort:A,gt:S,lt:C,eq:_,neq:E,gte:T,lte:b,cmp:k,coerce:P,Comparator:R,Range:O,satisfies:M,toComparators:N,maxSatisfying:D,minSatisfying:x,minVersion:L,validRange:U,outside:q,gtr:F,ltr:H,intersects:B,simplifyRange:j,subset:$,SemVer:o,re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:i.SEMVER_SPEC_VERSION,RELEASE_TYPES:i.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers}},9614:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return s>o.length-16&&(i.default.randomFillSync(o),s=0),o.slice(s,s+=16)};var r,i=(r=n(6982))&&r.__esModule?r:{default:r};const o=new Uint8Array(256);let s=o.length},9628:(e,t,n)=>{const r=n(3908),i=n(8311);e.exports=(e,t,n)=>{let o=null,s=null,a=null;try{a=new i(t,n)}catch(e){return null}return e.forEach(e=>{a.test(e)&&(o&&-1!==s.compare(e)||(o=e,s=new r(o,n)))}),o}},9718:(e,t,n)=>{const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:o}=n(6874),s=n(7272),a=(t=e.exports={}).re=[],c=t.safeRe=[],u=t.src=[],l=t.t={};let d=0;const h="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",o],[h,i]],p=(e,t,n)=>{const r=(e=>{for(const[t,n]of f)e=e.split(`${t}*`).join(`${t}{0,${n}}`).split(`${t}+`).join(`${t}{1,${n}}`);return e})(t),i=d++;s(e,i,t),l[e]=i,u[i]=t,a[i]=new RegExp(t,n?"g":void 0),c[i]=new RegExp(r,n?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${h}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?`+`(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},9749:(e,t,n)=>{"use strict";n.d(t,{e:()=>w,a:()=>I});var r,i=n(269),o=n(4276),s=n(6492),a=n(6182),c=n(991),u=n(9147),l=["push","pop","shift","unshift","splice"],d=function(e,t,n,r){e&&e[a.ih](3,108,"".concat(n," [").concat(t,"] failed - ")+(0,i.mmD)(r))};function h(e,t){var n=(0,i.kgX)(e,t);return n&&n.get}function f(e,t,n,r){if(t){var o=h(t,n);o&&o[e.prop]?t[n]=r:function(e,t,n,r){var o={n,h:[],trk:function(t){t&&t.fn&&(-1===(0,i.rDm)(o.h,t)&&o.h[a.y5](t),e.trk(t,o))},clr:function(e){var t=(0,i.rDm)(o.h,e);-1!==t&&o.h[a.Ic](t,1)}},c=!0,l=!1;function p(){c&&(l=l||(0,u.hF)(p,e,r),r&&!r[u.nM]&&l&&(r=g(e,r,n,"Converting")),c=!1);var t=e.act;return t&&o.trk(t),r}p[e.prop]={chng:function(){e.add(o)}},(0,i.vF1)(t,o.n,{g:p,s:function(m){if(r!==m){p[e.ro]&&!e.upd&&(0,u.If)("["+n+"] is read-only:"+(0,i.mmD)(t)),c&&(l=l||(0,u.hF)(p,e,r),c=!1);var v=l&&p[e.rf];if(l)if(v){(0,i.zav)(r,function(e){r[e]=m?m[e]:s.HP});try{(0,i.zav)(m,function(t,n){f(e,r,t,n)}),m=r}catch(t){d((e.hdlr||{})[a.Uw],n,"Assigning",t),l=!1}}else r&&r[u.nM]&&(0,i.zav)(r,function(t){var n=h(r,t);if(n){var i=n[e.prop];i&&i.chng()}});if(m!==r){var y=m&&(0,u.hF)(p,e,m);!v&&y&&(m=g(e,m,n,"Converting")),r=m,l=y}e.add(o)}}})}(e,t,n,r)}return t}function p(e,t,n,r){if(t){var i=h(t,n),o=i&&!!i[e.prop],s=r&&r[0],c=r&&r[1],l=r&&r[2];if(!o){if(l)try{(0,u.V9)(t)}catch(t){d((e.hdlr||{})[a.Uw],n,"Blocking",t)}try{f(e,t,n,t[n]),i=h(t,n)}catch(t){d((e.hdlr||{})[a.Uw],n,"State",t)}}s&&(i[e.rf]=s),c&&(i[e.ro]=c),l&&(i[e.blkVal]=!0)}return t}function g(e,t,n,r){try{(0,i.zav)(t,function(n,r){f(e,t,n,r)}),t[u.nM]||((0,i.UxO)(t,u.nM,{get:function(){return e[a.K0]}}),function(e,t,n){(0,i.cyL)(t)&&(0,i.Iuo)(l,function(r){var i=t[r];t[r]=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var s=i[a.y9](this,r);return g(e,t,n,"Patching"),s}})}(e,t,n))}catch(t){d((e.hdlr||{})[a.Uw],n,r,t)}return t}var m="[[ai_",v="]]";function y(e,t,n){var s,l=(0,u.QA)(t);if(l)return l;var h,y=(0,o.Z)("dyncfg",!0),w=t&&!1!==n?t:(0,u.Dy)(t),I=((s={uid:null,cfg:w})[a.Uw]=e,s[a.zs]=function(){h[a.zs]()},s.set=function(t,n,r){try{t=f(h,t,n,r)}catch(t){d(e,n,"Setting value",t)}return t[n]},s[a.h0]=function(e,t){return t&&(0,i.zav)(t,function(t,n){(0,c.q)(I,e,t,n)}),e},s[a.x6]=function(e){return function(e,t){var n={fn:t,rm:function(){n.fn=null,e=null,t=null}};return(0,i.vF1)(n,"toJSON",{v:function(){return"WatcherHandler"+(n.fn?"":"[X]")}}),e.use(n,t),n}(h,e)},s.ref=function(e,t){var n;return p(h,e,t,(n={},n[0]=!0,n))[t]},s[a.XW]=function(e,t){var n;return p(h,e,t,(n={},n[1]=!0,n))[t]},s[a.JQ]=function(e,t){var n;return p(h,e,t,(n={},n[2]=!0,n))[t]},s._block=function(e,t){h.use(null,function(n){var r=h.upd;try{(0,i.b07)(t)||(h.upd=t),e(n)}finally{h.upd=r}})},s);return(0,i.vF1)(I,"uid",{c:!1,e:!1,w:!1,v:y}),g(h=function(e){var t,n,o=(0,i.jjc)(m+"get"+e.uid+v),s=(0,i.jjc)(m+"ro"+e.uid+v),c=(0,i.jjc)(m+"rf"+e.uid+v),u=(0,i.jjc)(m+"blkVal"+e.uid+v),l=(0,i.jjc)(m+"dtl"+e.uid+v),d=null,h=null;function f(t,r){var o=n.act;try{n.act=t,t&&t[l]&&((0,i.Iuo)(t[l],function(e){e.clr(t)}),t[l]=[]),r({cfg:e.cfg,set:e.set.bind(e),setDf:e[a.h0].bind(e),ref:e.ref.bind(e),rdOnly:e[a.XW].bind(e)})}catch(t){var s=e[a.Uw];throw s&&s[a.ih](1,107,(0,i.mmD)(t)),t}finally{n.act=o||null}}function p(){if(d){var e=d;d=null,h&&h[a._w](),h=null;var t=[];if((0,i.Iuo)(e,function(e){if(e&&(e[l]&&((0,i.Iuo)(e[l],function(t){t.clr(e)}),e[l]=null),e.fn))try{f(e,e.fn)}catch(e){t[a.y5](e)}}),d)try{p()}catch(e){t[a.y5](e)}t[a.oI]>0&&function(e,t){r||(r=(0,i.aqQ)("AggregationError",function(e,t){t[a.oI]>1&&(e.errors=t[1])}));var n="Watcher error(s): ";throw(0,i.Iuo)(t,function(e,t){n+="\n".concat(t," > ").concat((0,i.mmD)(e))}),new r(n,t||[])}(0,t)}}return(t={prop:o,ro:s,rf:c})[a.JQ]=u,t[a.K0]=e,t.add=function(e){if(e&&e.h[a.oI]>0){d||(d=[]),h||(h=(0,i.dRz)(function(){h=null,p()},0));for(var t=0;t<e.h[a.oI];t++){var n=e.h[t];n&&-1===(0,i.rDm)(d,n)&&d[a.y5](n)}}},t[a.zs]=p,t.use=f,t.trk=function(e,t){if(e){var n=e[l]=e[l]||[];-1===(0,i.rDm)(n,t)&&n[a.y5](t)}},n=t}(I),w,"config","Creating"),I}function w(e,t,n,r){var i=y(n,e||{},r);return t&&i[a.h0](i.cfg,t),i}function I(e,t,n){var r=e[u.nM]||e;return!r.cfg||r.cfg!==e&&r.cfg[u.nM]!==r?(function(e,t){e?(e[a.on](t),e[a.ih](2,108,t)):(0,u.If)(t)}(n,s.xW+(0,i.mmD)(e)),w(e,null,n)[a.x6](t)):r[a.x6](t)}},9762:(e,t,n)=>{"use strict";n.d(t,{O:()=>r});var r=(0,n(4282).H)({Verbose:0,Information:1,Warning:2,Error:3,Critical:4})},9882:(e,t,n)=>{"use strict";n.d(t,{aq:()=>s,cL:()=>a});var r=n(269),i=n(6492),o=n(6535);function s(){var e=a();return(0,r.P0f)(e,0,8)+"-"+(0,r.P0f)(e,8,12)+"-"+(0,r.P0f)(e,12,16)+"-"+(0,r.P0f)(e,16,20)+"-"+(0,r.P0f)(e,20)}function a(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=i.m5,s=0;s<4;s++)n+=t[15&(e=(0,o.VN)())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var a=t[8+(3&(0,o.VN)())|0];return(0,r.hKY)(n,0,8)+(0,r.hKY)(n,9,4)+"4"+(0,r.hKY)(n,13,3)+a+(0,r.hKY)(n,16,3)+(0,r.hKY)(n,19,12)}},9896:e=>{"use strict";e.exports=require("fs")},9970:(e,t,n)=>{const r=n(560);e.exports=(e,t,n)=>r(t,e,n)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r=n(5256),i=exports;for(var o in r)i[o]=r[o];r.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();
//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/7d842fb85a0275a4a8e4d7e040d2625abbf7f084/extensions/microsoft-authentication/dist/extension.js.map